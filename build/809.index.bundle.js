"use strict";(self.webpackChunkflowtrade=self.webpackChunkflowtrade||[]).push([[809],{97809:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ri});var s=r(25602),n=r(36478),i=r(96261),a=r(78257),o=r(7658),l=r(74045),c=r(73419),h=r(50135),d=r(62764),u=r(60711),p=r.n(u),m=r(4769),g=r.n(m),f=r(48618),y=r.n(f),b=r(85214),v=r(3203),k=r(72615),x=r(10836),S=r(19290),C=r(82458),w=r(9033),D=r(5762),E=r.n(D),R=r(34220),O=r(43951),T=r(48668),F=r(28124),P=r.n(F),q=r(43164);class A extends q.A{constructor(e,t){super(e,t),this.yScale=this.yScale.bind(this),this.listener=this.listener.bind(this)}componentWillMount(){const{id:e}=this.props,{subscribe:t}=this.context;t("chart_"+e,{listener:this.listener})}componentWillUnmount(){const{id:e}=this.props,{unsubscribe:t}=this.context;t("chart_"+e)}listener(e,t,r,s){const{id:n,onContextMenu:i}=this.props;if("contextmenu"===e){const{currentCharts:e}=t;e.indexOf(n)>-1&&i(t,s)}}yScale(){return(0,O.I6)(this.context.chartConfig,e=>e.id===this.props.id).yScale.copy()}getChildContext(){const{id:e}=this.props,t=(0,O.I6)(this.context.chartConfig,t=>t.id===e);return{chartId:e,chartConfig:t}}render(){const{origin:e}=(0,O.I6)(this.context.chartConfig,e=>e.id===this.props.id),[t,r]=e;return w.createElement("g",{transform:`translate(${t}, ${r})`},this.props.children)}}A.propTypes={height:E().number,origin:E().oneOfType([E().array,E().func]),id:E().oneOfType([E().number,E().string]).isRequired,yExtents:E().oneOfType([E().array,E().func]),yExtentsCalculator:function(e,t,r){if((0,O.pN)(e.yExtents)&&"function"!=typeof e.yExtentsCalculator)return new Error(`yExtents or yExtentsCalculator must be present on ${r}. Validation failed.`)},onContextMenu:E().func,yScale:E().func,flipYScale:E().bool,padding:E().oneOfType([E().number,E().shape({top:E().number,bottom:E().number})]),children:E().node},A.defaultProps={id:0,origin:[0,0],padding:0,yScale:(0,x.m4)(),flipYScale:!1,yPan:!0,yPanEnabled:!1,onContextMenu:O.lQ},A.contextTypes={chartConfig:E().array,subscribe:E().func.isRequired,unsubscribe:E().func.isRequired},A.childContextTypes={chartConfig:E().object.isRequired,chartId:E().oneOfType([E().number,E().string]).isRequired};const N=A;function M(e){if(Array.isArray(e)&&2===e.length){const[t,r]=e;return"number"==typeof t&&"number"==typeof r}return!1}function W(e,t,r=[]){return w.Children.map(t,t=>{if(t&&t.type.toString()===N.toString()){const s={...N.defaultProps,...t.props},{id:n,origin:i,padding:a,yExtents:o,yScale:l,flipYScale:c,yExtentsCalculator:h}=s,d=l.copy(),{width:u,height:p,availableHeight:m}=function({width:e,height:t},r){return{availableHeight:t,width:e,height:r.height||t}}(e,s),{yPan:g}=s;let{yPanEnabled:f}=s;const y=(0,O.O9)(o)?(Array.isArray(o)?o:[o]).map(O.ER):void 0,b=(0,O.I6)(r,e=>e.id===n);if(M(o))if((0,O.O9)(b)&&b.yPan&&b.yPanEnabled&&g&&f&&(0,O.bN)(b.originalYExtentsProp,o))d.domain(b.yScale.domain());else{const[e,t]=o;d.domain([e,t])}else(0,O.O9)(b)&&b.yPanEnabled&&(M(b.originalYExtentsProp)||(d.domain(b.yScale.domain()),f=!0));return{id:n,origin:(0,O.ER)(i)(u,m),padding:a,originalYExtentsProp:o,yExtents:y,yExtentsCalculator:h,flipYScale:c,yScale:d,yPan:g,yPanEnabled:f,width:u,height:p}}}).filter(e=>(0,O.O9)(e))}function V(e,t){return e.filter(e=>{const r=e.origin[1],s=r+e.height;return t[1]>r&&t[1]<s}).map(e=>e.id)}function H(e,t,r){const s=e.map(e=>{return r.map((t=e,e=>{const r=t(e);return(0,O.Gv)(r)?(0,O.s8)(r):r}));var t}),n=P()(s);return t.invert?(0,R.Xx)(n):(0,T.hZ)(n).values()}function z(e,{plotData:t,xAccessor:r,displayXAccessor:s,fullData:n},i,a,o){const l=e.map(({yExtentsCalculator:e,yExtents:o,yScale:l})=>({realYDomain:(0,O.O9)(e)?e({plotData:t,xDomain:i,xAccessor:r,displayXAccessor:s,fullData:n}):H(o,l,t),yDomainDY:(0,O.O9)(a)?l.range().map(e=>e-a).map(l.invert):l.domain(),prevYDomain:l.domain()}));return(0,O.LI)().combine((e,{realYDomain:t,yDomainDY:r,prevYDomain:s})=>{const{id:n,padding:i,height:a,yScale:l,yPan:c,flipYScale:h,yPanEnabled:d=!1}=e,u=!(0,O.O9)(o)||o.indexOf(n)>-1,p=c&&d?u?r:s:t,m=function(e,t,r,s){if(e.rangeRoundPoints||(0,O.pN)(e.invert)){if(isNaN(r))throw new Error("padding has to be a number for ordinal scale");e.rangeRoundPoints&&e.rangeRoundPoints(s?[0,t]:[t,0],r),e.rangeRound&&e.range(s?[0,t]:[t,0]).padding(r)}else{const{top:n,bottom:i}=isNaN(r)?r:{top:r,bottom:r};e.range(s?[n,t-i]:[t-i,n])}return e}(l.copy().domain(p),a,i,h);return{...e,yScale:m,realYDomain:t}})(e,l)}function I(e,t,r,s){let n,i;if(e.invert)n=e.invert(r[0]),i=(0,O.VE)(s,n,t);else{const t=e.range().map((e,t)=>({x:Math.abs(e-r[0]),idx:t})).reduce((e,t)=>e.x<t.x?e:t);i=(0,O.O9)(t)?s[t.idx]:s[0]}return i}function L(e,t,r,s){let n,i;if(e.invert){if(n=e.invert(r[0]),n>t((0,O.HV)(s))&&e.value)return Math.round(n);i=(0,O.VE)(s,n,t)}else{const t=e.range().map((e,t)=>({x:Math.abs(e-r[0]),idx:t})).reduce((e,t)=>e.x<t.x?e:t);i=(0,O.O9)(t)?s[t.idx]:s[0]}return t(i)}function X({xScale:e,xAccessor:t,mouseXY:r,plotData:s,fullData:n}){return t(I(e,t,r,s))}function B({xScale:e,xAccessor:t,mouseXY:r,plotData:s,fullData:n}){const[,i]=e.domain();return i}var Y=r(81697),G=r(58288),$=r(28119),j=r(31471);function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},U.apply(null,arguments)}class Q extends w.Component{constructor(e){super(e),this.handleEnter=this.handleEnter.bind(this),this.handleLeave=this.handleLeave.bind(this),this.handleWheel=this.handleWheel.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handlePanEnd=this.handlePanEnd.bind(this),this.handlePan=this.handlePan.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handlePinchZoom=this.handlePinchZoom.bind(this),this.handlePinchZoomEnd=this.handlePinchZoomEnd.bind(this),this.handleClick=this.handleClick.bind(this),this.handleRightClick=this.handleRightClick.bind(this),this.handleDrag=this.handleDrag.bind(this),this.handleDragEnd=this.handleDragEnd.bind(this),this.shouldPan=this.shouldPan.bind(this),this.canPan=this.canPan.bind(this),this.setCursorClass=this.setCursorClass.bind(this),this.saveNode=this.saveNode.bind(this),this.mouseInside=!1,this.mouseInteraction=!0,this.state={panInProgress:!1}}saveNode(e){this.node=e}componentWillMount(){this.focus=this.props.focus}componentDidMount(){this.node&&(0,Y.A)(this.node).on(O._J,this.handleEnter).on(O.vs,this.handleLeave)}componentDidUpdate(){this.componentDidMount()}componentWillUnmount(){if(this.node){(0,Y.A)(this.node).on(O._J,null).on(O.vs,null);const e=(0,O.mK)(this.node);(0,Y.A)(e).on(O.Xd,null)}}handleEnter(){const e=G.f0,{onMouseEnter:t}=this.props;if(this.mouseInside=!0,!this.state.panInProgress&&!this.state.dragInProgress){const e=(0,O.mK)(this.node);(0,Y.A)(e).on(O.Xd,this.handleMouseMove)}t(e)}handleLeave(e){const{onMouseLeave:t}=this.props;if(this.mouseInside=!1,!this.state.panInProgress&&!this.state.dragInProgress){const e=(0,O.mK)(this.node);(0,Y.A)(e).on(O.Xd,null)}t(e)}handleWheel(e){const{zoom:t,onZoom:r}=this.props,{panInProgress:s}=this.state,n=Math.abs(e.deltaY)>Math.abs(e.deltaX)&&Math.abs(e.deltaY)>0,i=(0,O.jQ)(e);if(t&&this.focus&&n&&!s)r(e.deltaY>0?1:-1,i,e);else if(this.focus){if(this.shouldPan()){const{panStartXScale:t,chartsToPan:r}=this.state.panStart;this.lastNewPos=i,this.panHappened=!0,this.dx+=e.deltaX,this.dy+=e.deltaY;const s={dx:this.dx,dy:this.dy};this.props.onPan(i,t,s,r,e)}else{const{xScale:e,chartConfig:t}=this.props,r=V(t,i);this.dx=0,this.dy=0,this.setState({panInProgress:!0,panStart:{panStartXScale:e,panOrigin:i,chartsToPan:r}})}this.queuePanEnd()}}queuePanEnd(){(0,O.O9)(this.panEndTimeout)&&clearTimeout(this.panEndTimeout),this.panEndTimeout=setTimeout(()=>{this.handlePanEnd()},100)}handleMouseMove(){const e=G.f0,{onMouseMove:t,mouseMove:r}=this.props;this.mouseInteraction&&r&&!this.state.panInProgress&&t((0,$.A)(this.node),"mouse",e)}handleClick(e){const t=(0,O.jQ)(e),{onClick:r,onDoubleClick:s}=this.props;this.panHappened||this.dragHappened||(this.clicked?(s(t,e),this.clicked=!1):(r(t,e),this.clicked=!0,setTimeout(()=>{this.clicked&&(this.clicked=!1)},400)))}handleRightClick(e){e.stopPropagation(),e.preventDefault();const{onContextMenu:t,onPanEnd:r}=this.props,s=(0,O.jQ)(e,this.node.getBoundingClientRect());if((0,O.O9)(this.state.panStart)){const{panStartXScale:t,panOrigin:n,chartsToPan:i}=this.state.panStart;this.panHappened&&r(s,t,n,i,e);const a=(0,O.mK)(this.node);(0,Y.A)(a).on(O.Xd,null).on(O.du,null),this.setState({panInProgress:!1,panStart:null})}t(s,e)}handleDrag(){const e=G.f0;if(this.props.onDrag){this.dragHappened=!0;const t=(0,$.A)(this.node);this.props.onDrag({startPos:this.state.dragStartPosition,mouseXY:t},e)}}cancelDrag(){const e=(0,O.mK)(this.node);(0,Y.A)(e).on(O.Xd,this.mouseInside?this.handleMouseMove:null).on(O.du,null),this.setState({dragInProgress:!1}),this.mouseInteraction=!0}handleDragEnd(){const e=G.f0,t=(0,$.A)(this.node),r=(0,O.mK)(this.node);(0,Y.A)(r).on(O.Xd,this.mouseInside?this.handleMouseMove:null).on(O.du,null),this.dragHappened&&this.props.onDragComplete({mouseXY:t},e),this.setState({dragInProgress:!1}),this.mouseInteraction=!0}canPan(){const{getAllPanConditions:e}=this.props,{pan:t}=this.props,{panEnabled:r,draggable:s}=e().reduce((e,t)=>({draggable:e.draggable||t.draggable,panEnabled:e.panEnabled&&t.panEnabled}),{draggable:!1,panEnabled:t});return{panEnabled:r,somethingSelected:s}}handleMouseDown(e){if(0!==e.button)return;const{xScale:t,chartConfig:r,onMouseDown:s}=this.props;if(this.panHappened=!1,this.dragHappened=!1,this.focus=!0,!this.state.panInProgress&&this.mouseInteraction){const n=(0,O.jQ)(e),i=V(r,n),{panEnabled:a,somethingSelected:o}=this.canPan(),l=a&&!o;if(l){this.setState({panInProgress:l,panStart:{panStartXScale:t,panOrigin:n,chartsToPan:i}});const e=(0,O.mK)(this.node);(0,Y.A)(e).on(O.Xd,this.handlePan).on(O.du,this.handlePanEnd)}else if(o){this.setState({panInProgress:!1,dragInProgress:!0,panStart:null,dragStartPosition:n}),this.props.onDragStart({startPos:n},e);const t=(0,O.mK)(this.node);(0,Y.A)(t).on(O.Xd,this.handleDrag).on(O.du,this.handleDragEnd)}s(n,i,e)}e.preventDefault()}shouldPan(){const{pan:e,onPan:t}=this.props;return e&&t&&(0,O.O9)(this.state.panStart)}handlePan(){const e=G.f0;if(this.shouldPan()){this.panHappened=!0;const{panStartXScale:t,panOrigin:r,chartsToPan:s}=this.state.panStart,n=this.mouseInteraction?(0,$.A)(this.node):(0,j.A)(this.node)[0];this.lastNewPos=n;const i=n[0]-r[0],a=n[1]-r[1];this.dx=i,this.dy=a,this.props.onPan(n,t,{dx:i,dy:a},s,e)}}handlePanEnd(){const e=G.f0,{pan:t,onPanEnd:r}=this.props;if((0,O.O9)(this.state.panStart)){const{panStartXScale:s,chartsToPan:n}=this.state.panStart,i=(0,O.mK)(this.node);if((0,Y.A)(i).on(O.Xd,this.mouseInside?this.handleMouseMove:null).on(O.du,null).on(O.vx,null).on(O.t2,null),this.panHappened&&t&&r){const{dx:t,dy:i}=this;delete this.dx,delete this.dy,r(this.lastNewPos,s,{dx:t,dy:i},n,e)}this.setState({panInProgress:!1,panStart:null})}}handleTouchMove(e){const{onMouseMove:t}=this.props;t((0,O.L6)((0,O.Sq)(e.touches[0]),e),"touch",e)}handleTouchStart(e){this.mouseInteraction=!1;const{pan:t,chartConfig:r,onMouseMove:s}=this.props,{xScale:n,onPanEnd:i}=this.props;if(1===e.touches.length){this.panHappened=!1;const i=(0,O.L6)((0,O.Sq)(e.touches[0]),e);if(s(i,"touch",e),t){const e=V(r,i);this.setState({panInProgress:!0,panStart:{panStartXScale:n,panOrigin:i,chartsToPan:e}});const t=(0,O.mK)(this.node);(0,Y.A)(t).on(O.vx,this.handlePan,!1).on(O.t2,this.handlePanEnd,!1)}}else if(2===e.touches.length){const{panInProgress:r,panStart:s}=this.state;if(r&&t&&i){const{panStartXScale:r,panOrigin:a,chartsToPan:o}=s,l=(0,O.mK)(this.node);(0,Y.A)(l).on(O.Xd,this.mouseInside?this.handleMouseMove:null).on(O.du,null).on(O.vx,this.handlePinchZoom,!1).on(O.t2,this.handlePinchZoomEnd,!1);const c=(0,O.L6)((0,O.Sq)(e.touches[0]),e),h=(0,O.L6)((0,O.Sq)(e.touches[1]),e);this.panHappened&&t&&i&&i(this.lastNewPos,r,a,o,e),this.setState({panInProgress:!1,pinchZoomStart:{xScale:n,touch1Pos:c,touch2Pos:h,range:n.range(),chartsToPan:o}})}}}handlePinchZoom(){const e=G.f0,[t,r]=(0,j.A)(this.node),{xScale:s,zoom:n,onPinchZoom:i}=this.props,{chartsToPan:a,...o}=this.state.pinchZoomStart;n&&i&&i(o,{touch1Pos:t,touch2Pos:r,xScale:s},e)}handlePinchZoomEnd(){const e=G.f0,t=(0,O.mK)(this.node);(0,Y.A)(t).on(O.vx,null).on(O.t2,null);const{zoom:r,onPinchZoomEnd:s}=this.props,{chartsToPan:n,...i}=this.state.pinchZoomStart;r&&s&&s(i,e),this.setState({pinchZoomStart:null})}setCursorClass(e){e!==this.state.cursorOverrideClass&&this.setState({cursorOverrideClass:e})}render(){const{height:e,width:t,disableInteraction:r,useCrossHairStyleCursor:s}=this.props,n=null!=this.state.cursorOverrideClass?this.state.cursorOverrideClass:s?this.state.panInProgress?"react-stockcharts-grabbing-cursor":"react-stockcharts-crosshair-cursor":"",i=r||{onWheel:this.handleWheel,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleRightClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove};return w.createElement("rect",U({ref:this.saveNode,className:n,width:t,height:e,style:{opacity:0}},i))}}Q.propTypes={mouseMove:E().bool.isRequired,zoom:E().bool.isRequired,pan:E().bool.isRequired,panSpeedMultiplier:E().number.isRequired,focus:E().bool.isRequired,useCrossHairStyleCursor:E().bool.isRequired,width:E().number.isRequired,height:E().number.isRequired,chartConfig:E().array,xScale:E().func.isRequired,xAccessor:E().func.isRequired,disableInteraction:E().bool.isRequired,getAllPanConditions:E().func.isRequired,onMouseMove:E().func,onMouseEnter:E().func,onMouseLeave:E().func,onZoom:E().func,onPinchZoom:E().func,onPinchZoomEnd:E().func.isRequired,onPan:E().func,onPanEnd:E().func,onDragStart:E().func,onDrag:E().func,onDragComplete:E().func,onClick:E().func,onDoubleClick:E().func,onContextMenu:E().func,onMouseDown:E().func,children:E().node},Q.defaultProps={mouseMove:!1,zoom:!1,pan:!1,panSpeedMultiplier:1,focus:!1,onDragComplete:O.lQ,disableInteraction:!1};const Z=Q,_=(0,O.tZ)("CanvasContainer");class K extends w.Component{constructor(e){super(e),this.setDrawCanvas=this.setDrawCanvas.bind(this),this.drawCanvas={}}setDrawCanvas(e){(0,O.O9)(e)?this.drawCanvas[e.id]=e.getContext("2d"):this.drawCanvas={}}getCanvasContexts(){if((0,O.O9)(this.drawCanvas.axes))return this.drawCanvas}render(){const{height:e,width:t,type:r,zIndex:s,ratio:n}=this.props;return"svg"===r?null:(_("using ratio ",n),w.createElement("div",{style:{position:"absolute",zIndex:s}},w.createElement("canvas",{id:"bg",ref:this.setDrawCanvas,width:t*n,height:e*n,style:{position:"absolute",width:t,height:e}}),w.createElement("canvas",{id:"axes",ref:this.setDrawCanvas,width:t*n,height:e*n,style:{position:"absolute",width:t,height:e}}),w.createElement("canvas",{id:"mouseCoord",ref:this.setDrawCanvas,width:t*n,height:e*n,style:{position:"absolute",width:t,height:e}})))}}K.propTypes={width:E().number.isRequired,height:E().number.isRequired,type:E().string.isRequired,zIndex:E().number,ratio:E().number.isRequired};const J=K,ee=(0,O.tZ)("evaluator");function te(e,t,r,s){const{lastItem:n,lastItemX:i}=e,a=t(n),[o,l]=r.range();return(l-o)/(i-o)*(a-s)+s}function re(e,t){return Math.floor(e*t)}function se(e,t,r,s){const n=(0,O.fK)(e,t,s).right,i=(0,O.fK)(e,r,s).left;return e.slice(n,i+1)}(0,O.tZ)("ChartCanvas");const ne=["seriesName"];function ie(e){return{height:e.height-e.margin.top-e.margin.bottom,width:e.width-e.margin.left-e.margin.right}}function ae(e){return e?-1:1}function oe(e){const{data:t,plotFull:r,xScale:s,clamp:n,pointsPerPxThreshold:i,flipXScale:a}=e,{xAccessor:o,displayXAccessor:l,minPointsPerPxThreshold:c}=e,h=(0,O.O9)(r)?r:o===O.D_,{filterData:d}=function({xScale:e,useWholeData:t,clamp:r,pointsPerPxThreshold:s,minPointsPerPxThreshold:n,flipXScale:i}){return function(e,t,r,s,n){return{filterData:function(i,a,o,l,{currentPlotData:c,currentDomain:h,fallbackStart:d,fallbackEnd:u}={}){if(e)return{plotData:i,domain:a};let p=(0,O.d5)(a),m=(0,O.HV)(a),g=a,f=se(i,p,m,o);1===f.length&&(0,O.O9)(d)&&(p=d,m=te(u,o,l,p),g=[p,m],f=se(i,p,m,o)),"function"==typeof t?g=t(g,[o((0,O.d5)(i)),o((0,O.HV)(i))]):("left"!==t&&"both"!==t&&!0!==t||(g=[Math.max(p,o((0,O.d5)(i))),g[1]]),"right"!==t&&"both"!==t&&!0!==t||(g=[g[0],Math.min(m,o((0,O.HV)(i)))])),g!==a&&(f=se(i,g[0],g[1],o));const y=g,b=l.copy().domain(y);let v,k,x=Math.floor(b(o((0,O.HV)(f)))-b(o((0,O.d5)(f))));n&&x<0&&(x*=-1);const S=(0,O.HV)(b.range())-(0,O.d5)(b.range());if(ee(`Trying to show ${f.length} points in ${x}px, I can show up to ${re(x,r)-1} points in that width. Also FYI the entire chart width is ${S}px and pointsPerPxThreshold is ${r}`),function(e,t,r,s){return t>function(e,t){return Math.max(1,Math.ceil(e*t))}(e,s)&&t<re(e,r)}(x,f.length,r,s))v=f,k=y,ee("AND IT WORKED");else if(S>re(x,r)&&(0,O.O9)(u)){v=f;const e=te(u,o,l,(0,O.d5)(y));k=[(0,O.d5)(y),e];const t=b.copy().domain(k),r=Math.floor(t(o((0,O.HV)(v)))-t(o((0,O.d5)(v))));ee(`and ouch, that is too much, so instead showing ${v.length} in ${r}px`)}else{v=c||f.slice(f.length-function(e,t){return Math.floor(.97*re(e,t))}(x,r)),k=h||[o((0,O.d5)(v)),o((0,O.HV)(v))];const e=b.copy().domain(k),t=Math.floor(e(o((0,O.HV)(v)))-e(o((0,O.d5)(v))));ee(`and ouch, that is too much, so instead showing ${v.length} in ${t}px`)}return{plotData:v,domain:k}}}}(t||(0,O.pN)(e.invert),r,s,n,i)}({xScale:s,useWholeData:h,clamp:n,pointsPerPxThreshold:i,minPointsPerPxThreshold:c,flipXScale:a});return{xAccessor:o,displayXAccessor:l||o,xScale:s.copy(),fullData:t,filterData:d}}function le(e,t=!1){const r=function(e){const{xAccessor:t,xExtents:r,data:s,padding:n,flipXScale:i}=e,a=ae(i),o=ie(e),l="function"==typeof r?r(s):(0,R.Xx)(r.map(e=>(0,O.ER)(e)).map(e=>e(s,t))),{xAccessor:c,displayXAccessor:h,xScale:d,fullData:u,filterData:p}=oe(e),m=ce(d,o,n,a),{plotData:g,domain:f}=p(u,l,t,m);return{plotData:g,xScale:m.domain(f),xAccessor:c,displayXAccessor:h,fullData:u,filterData:p}}(e),{xAccessor:s,displayXAccessor:n,fullData:i}=r,{plotData:a,xScale:o}=r,{postCalculator:l,children:c}=e,h=l(a),d=z(W(ie(e),c),{plotData:h,xAccessor:s,displayXAccessor:n,fullData:i},o.domain());return{...r,xScale:o,plotData:h,chartConfig:d}}function ce(e,t,r,s=1){if(e.rangeRoundPoints){if(isNaN(r))throw new Error("padding has to be a number for ordinal scale");e.rangeRoundPoints([0,t.width],r)}else if(e.padding){if(isNaN(r))throw new Error("padding has to be a number for ordinal scale");e.range([0,t.width]),e.padding(r/2)}else{const{left:n,right:i}=isNaN(r)?r:{left:r,right:r};s>0?e.range([n,t.width-i]):e.range([t.width-i,n])}return e}function he(e){const{touch1Pos:t,touch2Pos:r}=e;return{topLeft:[Math.min(t[0],r[0]),Math.min(t[1],r[1])],bottomRight:[Math.max(t[0],r[0]),Math.max(t[1],r[1])]}}class de extends w.Component{constructor(){super(),this.getDataInfo=this.getDataInfo.bind(this),this.getCanvasContexts=this.getCanvasContexts.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleZoom=this.handleZoom.bind(this),this.handlePinchZoom=this.handlePinchZoom.bind(this),this.handlePinchZoomEnd=this.handlePinchZoomEnd.bind(this),this.handlePan=this.handlePan.bind(this),this.handlePanEnd=this.handlePanEnd.bind(this),this.handleClick=this.handleClick.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleDoubleClick=this.handleDoubleClick.bind(this),this.handleContextMenu=this.handleContextMenu.bind(this),this.handleDragStart=this.handleDragStart.bind(this),this.handleDrag=this.handleDrag.bind(this),this.handleDragEnd=this.handleDragEnd.bind(this),this.panHelper=this.panHelper.bind(this),this.pinchZoomHelper=this.pinchZoomHelper.bind(this),this.xAxisZoom=this.xAxisZoom.bind(this),this.yAxisZoom=this.yAxisZoom.bind(this),this.resetYDomain=this.resetYDomain.bind(this),this.calculateStateForDomain=this.calculateStateForDomain.bind(this),this.generateSubscriptionId=this.generateSubscriptionId.bind(this),this.draw=this.draw.bind(this),this.redraw=this.redraw.bind(this),this.getAllPanConditions=this.getAllPanConditions.bind(this),this.subscriptions=[],this.subscribe=this.subscribe.bind(this),this.unsubscribe=this.unsubscribe.bind(this),this.amIOnTop=this.amIOnTop.bind(this),this.saveEventCaptureNode=this.saveEventCaptureNode.bind(this),this.saveCanvasContainerNode=this.saveCanvasContainerNode.bind(this),this.setCursorClass=this.setCursorClass.bind(this),this.getMutableState=this.getMutableState.bind(this),this.interactiveState=[],this.panInProgress=!1,this.state={},this.mutableState={},this.lastSubscriptionId=0}saveEventCaptureNode(e){this.eventCaptureNode=e}saveCanvasContainerNode(e){this.canvasContainerNode=e}getMutableState(){return this.mutableState}getDataInfo(){return{...this.state,fullData:this.fullData}}getCanvasContexts(){if(this.canvasContainerNode)return this.canvasContainerNode.getCanvasContexts()}generateSubscriptionId(){return this.lastSubscriptionId++,this.lastSubscriptionId}clearBothCanvas(){const e=this.getCanvasContexts();e&&e.axes&&(0,O.iV)([e.axes,e.mouseCoord],this.props.ratio)}clearMouseCanvas(){const e=this.getCanvasContexts();e&&e.mouseCoord&&(0,O.iV)([e.mouseCoord],this.props.ratio)}clearThreeCanvas(){const e=this.getCanvasContexts();e&&e.axes&&(0,O.iV)([e.axes,e.mouseCoord,e.bg],this.props.ratio)}subscribe(e,t){const{getPanConditions:r=(0,O.ER)({draggable:!1,panEnabled:!0})}=t;this.subscriptions=this.subscriptions.concat({id:e,...t,getPanConditions:r})}unsubscribe(e){this.subscriptions=this.subscriptions.filter(t=>t.id!==e)}getAllPanConditions(){return this.subscriptions.map(e=>e.getPanConditions())}setCursorClass(e){null!=this.eventCaptureNode&&this.eventCaptureNode.setCursorClass(e)}amIOnTop(e){const t=this.subscriptions.filter(e=>e.getPanConditions().draggable);return t.length>0&&(0,O.HV)(t).id===e}handleContextMenu(e,t){const{xAccessor:r,chartConfig:s,plotData:n,xScale:i}=this.state,a=V(s,e),o=I(i,r,e,n);this.triggerEvent("contextmenu",{mouseXY:e,currentItem:o,currentCharts:a},t)}calculateStateForDomain(e){const{xAccessor:t,displayXAccessor:r,xScale:s,chartConfig:n,plotData:i}=this.state,{filterData:a}=this.state,{fullData:o}=this,{postCalculator:l}=this.props,{plotData:c,domain:h}=a(o,e,t,s,{currentPlotData:i,currentDomain:s.domain()}),d=l(c),u=s.copy().domain(h),p=z(n,{plotData:d,xAccessor:t,displayXAccessor:r,fullData:o},u.domain());return{xScale:u,plotData:d,chartConfig:p}}pinchZoomHelper(e,t){const{xScale:r}=e,{xScale:s,chartConfig:n,plotData:i,xAccessor:a,displayXAccessor:o}=this.state,{filterData:l}=this.state,{fullData:c}=this,{postCalculator:h}=this.props,{topLeft:d,bottomRight:u}=he(e),{topLeft:p,bottomRight:m}=he(t),g=r.range()[1],f=Math.round(-(u[0]*p[0]-d[0]*m[0])/(d[0]-u[0])),y=Math.round(g+((g-u[0])*(g-p[0])-(g-d[0])*(g-m[0]))/(g-d[0]-(g-u[0]))),b=[Math.round(-f*d[0]/(-f+p[0])),Math.round(g-(y-g)*(g-d[0])/(y+(g-p[0])))].map(r.invert),{plotData:v,domain:k}=l(c,b,a,r,{currentPlotData:i,currentDomain:s.domain()}),x=h(v),S=s.copy().domain(k),C=t.touch1Pos;return{chartConfig:z(n,{plotData:x,xAccessor:a,displayXAccessor:o,fullData:c},S.domain()),xScale:S,plotData:x,mouseXY:C,currentItem:I(S,a,C,x)}}cancelDrag(){this.eventCaptureNode.cancelDrag(),this.triggerEvent("dragcancel")}handlePinchZoom(e,t,r){if(!this.waitingForPinchZoomAnimationFrame){this.waitingForPinchZoomAnimationFrame=!0;const s=this.pinchZoomHelper(e,t);this.triggerEvent("pinchzoom",s,r),this.finalPinch=t,requestAnimationFrame(()=>{this.clearBothCanvas(),this.draw({trigger:"pinchzoom"}),this.waitingForPinchZoomAnimationFrame=!1})}}handlePinchZoomEnd(e,t){const{xAccessor:r}=this.state;if(this.finalPinch){const s=this.pinchZoomHelper(e,this.finalPinch),{xScale:n}=s;this.triggerEvent("pinchzoom",s,t),this.finalPinch=null,this.clearThreeCanvas();const{fullData:i}=this,a=(0,O.d5)(i),o=(0,O.d5)(n.domain()),l=r(a),{onLoadMore:c}=this.props;this.setState(s,()=>{o<l&&c(o,l)})}}handleZoom(e,t,r){if(this.panInProgress)return;const{xAccessor:s,xScale:n,plotData:i}=this.state,{zoomMultiplier:a}=this.props,{fullData:o}=this,l=n((r.ctrlKey?X:B)({xScale:n,xAccessor:s,mouseXY:t,plotData:i,fullData:o})),c=e>0?1*a:1/a,h=n.range().map(e=>l+(e-l)*c).map(n.invert),{xScale:d,plotData:u,chartConfig:p}=this.calculateStateForDomain(h),m=I(d,s,t,u),g=V(p,t);this.clearThreeCanvas();const f=(0,O.d5)(o),y=(0,O.d5)(d.domain()),b=s(f),{onLoadMore:v}=this.props;this.mutableState={mouseXY:t,currentItem:m,currentCharts:g},this.triggerEvent("zoom",{xScale:d,plotData:u,chartConfig:p,mouseXY:t,currentCharts:g,currentItem:m,show:!0},r),localStorage.setItem(this.props.chartUid,JSON.stringify(d.domain())),localStorage.setItem("scale_"+this.props.chartUid,JSON.stringify({length:d.domain()[1]-d.domain()[0],end:d.domain()[1]-o.length})),this.setState({xScale:d,plotData:u,chartConfig:p},()=>{y<b&&v(y,b)})}xAxisZoom(e){const{xScale:t,plotData:r,chartConfig:s}=this.calculateStateForDomain(e);this.clearThreeCanvas();const{xAccessor:n}=this.state,{fullData:i}=this,a=(0,O.d5)(i),o=(0,O.d5)(t.domain()),l=n(a),{onLoadMore:c}=this.props;this.setState({xScale:t,plotData:r,chartConfig:s},()=>{o<l&&c(o,l)})}yAxisZoom(e,t){this.clearThreeCanvas();const{chartConfig:r}=this.state,s=r.map(r=>{if(r.id===e){const{yScale:e}=r;return{...r,yScale:e.copy().domain(t),yPanEnabled:!0}}return r});this.setState({chartConfig:s})}triggerEvent(e,t,r){this.subscriptions.forEach(s=>{const n={...this.state,fullData:this.fullData,subscriptions:this.subscriptions};s.listener(e,t,n,r)})}draw(e){this.subscriptions.forEach(t=>{(0,O.O9)(t.draw)&&t.draw(e)})}redraw(){this.clearThreeCanvas(),this.draw({force:!0})}panHelper(e,t,{dx:r,dy:s},n){const{xAccessor:i,displayXAccessor:a,chartConfig:o}=this.state,{filterData:l}=this.state,{fullData:c}=this,{postCalculator:h}=this.props;if((0,O.pN)(t.invert))throw new Error("xScale provided does not have an invert() method.You are likely using an ordinal scale. This scale does not support zoom, pan");const d=t.range().map(e=>e-r).map(t.invert),{plotData:u,domain:p}=l(c,d,i,t,{currentPlotData:this.hackyWayToStopPanBeyondBounds__plotData,currentDomain:this.hackyWayToStopPanBeyondBounds__domain}),m=t.copy().domain(p),g=h(u),f=I(m,i,e,g),y=z(o,{plotData:g,xAccessor:i,displayXAccessor:a,fullData:c},m.domain(),s,n);return{xScale:m,plotData:g,chartConfig:y,mouseXY:e,currentCharts:V(y,e),currentItem:f}}handlePan(e,t,r,s,n){if(!this.waitingForPanAnimationFrame){this.waitingForPanAnimationFrame=!0,this.hackyWayToStopPanBeyondBounds__plotData=this.hackyWayToStopPanBeyondBounds__plotData||this.state.plotData,this.hackyWayToStopPanBeyondBounds__domain=this.hackyWayToStopPanBeyondBounds__domain||this.state.xScale.domain();const i=this.panHelper(e,t,r,s);this.hackyWayToStopPanBeyondBounds__plotData=i.plotData,this.hackyWayToStopPanBeyondBounds__domain=i.xScale.domain(),this.panInProgress=!0,this.triggerEvent("pan",i,n),this.mutableState={mouseXY:i.mouseXY,currentItem:i.currentItem,currentCharts:i.currentCharts},requestAnimationFrame(()=>{this.waitingForPanAnimationFrame=!1,this.clearBothCanvas(),this.draw({trigger:"pan"})})}}handlePanEnd(e,t,r,s,n){const i=this.panHelper(e,t,r,s);this.hackyWayToStopPanBeyondBounds__plotData=null,this.hackyWayToStopPanBeyondBounds__domain=null,this.panInProgress=!1;const{fullData:a}=this,{xScale:o,plotData:l,chartConfig:c}=i;this.triggerEvent("panend",i,n),localStorage.setItem(this.props.chartUid,JSON.stringify(o.domain())),localStorage.setItem("scale_"+this.props.chartUid,JSON.stringify({length:o.domain()[1]-o.domain()[0],end:o.domain()[1]-a.length})),requestAnimationFrame(()=>{const{xAccessor:e}=this.state,{fullData:t}=this,r=(0,O.d5)(t),s=(0,O.d5)(o.domain()),n=e(r),{onLoadMore:i}=this.props;this.clearThreeCanvas(),this.setState({xScale:o,plotData:l,chartConfig:c},()=>{s<n&&i(s,n)})})}handleMouseDown(e,t,r){this.triggerEvent("mousedown",this.mutableState,r)}handleMouseEnter(e){this.triggerEvent("mouseenter",{show:!0},e)}handleMouseMove(e,t,r){if(!this.waitingForMouseMoveAnimationFrame){this.waitingForMouseMoveAnimationFrame=!0;const{chartConfig:t,plotData:s,xScale:n,xAccessor:i}=this.state,a=V(t,e),o=I(n,i,e,s);this.triggerEvent("mousemove",{show:!0,mouseXY:e,prevMouseXY:this.prevMouseXY,currentItem:o,currentCharts:a},r),this.prevMouseXY=e,this.mutableState={mouseXY:e,currentItem:o,currentCharts:a},requestAnimationFrame(()=>{this.clearMouseCanvas(),this.draw({trigger:"mousemove"}),this.waitingForMouseMoveAnimationFrame=!1})}}handleMouseLeave(e){this.triggerEvent("mouseleave",{show:!1},e),this.clearMouseCanvas(),this.draw({trigger:"mouseleave"})}handleDragStart({startPos:e},t){this.triggerEvent("dragstart",{startPos:e},t)}handleDrag({startPos:e,mouseXY:t},r){const{chartConfig:s,plotData:n,xScale:i,xAccessor:a}=this.state,o=V(s,t),l=I(i,a,t,n);this.triggerEvent("drag",{startPos:e,mouseXY:t,currentItem:l,currentCharts:o},r),this.mutableState={mouseXY:t,currentItem:l,currentCharts:o},requestAnimationFrame(()=>{this.clearMouseCanvas(),this.draw({trigger:"drag"})})}handleDragEnd({mouseXY:e},t){this.triggerEvent("dragend",{mouseXY:e},t),requestAnimationFrame(()=>{this.clearMouseCanvas(),this.draw({trigger:"dragend"})})}handleClick(e,t){this.triggerEvent("click",this.mutableState,t),requestAnimationFrame(()=>{this.clearMouseCanvas(),this.draw({trigger:"click"})})}handleDoubleClick(e,t){this.triggerEvent("dblclick",{},t)}getChildContext(){const e=ie(this.props);return{fullData:this.fullData,plotData:this.state.plotData,width:e.width,height:e.height,chartConfig:this.state.chartConfig,xScale:this.state.xScale,xAccessor:this.state.xAccessor,displayXAccessor:this.state.displayXAccessor,chartCanvasType:this.props.type,margin:this.props.margin,ratio:this.props.ratio,xAxisZoom:this.xAxisZoom,yAxisZoom:this.yAxisZoom,getCanvasContexts:this.getCanvasContexts,redraw:this.redraw,subscribe:this.subscribe,unsubscribe:this.unsubscribe,generateSubscriptionId:this.generateSubscriptionId,getMutableState:this.getMutableState,amIOnTop:this.amIOnTop,setCursorClass:this.setCursorClass}}componentWillMount(){const{fullData:e,...t}=le(this.props,!0);this.setState(t),this.fullData=e}componentWillReceiveProps(e){const t=function(e,t){return!ne.every(r=>(0,O.bN)(e[r],t[r]))}(this.props,e),r=ue(this.state.xScale,this.state.xAccessor,this.state.plotData),{chartConfig:s}=this.state;let n;if(r&&!t&&(0,O.bN)(this.props.xExtents,e.xExtents)){const[t,r]=this.state.xScale.domain(),i=(0,O.HV)(this.fullData),a=oe(e),{xAccessor:o}=a,l=o(i)<=r&&o(i)>=t;n=function(e,t,r,s,n){const{fullData:i,xScale:a,xAccessor:o,displayXAccessor:l,filterData:c}=e,h=(0,O.HV)(i),[d,u]=t.domain(),{postCalculator:p,children:m,padding:g,flipXScale:f}=r,{maintainPointsPerPixelOnResize:y}=r,b=ae(f),v=ie(r),k=ce(a,v,g,b);let x;if(!s||u>=o(h)){const[e,r]=t.range(),[s,n]=k.range(),a=y?u-(n-s)/(r-e)*(u-d):d,l=t(o(h)),p=c(i,[a,u],o,k,{fallbackStart:d,fallbackEnd:{lastItem:h,lastItemX:l}});x=p.plotData,k.domain(p.domain)}else if(s&&u<o(h)){const e=t(o(h))-t.range()[1],[r,s]=t.range().map(t=>t+e).map(t.invert),n=c(i,[r,s],o,k);x=n.plotData,k.domain(n.domain)}const S=p(x),C=z(W(v,m,n),{plotData:S,xAccessor:o,displayXAccessor:l,fullData:i},k.domain());return{xScale:k,xAccessor:o,chartConfig:C,plotData:S,fullData:i,filterData:c}}(a,this.state.xScale,e,l,s)}else n=le(e),this.mutableState={};const{fullData:i,...a}=n;this.panInProgress||(this.clearThreeCanvas(),this.setState(a)),this.fullData=i}resetYDomain(e){const{chartConfig:t}=this.state;let r=!1;const s=t.map(t=>!(0,O.pN)(e)&&t.id!==e||(0,O.bN)(t.yScale.domain(),t.realYDomain)?t:(r=!0,{...t,yScale:t.yScale.domain(t.realYDomain),yPanEnabled:!1}));r&&(this.clearThreeCanvas(),this.setState({chartConfig:s}))}shouldComponentUpdate(){return!this.panInProgress}render(){const{type:e,height:t,width:r,margin:s,className:n,zIndex:i,defaultFocus:a,ratio:o,mouseMoveEvent:l,panEvent:c,zoomEvent:h}=this.props,{useCrossHairStyleCursor:d,onSelect:u}=this.props,{plotData:p,xScale:m,xAccessor:g,chartConfig:f}=this.state,y=ie(this.props),b=ue(m,g,p),v=d&&b,k=w.createElement("style",{type:"text/css"},"\n\t.react-stockcharts-grabbing-cursor {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t.react-stockcharts-crosshair-cursor {\n\t\tpointer-events: all;\n\t\tcursor: crosshair;\n\t}\n\t.react-stockcharts-tooltip-hover {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-zoom-button {\n\t\tvisibility: hidden;\n\t\topacity: 0;\n\t\ttransition: visibility 0s, opacity 0.5s linear;\n\t}\n\t.react-stockcharts-zoom-button_container {\n\t\tpointer-events: all;\n\t}\n\t.react-stockcharts-zoom-button_container:hover .react-stockcharts-zoom-button {\n\t\tvisibility: visible;\n\t\topacity: 1;\n\t}\n\t.react-stockcharts-avoid-interaction {\n\t\tpointer-events: none;\n\t}\n\t.react-stockcharts-enable-interaction {\n\t\tpointer-events: all;\n\t}\n\t.react-stockcharts-tooltip {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-default-cursor {\n\t\tcursor: default;\n\t}\n\t.react-stockcharts-move-cursor {\n\t\tcursor: move;\n\t}\n\t.react-stockcharts-pointer-cursor {\n\t\tcursor: pointer;\n\t}\n\t.react-stockcharts-ns-resize-cursor {\n\t\tcursor: ns-resize;\n\t}\n\t.react-stockcharts-ew-resize-cursor {\n\t\tcursor: ew-resize;\n\t}");return w.createElement("div",{style:{position:"relative",width:r,height:t},className:n,onClick:u},w.createElement(J,{ref:this.saveCanvasContainerNode,type:e,ratio:o,width:r,height:t,zIndex:i}),w.createElement("svg",{className:n,width:r,height:t,style:{position:"absolute",zIndex:i+5}},k,w.createElement("defs",null,w.createElement("clipPath",{id:"chart-area-clip"},w.createElement("rect",{x:"0",y:"0",width:y.width,height:y.height})),f.map((e,t)=>w.createElement("clipPath",{key:t,id:`chart-area-clip-${e.id}`},w.createElement("rect",{x:"0",y:"0",width:e.width,height:e.height})))),w.createElement("g",{transform:`translate(${s.left+.5}, ${s.top+.5})`},w.createElement(Z,{ref:this.saveEventCaptureNode,useCrossHairStyleCursor:v,mouseMove:l&&b,zoom:h&&b,pan:c&&b,width:y.width,height:y.height,chartConfig:f,xScale:m,xAccessor:g,focus:a,disableInteraction:this.props.disableInteraction,getAllPanConditions:this.getAllPanConditions,onContextMenu:this.handleContextMenu,onClick:this.handleClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:this.handleDragEnd,onZoom:this.handleZoom,onPinchZoom:this.handlePinchZoom,onPinchZoomEnd:this.handlePinchZoomEnd,onPan:this.handlePan,onPanEnd:this.handlePanEnd}),w.createElement("g",{className:"react-stockcharts-avoid-interaction"},this.props.children))))}}function ue(e,t,r){return!isNaN(e(t((0,O.d5)(r))))&&(0,O.O9)(e.invert)}de.propTypes={width:E().number.isRequired,height:E().number.isRequired,margin:E().object,ratio:E().number.isRequired,type:E().oneOf(["svg","hybrid"]),pointsPerPxThreshold:E().number,minPointsPerPxThreshold:E().number,data:E().array.isRequired,xAccessor:E().func,xExtents:E().oneOfType([E().array,E().func]),zoomAnchor:E().func,className:E().string,seriesName:E().string.isRequired,chartUid:E().string.isRequired,zIndex:E().number,children:E().node.isRequired,xScale:E().func.isRequired,postCalculator:E().func,flipXScale:E().bool,useCrossHairStyleCursor:E().bool,padding:E().oneOfType([E().number,E().shape({left:E().number,right:E().number})]),defaultFocus:E().bool,zoomMultiplier:E().number,onLoadMore:E().func,displayXAccessor:function(e,t){if((0,O.pN)(e[t]))console.warn("`displayXAccessor` is not defined, will use the value from `xAccessor` as `displayXAccessor`. This might be ok if you do not use a discontinuous scale but if you do, provide a `displayXAccessor` prop to `ChartCanvas`");else if("function"!=typeof e[t])return new Error("displayXAccessor has to be a function")},mouseMoveEvent:E().bool,panEvent:E().bool,clamp:E().oneOfType([E().string,E().bool,E().func]),zoomEvent:E().bool,onSelect:E().func,maintainPointsPerPixelOnResize:E().bool,disableInteraction:E().bool},de.defaultProps={margin:{top:20,right:30,bottom:30,left:80},type:"hybrid",pointsPerPxThreshold:2,minPointsPerPxThreshold:.01,className:"react-stockchart",zIndex:1,xExtents:[R.jk,R.T9],postCalculator:O.D_,padding:0,xAccessor:O.D_,flipXScale:!1,useCrossHairStyleCursor:!0,defaultFocus:!0,onLoadMore:O.lQ,onSelect:O.lQ,mouseMoveEvent:!0,panEvent:!0,zoomEvent:!0,zoomMultiplier:1.1,clamp:!1,zoomAnchor:X,maintainPointsPerPixelOnResize:!0,disableInteraction:!1},de.childContextTypes={plotData:E().array,fullData:E().array,chartConfig:E().arrayOf(E().shape({id:E().oneOfType([E().number,E().string]).isRequired,origin:E().arrayOf(E().number).isRequired,padding:E().oneOfType([E().number,E().shape({top:E().number,bottom:E().number})]),yExtents:E().arrayOf(E().func),yExtentsProvider:E().func,yScale:E().func.isRequired,mouseCoordinates:E().shape({at:E().string,format:E().func}),width:E().number.isRequired,height:E().number.isRequired})).isRequired,xScale:E().func.isRequired,xAccessor:E().func.isRequired,displayXAccessor:E().func.isRequired,width:E().number.isRequired,height:E().number.isRequired,chartCanvasType:E().oneOf(["svg","hybrid"]).isRequired,margin:E().object.isRequired,ratio:E().number.isRequired,getCanvasContexts:E().func,xAxisZoom:E().func,yAxisZoom:E().func,amIOnTop:E().func,redraw:E().func,subscribe:E().func,unsubscribe:E().func,setCursorClass:E().func,generateSubscriptionId:E().func,getMutableState:E().func},de.ohlcv=e=>({date:e.date,open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume});const pe=de,me={mouseleave:"mousemove",panend:"pan",pinchzoom:"pan",mousedown:"mousemove",click:"mousemove",contextmenu:"mousemove",dblclick:"mousemove",dragstart:"drag",dragend:"drag",dragcancel:"drag"};class ge extends w.Component{constructor(e,t){super(e,t),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.getMoreProps=this.getMoreProps.bind(this),this.listener=this.listener.bind(this),this.draw=this.draw.bind(this),this.updateMoreProps=this.updateMoreProps.bind(this),this.evaluateType=this.evaluateType.bind(this),this.isHover=this.isHover.bind(this),this.preCanvasDraw=this.preCanvasDraw.bind(this),this.postCanvasDraw=this.postCanvasDraw.bind(this),this.getPanConditions=this.getPanConditions.bind(this),this.shouldTypeProceed=this.shouldTypeProceed.bind(this),this.preEvaluate=this.preEvaluate.bind(this);const{generateSubscriptionId:r}=t;this.suscriberId=r(),this.moreProps={},this.state={updateCount:0}}updateMoreProps(e){Object.keys(e).forEach(t=>{this.moreProps[t]=e[t]})}shouldTypeProceed(){return!0}preEvaluate(){}listener(e,t,r,s){(0,O.O9)(t)&&this.updateMoreProps(t),this.evaluationInProgress=!0,this.evaluateType(e,s),this.evaluationInProgress=!1}evaluateType(e,t){const r=me[e]||e;if(this.props.drawOn.indexOf(r)>-1&&(this.preEvaluate(e,this.moreProps,t),this.shouldTypeProceed(e,this.moreProps)))switch(e){case"zoom":case"mouseenter":break;case"mouseleave":{this.moreProps.hovering=!1;const e=this.getMoreProps();this.props.onUnHover&&this.props.onUnHover(e,t);break}case"contextmenu":this.props.onContextMenu&&this.props.onContextMenu(this.getMoreProps(),t),this.moreProps.hovering&&this.props.onContextMenuWhenHover&&this.props.onContextMenuWhenHover(this.getMoreProps(),t);break;case"mousedown":this.props.onMouseDown&&this.props.onMouseDown(this.getMoreProps(),t);break;case"click":{const e=this.getMoreProps();this.moreProps.hovering?this.props.onClickWhenHover(e,t):this.props.onClickOutside(e,t),this.props.onClick&&this.props.onClick(e,t);break}case"mousemove":{const e=this.moreProps.hovering;this.moreProps.hovering=this.isHover(t);const{amIOnTop:r,setCursorClass:s}=this.context;this.moreProps.hovering&&!this.props.selected&&r(this.suscriberId)&&(0,O.O9)(this.props.onHover)?(s("react-stockcharts-pointer-cursor"),this.iSetTheCursorClass=!0):this.moreProps.hovering&&this.props.selected&&r(this.suscriberId)?(s(this.props.interactiveCursorClass),this.iSetTheCursorClass=!0):e&&!this.moreProps.hovering&&this.iSetTheCursorClass&&(this.iSetTheCursorClass=!1,s(null));const n=this.getMoreProps();this.moreProps.hovering&&!e&&this.props.onHover&&this.props.onHover(n,t),e&&!this.moreProps.hovering&&this.props.onUnHover&&this.props.onUnHover(n,t),this.props.onMouseMove&&this.props.onMouseMove(n,t);break}case"dblclick":{const e=this.getMoreProps();this.props.onDoubleClick&&this.props.onDoubleClick(e,t),this.moreProps.hovering&&this.props.onDoubleClickWhenHover&&this.props.onDoubleClickWhenHover(e,t);break}case"pan":this.moreProps.hovering=!1,this.props.onPan&&this.props.onPan(this.getMoreProps(),t);break;case"panend":this.props.onPanEnd&&this.props.onPanEnd(this.getMoreProps(),t);break;case"dragstart":if(this.getPanConditions().draggable){const{amIOnTop:e}=this.context;e(this.suscriberId)&&(this.dragInProgress=!0,this.props.onDragStart(this.getMoreProps(),t))}this.someDragInProgress=!0;break;case"drag":this.dragInProgress&&this.props.onDrag&&this.props.onDrag(this.getMoreProps(),t);break;case"dragend":this.dragInProgress&&this.props.onDragComplete&&this.props.onDragComplete(this.getMoreProps(),t),this.dragInProgress=!1,this.someDragInProgress=!1;break;case"dragcancel":if(this.dragInProgress||this.iSetTheCursorClass){const{setCursorClass:e}=this.context;e(null)}}}isHover(e){return!!(0,O.O9)(this.props.isHover)&&this.props.isHover(this.getMoreProps(),e)}getPanConditions(){return{draggable:!(!this.props.selected||!this.moreProps.hovering)||this.props.enableDragOnHover&&this.moreProps.hovering,panEnabled:!this.props.disablePan}}draw({trigger:e,force:t}={force:!1}){const r=me[e]||e;if(this.props.drawOn.indexOf(r)>-1||this.props.selected||t){const{chartCanvasType:e}=this.context,{canvasDraw:t}=this.props;if((0,O.pN)(t)||"svg"===e){const{updateCount:e}=this.state;this.setState({updateCount:e+1})}else this.drawOnCanvas()}}componentWillMount(){const{subscribe:e,chartId:t}=this.context,{clip:r,edgeClip:s}=this.props;e(this.suscriberId,{chartId:t,clip:r,edgeClip:s,listener:this.listener,draw:this.draw,getPanConditions:this.getPanConditions}),this.componentWillReceiveProps(this.props,this.context)}componentWillUnmount(){const{unsubscribe:e}=this.context;if(e(this.suscriberId),this.iSetTheCursorClass){const{setCursorClass:e}=this.context;e(null)}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(e){const{chartCanvasType:t}=this.context,{canvasDraw:r,selected:s,interactiveCursorClass:n}=this.props;if(e.selected!==s){const{setCursorClass:e}=this.context;s&&this.moreProps.hovering?(this.iSetTheCursorClass=!0,e(n)):(this.iSetTheCursorClass=!1,e(null))}(0,O.O9)(r)&&!this.evaluationInProgress&&"svg"!==t&&(this.updateMoreProps(this.moreProps),this.drawOnCanvas())}componentWillReceiveProps(e,t){const{xScale:r,plotData:s,chartConfig:n,getMutableState:i}=t;this.props.debug(t),this.moreProps={...this.moreProps,...i(),xScale:r,plotData:s,chartConfig:n}}getMoreProps(){const{xScale:e,plotData:t,chartConfig:r,morePropsDecorator:s,xAccessor:n,displayXAccessor:i,width:a,height:o}=this.context,{chartId:l,fullData:c}=this.context,h={xScale:e,plotData:t,chartConfig:r,xAccessor:n,displayXAccessor:i,width:a,height:o,chartId:l,fullData:c,...this.moreProps};return(s||O.D_)(h)}preCanvasDraw(){}postCanvasDraw(){}drawOnCanvas(){const{canvasDraw:e,canvasToDraw:t}=this.props,{getCanvasContexts:r}=this.context,s=this.getMoreProps(),n=t(r());this.preCanvasDraw(n,s),e(n,s),this.postCanvasDraw(n,s)}render(){const{chartCanvasType:e,chartId:t}=this.context,{canvasDraw:r,clip:s,svgDraw:n}=this.props;if((0,O.O9)(r)&&"svg"!==e)return null;const i=(0,O.O9)(t)?"-"+t:"",a=s?{clipPath:`url(#chart-area-clip${i})`}:null;return w.createElement("g",{style:a},n(this.getMoreProps()))}}ge.propTypes={svgDraw:E().func.isRequired,canvasDraw:E().func,drawOn:E().array.isRequired,clip:E().bool.isRequired,edgeClip:E().bool.isRequired,interactiveCursorClass:E().string,selected:E().bool.isRequired,enableDragOnHover:E().bool.isRequired,disablePan:E().bool.isRequired,canvasToDraw:E().func.isRequired,isHover:E().func,onClick:E().func,onClickWhenHover:E().func,onClickOutside:E().func,onPan:E().func,onPanEnd:E().func,onDragStart:E().func,onDrag:E().func,onDragComplete:E().func,onDoubleClick:E().func,onDoubleClickWhenHover:E().func,onContextMenu:E().func,onContextMenuWhenHover:E().func,onMouseMove:E().func,onMouseDown:E().func,onHover:E().func,onUnHover:E().func,debug:E().func},ge.defaultProps={svgDraw:(0,O.ER)(null),draw:[],canvasToDraw:e=>e.mouseCoord,clip:!0,edgeClip:!1,selected:!1,disablePan:!1,enableDragOnHover:!1,onClickWhenHover:O.lQ,onClickOutside:O.lQ,onDragStart:O.lQ,onMouseMove:O.lQ,onMouseDown:O.lQ,debug:O.lQ},ge.contextTypes={width:E().number.isRequired,height:E().number.isRequired,margin:E().object.isRequired,chartId:E().oneOfType([E().number,E().string]),getCanvasContexts:E().func,chartCanvasType:E().string,xScale:E().func.isRequired,xAccessor:E().func.isRequired,displayXAccessor:E().func.isRequired,plotData:E().array.isRequired,fullData:E().array.isRequired,chartConfig:E().oneOfType([E().array,E().object]).isRequired,morePropsDecorator:E().func,generateSubscriptionId:E().func,getMutableState:E().func.isRequired,amIOnTop:E().func.isRequired,subscribe:E().func.isRequired,unsubscribe:E().func.isRequired,setCursorClass:E().func.isRequired};const fe=ge;function ye(e){return e.axes}function be(e){if(void 0!==e)return e.mouseCoord}const ve=["drag","dragend"];class ke extends fe{constructor(e,t){super(e,t),this.preCanvasDraw=this.preCanvasDraw.bind(this),this.postCanvasDraw=this.postCanvasDraw.bind(this),this.shouldTypeProceed=this.shouldTypeProceed.bind(this),this.preEvaluate=this.preEvaluate.bind(this)}preCanvasDraw(e,t){if(super.preCanvasDraw(e,t),void 0===e)return;e.save();const{margin:r,ratio:s}=this.context,{chartConfig:n}=t,i=.5*s+n.origin[0]+r.left,a=.5*s+n.origin[1]+r.top,{chartConfig:{width:o,height:l}}=t,{clip:c,edgeClip:h}=this.props;e.setTransform(1,0,0,1,0,0),e.scale(s,s),h&&(e.beginPath(),e.rect(-1,a-10,o+r.left+r.right+1,l+20),e.clip()),e.translate(i,a),c&&(e.beginPath(),e.rect(-1,-1,o+1,l+1),e.clip())}postCanvasDraw(e,t){super.postCanvasDraw(e,t),e.restore()}updateMoreProps(e){super.updateMoreProps(e);const{chartConfig:t}=e;if(t&&Array.isArray(t)){const{chartId:e}=this.context,r=(0,O.I6)(t,t=>t.id===e);this.moreProps.chartConfig=r}if((0,O.O9)(this.moreProps.chartConfig)){const{origin:[t,r]}=this.moreProps.chartConfig;if((0,O.O9)(e.mouseXY)){const{mouseXY:[s,n]}=e;this.moreProps.mouseXY=[s-t,n-r]}if((0,O.O9)(e.startPos)){const{startPos:[s,n]}=e;this.moreProps.startPos=[s-t,n-r]}}}preEvaluate(){}shouldTypeProceed(e,t){return!("mousemove"!==e&&"click"!==e||!this.props.disablePan)||-1!==ve.indexOf(e)||!(0,O.O9)(t)||!(0,O.O9)(t.currentCharts)||t.currentCharts.indexOf(this.context.chartId)>-1}}ke.propTypes=fe.propTypes,ke.defaultProps=fe.defaultProps,ke.contextTypes={...fe.contextTypes,canvasOriginX:E().number,canvasOriginY:E().number,chartId:E().oneOfType([E().number,E().string]).isRequired,chartConfig:E().object.isRequired,ratio:E().number.isRequired};const xe=ke;class Se extends q.A{componentDidMount(){if("svg"!==this.context.chartCanvasType&&(0,O.O9)(this.context.getCanvasContexts)){const e=this.context.getCanvasContexts();e&&Se.drawOnCanvas(e.bg,this.props,this.context,this.props.children)}}componentDidUpdate(){this.componentDidMount()}render(){const{chartCanvasType:e}=this.context;if("svg"!==e)return null;const{x:t,y:r,fill:s,opacity:n,stroke:i,strokeOpacity:a,fontFamily:o,fontSize:l,textAnchor:c}=this.props,h={x:t,y:r,fill:s,opacity:n,stroke:i,strokeOpacity:a,fontFamily:o,fontSize:l,textAnchor:c};return w.createElement("text",h,"this.props.children(interval)")}}Se.drawOnCanvas=(e,t,{interval:r},s)=>{e.clearRect(-1,-1,e.canvas.width+2,e.canvas.height+2),e.save(),e.setTransform(1,0,0,1,0,0),e.translate(.5,.5);const{x:n,y:i,fill:a,opacity:o,stroke:l,strokeOpacity:c,fontFamily:h,fontSize:d,textAnchor:u}=t,p=s(r);e.strokeStyle=(0,O.zX)(l,c),e.font=`${d}px ${h}`,e.fillStyle=(0,O.zX)(a,o),e.textAlign="middle"===u?"center":u,"none"!==l&&e.strokeText(p,n,i),e.fillText(p,n,i),e.restore()},Se.propTypes={x:E().number.isRequired,y:E().number.isRequired,fontFamily:E().string,fontSize:E().number.isRequired,fill:E().string,stroke:E().string,opacity:E().number,strokeOpacity:E().number,textAnchor:E().string,children:E().func},Se.defaultProps={opacity:.3,fill:"#9E7523",stroke:"#9E7523",strokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,textAnchor:"middle"},Se.contextTypes={interval:E().string.isRequired,getCanvasContexts:E().func,chartCanvasType:E().string};var Ce=r(81804),we=r(34644);class De extends w.Component{constructor(e){super(e),this.handleZoomOut=this.handleZoomOut.bind(this),this.handleZoomIn=this.handleZoomIn.bind(this),this.zoom=this.zoom.bind(this)}zoom(e){const{xAxisZoom:t,xScale:r,plotData:s,xAccessor:n}=this.context,i=r(n((0,O.HV)(s))),{zoomMultiplier:a}=this.props,o=e>0?1*a:1/a,[l,c]=r.domain(),[h,d]=r.range().map(e=>i+(e-i)*o).map(r.invert),u=(0,we.A)(l,h),p=(0,we.A)(c,d),m=[.25,.3,.5,.6,.75,1].map(e=>[u(e),p(e)]);this.interval=setInterval(()=>{t(m.shift()),0===m.length&&(clearInterval(this.interval),delete this.interval)},10)}handleZoomOut(){this.interval||this.zoom(1)}handleZoomIn(){this.interval||this.zoom(-1)}render(){const{chartConfig:e,xScale:t}=this.context,{width:r,height:s}=e,{size:n,heightFromBase:i,rx:a,ry:o}=this.props,{stroke:l,strokeOpacity:c,fill:h,strokeWidth:d,fillOpacity:u}=this.props,{textFill:p,textStrokeWidth:m}=this.props,{onReset:g,onFirst:f,dataLength:y}=this.props,b=t.domain()[1]<y-1,v=Math.round(r/2),k=s-i,[x,S]=n,C=Math.round(k+S/2),D=v,E=(0,Ce.A)(),R=v-x-2*d;E.moveTo(R-6,C),E.lineTo(R+6,C),E.closePath();const O=(0,Ce.A)(),T=v+x+2*d;O.moveTo(T-6,C),O.lineTo(T+6,C),O.moveTo(T,C-5),O.lineTo(T,C+5);const F=v+2.075*x+2*d;return w.createElement("g",{className:"react-stockcharts-zoom-button_container"},w.createElement("rect",{className:"react-stockcharts-zoom-fade-in",x:R-7*x/4,y:k,rx:a,ry:o,height:S,width:7*x,fill:"none"}),w.createElement("g",{className:"react-stockcharts-zoom-button"},w.createElement("rect",{x:R-x/2,y:k,rx:a,ry:o,height:S,width:x,fill:h,fillOpacity:u,stroke:l,strokeOpacity:c,strokeWidth:d}),w.createElement("path",{d:E.toString(),stroke:p,strokeWidth:m}),w.createElement("rect",{x:D-x/2,y:k,rx:a,ry:o,height:S,width:x,fill:h,fillOpacity:u,stroke:l,strokeOpacity:c,strokeWidth:d}),w.createElement("g",{transform:`translate (${D}, ${k+S/4}) scale(.14)`},w.createElement("path",{d:"M31 13C23.4 5.3 12.8.5 1.1.5c-23.3 0-42.3 19-42.3 42.5s18.9 42.5 42.3 42.5c13.8 0 26-6.6 33.7-16.9l-16.5-1.8C13.5 70.4 7.5 72.5 1 72.5c-16.2 0-29.3-13.2-29.3-29.4S-15.2 13.7 1 13.7c8.1 0 15.4 3.3 20.7 8.6l-10.9 11h32.5V.5L31 13z",fill:p})),w.createElement("rect",{x:T-x/2,y:k,rx:a,ry:o,height:S,width:x,fill:h,fillOpacity:u,stroke:l,strokeOpacity:c,strokeWidth:d}),w.createElement("path",{d:O.toString(),stroke:p,strokeWidth:m}),b&&w.createElement(w.Fragment,null,w.createElement("rect",{x:F-x/2,y:k,rx:a,ry:o,height:S,width:x,fill:h,fillOpacity:u,stroke:l,strokeOpacity:c,strokeWidth:d}),w.createElement("g",{transform:`translate (${D+2*x}, ${k+S/4}) scale(.45)`},w.createElement("path",{d:"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z",fill:p}))),w.createElement("rect",{className:"react-stockcharts-enable-interaction out",onClick:this.handleZoomOut,x:R-x/2,y:k,rx:a,ry:o,height:S,width:x,fill:"none"}),w.createElement("rect",{className:"react-stockcharts-enable-interaction reset",onClick:g,x:D-x/2,y:k,rx:a,ry:o,height:S,width:x,fill:"none"}),w.createElement("rect",{className:"react-stockcharts-enable-interaction in",onClick:this.handleZoomIn,x:T-x/2,y:k,rx:a,ry:o,height:S,width:x,fill:"none"}),b&&w.createElement("rect",{className:"react-stockcharts-enable-interaction first",onClick:f,x:F-x/2,y:k,rx:a,ry:o,height:S,width:x,fill:"none"})))}}De.propTypes={zoomMultiplier:E().number.isRequired,size:E().array.isRequired,heightFromBase:E().number.isRequired,rx:E().number.isRequired,ry:E().number.isRequired,stroke:E().string.isRequired,strokeWidth:E().number.isRequired,strokeOpacity:E().number.isRequired,fill:E().string.isRequired,fillOpacity:E().number.isRequired,fontSize:E().number.isRequired,textDy:E().string.isRequired,textFill:E().string.isRequired,textStrokeWidth:E().number.isRequired,onReset:E().func},De.defaultProps={size:[30,24],heightFromBase:50,rx:3,ry:3,stroke:"#000000",strokeOpacity:.3,strokeWidth:1,fill:"#D6D6D6",fillOpacity:.4,fontSize:16,textDy:".3em",textFill:"#000000",textStrokeWidth:2,zoomMultiplier:1.5,onReset:O.lQ},De.contextTypes={xScale:E().func.isRequired,chartConfig:E().object.isRequired,plotData:E().array.isRequired,xAccessor:E().func.isRequired,xAxisZoom:E().func.isRequired};const Ee=De;class Re extends w.Component{constructor(e){super(e),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){!function(e,t,r){const{opacity:s,candleStrokeWidth:n,yAccessor:i}=t,{xScale:a,chartConfig:{yScale:o,realYDomain:l},plotData:c,xAccessor:h,height:d}=r,u=function(e,t,r,s,n,i,a){const{classNames:o,yAccessor:l}=e,c=((0,O.ER)(o),parseFloat(s.invert(a).toFixed(2))),h=a/(100*(parseFloat(s.invert(0).toFixed(2))-c)),d=[];for(let e=0;e<n.length;e++){const i=n[e];if((0,O.O9)(i.heatCells)){const e=Math.round(r(t(i)));i.heatCells.map(t=>{(t.hit>i.high||t.hit<i.low)&&d.push({...t,x:e,height:h,yPos:s(t.hit)})})}}return d}(t,h,a,o,c,0,d,function(e){const{yScale:t,flipYScale:r,height:s}=e.chartConfig;if(t.invert){const e=r?[0,s]:[s,0],n=e.map(t.invert);t.copy().domain(n).range(e)}}(r)),p=a(h(c[c.length-1]))-a(h(c[0])),m=Math.max(1,Math.round(p/(c.length-1)));u.map(t=>{e.fillStyle=t.fill,e.fillRect(t.x-m/2,t.yPos,m,t.height)})}(e,this.props,t)}render(){const{clip:e}=this.props;return w.createElement(xe,{clip:e,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}}Re.propTypes={className:E().string,classNames:E().oneOfType([E().func,E().string]),width:E().oneOfType([E().number,E().func]),yAccessor:E().func},Re.defaultProps={className:"react-stockcharts-heatmap",yAccessor:e=>({open:e.open,high:e.high,low:e.low,close:e.close}),classNames:e=>e.close>e.open?"up":"down",width:O.hc};const Oe=Re;var Te=r(42285);function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Fe.apply(null,arguments)}class Pe extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}isHover(e){const{highlightOnHover:t,yAccessor:r,hoverTolerance:s}=this.props;if(!t)return!1;const{mouseXY:n,currentItem:i,xScale:a,plotData:o}=e,{chartConfig:{yScale:l,origin:c}}=e,{xAccessor:h}=e,[d,u]=n,p=s,{left:m,right:g}=(0,O.fK)(o,a.invert(d),h);if(m===g){const e=l(r(i))+c[1],t=a(h(i))+c[0];return Math.pow(d-t,2)+Math.pow(u-e,2)<Math.pow(p,2)}{const e=o[m],t=o[g],s=a(h(e))+c[0],n=l(r(e))+c[1],i=a(h(t))+c[0],f=(l(r(t))+c[1]-n)/(i-s),y=-1*f*s+n,b=Math.round(f*d+y);return u>=b-p&&u<=b+p}}drawOnCanvas(e,t){const{yAccessor:r,stroke:s,strokeOpacity:n,strokeWidth:i,hoverStrokeWidth:a,defined:o,strokeDasharray:l,interpolation:c,canvasClip:h}=this.props,{connectNulls:d}=this.props,{xAccessor:u}=t,{xScale:p,chartConfig:{yScale:m},plotData:g,hovering:f}=t;h&&(e.save(),h(e,t)),e.lineWidth=f?a:i,e.strokeStyle=(0,O.zX)(s,n),e.setLineDash((0,O.KA)(l).split(","));const y=(0,Te.A)().x(e=>Math.round(p(u(e)))).y(e=>Math.round(m(r(e))));(0,O.O9)(c)&&y.curve(c),d||y.defined(e=>o(r(e))),e.beginPath(),y.context(e)(g),e.stroke(),h&&e.restore()}renderSVG(e){const{yAccessor:t,stroke:r,strokeOpacity:s,strokeWidth:n,hoverStrokeWidth:i,defined:a,strokeDasharray:o}=this.props,{connectNulls:l}=this.props,{interpolation:c,style:h}=this.props,{xAccessor:d,chartConfig:u}=e,{xScale:p,plotData:m,hovering:g}=e,{yScale:f}=u,y=(0,Te.A)().x(e=>Math.round(p(d(e)))).y(e=>Math.round(f(t(e))));(0,O.O9)(c)&&y.curve(c),l||y.defined(e=>a(t(e)));const b=y(m),{fill:v,className:k}=this.props;return w.createElement("path",{style:h,className:`${k} ${r?"":" line-stroke"}`,d:b,stroke:r,strokeOpacity:s,strokeWidth:g?i:n,strokeDasharray:(0,O.KA)(o),fill:v})}render(){const{highlightOnHover:e,onHover:t,onUnHover:r}=this.props,s=e||t||r?{isHover:this.isHover,drawOn:["mousemove","pan"],canvasToDraw:be}:{drawOn:["pan"],canvasToDraw:ye};return w.createElement(xe,Fe({svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,onClickWhenHover:this.props.onClick,onDoubleClickWhenHover:this.props.onDoubleClick,onContextMenuWhenHover:this.props.onContextMenu,onHover:this.props.onHover,onUnHover:this.props.onUnHover},s))}}Pe.propTypes={className:E().string,strokeWidth:E().number,strokeOpacity:E().number,stroke:E().string,hoverStrokeWidth:E().number,fill:E().string,defined:E().func,hoverTolerance:E().number,strokeDasharray:E().oneOf(O.uF),highlightOnHover:E().bool,onClick:E().func,onDoubleClick:E().func,onHover:E().func,onUnHover:E().func,onContextMenu:E().func,yAccessor:E().func,connectNulls:E().bool,interpolation:E().func,canvasClip:E().func,style:E().object},Pe.defaultProps={className:"line ",strokeWidth:1,strokeOpacity:1,hoverStrokeWidth:4,fill:"none",stroke:"#4682B4",strokeDasharray:"Solid",defined:e=>!isNaN(e),hoverTolerance:6,highlightOnHover:!1,connectNulls:!1,onClick:function(e){console.log("Click",e)},onDoubleClick:function(e){console.log("Double Click",e)},onContextMenu:function(e){console.log("Right Click",e)}};const qe=Pe;var Ae=r(47010);class Ne extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{yAccessor:r,defined:s,base:n,canvasGradient:i}=this.props,{fill:a,stroke:o,opacity:l,interpolation:c,canvasClip:h,upperArea:d}=this.props,{xScale:u,chartConfig:{yScale:p},plotData:m,xAccessor:g}=t;h&&(e.save(),h(e,t)),e.fillStyle=null!=i?i(t,e):(0,O.zX)(a,l),e.strokeStyle=o,e.beginPath();const f=(0,O.ER)(n),y=(0,Ae.A)().defined(e=>s(r(e))).x(e=>Math.round(u(g(e)))).y0(e=>d?0:f(p,e,t)).y1(e=>Math.round(p(r(e)))).context(e);(0,O.O9)(c)&&y.curve(c),y(m),e.fill(),h&&e.restore()}renderSVG(e){const{yAccessor:t,defined:r,base:s,style:n}=this.props,{stroke:i,fill:a,className:o,opacity:l,interpolation:c}=this.props,{xScale:h,chartConfig:{yScale:d},plotData:u,xAccessor:p}=e,m=(0,O.ER)(s),g=(0,Ae.A)().defined(e=>r(t(e))).x(e=>Math.round(h(p(e)))).y0(t=>m(d,t,e)).y1(e=>Math.round(d(t(e))));(0,O.O9)(c)&&g.curve(c);const f=g(u),y=o.concat((0,O.O9)(i)?"":" line-stroke");return w.createElement("path",{style:n,d:f,stroke:i,fill:(0,O.zX)(a,l),className:y})}render(){return w.createElement(xe,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}}Ne.propTypes={className:E().string,yAccessor:E().func.isRequired,stroke:E().string,fill:E().string,opacity:E().number,defined:E().func,base:E().oneOfType([E().func,E().number]),interpolation:E().func,canvasClip:E().func,style:E().object,canvasGradient:E().func,upperArea:E().bool},Ne.defaultProps={className:"line ",fill:"none",opacity:1,upperArea:!1,defined:e=>!isNaN(e),base:e=>(0,O.$1)(e.range())};const Me=Ne;function We(e){const{yAccessor:t,baseAt:r}=e,{className:s,opacity:n,stroke:i,strokeWidth:a,strokeOpacity:o,strokeDasharray:l,canvasGradient:c,fill:h,interpolation:d,style:u,canvasClip:p,upperArea:m}=e;return w.createElement("g",{className:s},w.createElement(Me,{yAccessor:t,interpolation:d,base:r,canvasGradient:c,fill:h,opacity:n,style:u,canvasClip:p,stroke:"none",upperArea:m}),w.createElement(qe,{yAccessor:t,stroke:i,strokeWidth:a,strokeOpacity:o,strokeDasharray:l,interpolation:d,style:u,canvasClip:p,fill:"none",hoverHighlight:!1}))}We.propTypes={stroke:E().string,strokeWidth:E().number,canvasGradient:E().func,fill:E().string.isRequired,strokeOpacity:E().number.isRequired,opacity:E().number.isRequired,className:E().string,yAccessor:E().func.isRequired,baseAt:E().func,interpolation:E().func,canvasClip:E().func,style:E().object,strokeDasharray:E().oneOf(O.uF),upperArea:E().bool},We.defaultProps={stroke:"#4682B4",strokeWidth:1,strokeOpacity:1,strokeDasharray:"Solid",opacity:.5,fill:"#4682B4",className:"react-stockcharts-area",upperArea:!1};const Ve=We;class He extends w.Component{render(){const{children:e}=this.props;return w.createElement(xe,{drawOn:[],svgDraw:e})}}He.propTypes={children:E().func.isRequired};const ze=He;class Ie extends w.Component{constructor(e){super(e),this.renderClip=this.renderClip.bind(this),this.topClip=this.topClip.bind(this),this.bottomClip=this.bottomClip.bind(this),this.baseAt=this.baseAt.bind(this);const t=String(Math.round(1e4*Math.random()*1e4));this.clipPathId1=`alternating-area-clip-${t}`;const r=String(Math.round(1e4*Math.random()*1e4));this.clipPathId2=`alternating-area-clip-${r}`}topClip(e,t){const{chartConfig:r}=t,{baseAt:s}=this.props,{yScale:n,width:i}=r;e.beginPath(),e.rect(0,0,i,n(s)),e.clip()}bottomClip(e,t){const{chartConfig:r}=t,{baseAt:s}=this.props,{yScale:n,width:i,height:a}=r;e.beginPath(),e.rect(0,n(s),i,a-n(s)),e.clip()}renderClip(e){const{chartConfig:t}=e,{baseAt:r}=this.props,{yScale:s,width:n,height:i}=t;return w.createElement("defs",null,w.createElement("clipPath",{id:this.clipPathId1},w.createElement("rect",{x:0,y:0,width:n,height:s(r)})),w.createElement("clipPath",{id:this.clipPathId2},w.createElement("rect",{x:0,y:s(r),width:n,height:i-s(r)})))}baseAt(e){return e(this.props.baseAt)}render(){const{className:e,yAccessor:t,interpolation:r}=this.props,{stroke:s,strokeWidth:n,strokeOpacity:i,strokeDasharray:a,fill:o,fillOpacity:l}=this.props,c={clipPath:`url(#${this.clipPathId1})`},h={clipPath:`url(#${this.clipPathId2})`};return w.createElement("g",{className:e},w.createElement(ze,null,this.renderClip),w.createElement(Ve,{style:c,canvasClip:this.topClip,yAccessor:t,interpolation:r,baseAt:this.baseAt,fill:o.top,opacity:l.top,stroke:s.top,strokeOpacity:i.top,strokeDasharray:a.top,strokeWidth:n.top}),w.createElement(Ve,{style:h,canvasClip:this.bottomClip,yAccessor:t,interpolation:r,baseAt:this.baseAt,fill:o.bottom,opacity:l.bottom,stroke:s.bottom,strokeOpacity:i.bottom,strokeDasharray:a.bottom,strokeWidth:n.bottom}))}}function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Le.apply(null,arguments)}Ie.propTypes={stroke:E().shape({top:E().string,bottom:E().string}),strokeWidth:E().shape({top:E().number,bottom:E().number}),strokeOpacity:E().shape({top:E().number,bottom:E().number}),fill:E().shape({top:E().string,bottom:E().string}),fillOpacity:E().shape({top:E().number,bottom:E().number}),strokeDasharray:E().shape({top:E().oneOf(O.uF),bottom:E().oneOf(O.uF)}).isRequired,className:E().string,yAccessor:E().func.isRequired,baseAt:E().number.isRequired,interpolation:E().func},Ie.defaultProps={stroke:{top:"#38C172",bottom:"#E3342F"},strokeWidth:{top:2,bottom:2},strokeOpacity:{top:1,bottom:1},fill:{top:"#A2F5BF",bottom:"#EF5753"},fillOpacity:{top:.5,bottom:.5},strokeDasharray:{top:"Solid",bottom:"Solid"},className:"react-stockcharts-alternating-area"};class Xe extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{xAccessor:r}=t,s=Be(this.props,t,r);!function(e,t,r){const{markerProps:s}=t;(0,T.$I)().key(e=>e.fill).key(e=>e.stroke).entries(r).forEach(t=>{const{key:r,values:n}=t;"none"!==r&&(e.fillStyle=r),n.forEach(t=>{const{values:n}=t;n.forEach(t=>{const{marker:n}=t;n.drawOnCanvas({...n.defaultProps,...s,fill:r},t,e)})})})}(e,this.props,s)}renderSVG(e){const{className:t,markerProps:r}=this.props,{xAccessor:s}=e,n=Be(this.props,e,s);return w.createElement("g",{className:t},n.map((e,t)=>{const{marker:s}=e;return w.createElement(s,Le({key:t},r,{point:e}))}))}render(){return w.createElement(xe,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}}function Be(e,t,r){const{yAccessor:s,markerProvider:n,markerProps:i}=e;let{marker:a}=e;const{xScale:o,chartConfig:{yScale:l},plotData:c}=t;if(!n&&!a)throw new Error("required prop, either marker or markerProvider missing");return c.map(e=>{n&&(a=n(e));const t={...a.defaultProps,...i},c=(0,O.ER)(t.fill),h=(0,O.ER)(t.stroke);return{x:o(r(e)),y:l(s(e)),fill:(0,O.zX)(c(e),t.opacity),stroke:h(e),datum:e,marker:a}})}function Ye(e){const{className:t,stroke:r,strokeWidth:s,opacity:n,fill:i,point:a,r:o}=e,l=(0,O.ER)(o)(a.datum);return w.createElement("circle",{className:t,cx:a.x,cy:a.y,stroke:r,strokeWidth:s,fillOpacity:n,fill:i,r:l})}function Ge(e){const{className:t,strokeWidth:r,opacity:s,point:n,width:i}=e,a=je(e,n);if(null==a)return null;const o=function(e){const{fill:t,point:r}=e;return t instanceof Function?t(r.datum):t}(e),l=function(e){const{stroke:t,point:r}=e;return t instanceof Function?t(r.datum):t}(e),c=(0,O.ER)(i)(n.datum),{x:h,y:d}=n,{innerOpposite:u,innerHypotenuse:p}=$e(c),m=`\n\t\t${h} ${d-p},\n\t\t${h+c/2} ${d+u},\n\t\t${h-c/2} ${d+u}\n\t`;return w.createElement("polygon",{className:t,points:m,stroke:l,strokeWidth:r,fillOpacity:s,fill:o,transform:0!==a?`rotate(${a}, ${h}, ${d})`:null})}function $e(e){const t=e/2*(1/Math.cos(30*Math.PI/180));return{innerOpposite:e/2*(1/Math.tan(60*Math.PI/180)),innerHypotenuse:t}}function je(e,t){const{direction:r}=e,s=r instanceof Function?r(t.datum):r;if("hide"===s)return null;let n=0;switch(s){case"bottom":n=180;break;case"left":n=-90;break;case"right":n=90}return n}function Ue(e){const{className:t,stroke:r,strokeWidth:s,opacity:n,fill:i,point:a,width:o}=e,l=(0,O.ER)(o)(a.datum),c=a.x-l/2,h=a.y-l/2;return w.createElement("rect",{className:t,x:c,y:h,stroke:r,strokeWidth:s,fillOpacity:n,fill:i,width:l,height:l})}Xe.propTypes={className:E().string,yAccessor:E().func.isRequired,marker:E().func,markerProvider:E().func,markerProps:E().object},Xe.defaultProps={className:"react-stockcharts-scatter"},Ye.propTypes={stroke:E().string,fill:E().string.isRequired,opacity:E().number.isRequired,point:E().shape({x:E().number.isRequired,y:E().number.isRequired,datum:E().object.isRequired}).isRequired,className:E().string,strokeWidth:E().number,r:E().oneOfType([E().number,E().func]).isRequired},Ye.defaultProps={stroke:"#4682B4",strokeWidth:1,opacity:.5,fill:"#4682B4",className:"react-stockcharts-marker-circle"},Ye.drawOnCanvas=(e,t,r)=>{const{stroke:s,fill:n,opacity:i,strokeWidth:a}=e;r.strokeStyle=s,r.lineWidth=a,"none"!==n&&(r.fillStyle=(0,O.zX)(n,i)),Ye.drawOnCanvasWithNoStateChange(e,t,r)},Ye.drawOnCanvasWithNoStateChange=(e,t,r)=>{const{r:s}=e,n=(0,O.ER)(s)(t.datum);r.moveTo(t.x,t.y),r.beginPath(),r.arc(t.x,t.y,n,0,2*Math.PI,!1),r.stroke(),r.fill()},Ge.propTypes={direction:E().oneOfType([E().oneOf(["top","bottom","left","right","hide"]),E().func]).isRequired,stroke:E().oneOfType([E().string,E().func]).isRequired,fill:E().oneOfType([E().string,E().func]).isRequired,opacity:E().number.isRequired,point:E().shape({x:E().number.isRequired,y:E().number.isRequired,datum:E().object.isRequired}).isRequired,className:E().string,strokeWidth:E().number,width:E().oneOfType([E().number,E().func]).isRequired},Ge.defaultProps={direction:"top",stroke:"#4682B4",strokeWidth:1,opacity:.5,fill:"#4682B4",className:"react-stockcharts-marker-triangle"},Ge.drawOnCanvas=(e,t,r)=>{const{stroke:s,fill:n,opacity:i,strokeWidth:a}=e;r.strokeStyle=s,r.lineWidth=a,"none"!==n&&(r.fillStyle=(0,O.zX)(n,i)),Ge.drawOnCanvasWithNoStateChange(e,t,r)},Ge.drawOnCanvasWithNoStateChange=(e,t,r)=>{const{width:s}=e,n=(0,O.ER)(s)(t.datum),{x:i,y:a}=t,{innerOpposite:o,innerHypotenuse:l}=$e(n),c=je(e,t);r.beginPath(),r.moveTo(i,a-l),r.lineTo(i+n/2,a+o),r.lineTo(i-n/2,a+o),r.stroke(),null!==c&&0!==c&&(r.save(),r.translate(i,a),r.rotate(c*Math.PI/180),r.fill(),r.restore()),r.fill()},Ue.propTypes={stroke:E().string,fill:E().string.isRequired,opacity:E().number.isRequired,point:E().shape({x:E().number.isRequired,y:E().number.isRequired,datum:E().object.isRequired}).isRequired,className:E().string,strokeWidth:E().number,width:E().oneOfType([E().number,E().func]).isRequired},Ue.defaultProps={stroke:"#4682B4",strokeWidth:1,opacity:.5,fill:"#4682B4",className:"react-stockcharts-marker-rect"},Ue.drawOnCanvas=(e,t,r)=>{const{stroke:s,fill:n,opacity:i,strokeWidth:a}=e;r.strokeStyle=s,r.lineWidth=a,"none"!==n&&(r.fillStyle=(0,O.zX)(n,i)),Ue.drawOnCanvasWithNoStateChange(e,t,r)},Ue.drawOnCanvasWithNoStateChange=(e,t,r)=>{const{width:s}=e,n=(0,O.ER)(s)(t.datum),i=t.x-n/2,a=t.y-n/2;r.beginPath(),r.rect(i,a,n,n),r.stroke(),r.fill()};class Qe extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){!function(e,t,r){const{opacity:s,candleStrokeWidth:n}=t,{xScale:i,chartConfig:{yScale:a},plotData:o,xAccessor:l}=r,c=Ze(t,l,i,a,o);(0,T.$I)().key(e=>e.wick.stroke).entries(c).forEach(t=>{const{key:r,values:s}=t;e.strokeStyle=r,e.fillStyle=r,s.forEach(t=>{const r=t.wick;e.fillRect(r.x-.5,r.y1,1,r.y2-r.y1),e.fillRect(r.x-.5,r.y3,1,r.y4-r.y3)})}),(0,T.$I)().key(e=>e.stroke).key(e=>e.fill).entries(c).forEach(t=>{const{key:r,values:i}=t;"none"!==r&&(e.strokeStyle=r,e.lineWidth=n),i.forEach(t=>{const{key:n,values:i}=t,a=(0,O.d5)(i).width<=1?n:(0,O.zX)(n,s);e.fillStyle=a,i.forEach(t=>{t.width<=1?e.fillRect(t.x-.5,t.y,1,t.height):0===t.height?e.fillRect(t.x,t.y-.5,t.width,1):(e.fillRect(t.x,t.y,t.width,t.height),"none"!==r&&e.strokeRect(t.x,t.y,t.width,t.height))})})})}(e,this.props,t)}renderSVG(e){const{className:t,wickClassName:r,candleClassName:s}=this.props,{xScale:n,chartConfig:{yScale:i},plotData:a,xAccessor:o}=e,l=Ze(this.props,o,n,i,a);return w.createElement("g",{className:t},w.createElement("g",{className:r,key:"wicks"},function(e){return e.map((e,t)=>{const r=e.wick;return w.createElement("path",{key:t,className:e.className,stroke:r.stroke,d:`M${r.x},${r.y1} L${r.x},${r.y2} M${r.x},${r.y3} L${r.x},${r.y4}`})})}(l)),w.createElement("g",{className:s,key:"candles"},function(e,t){const{opacity:r,candleStrokeWidth:s}=e;return t.map((e,t)=>e.width<=1?w.createElement("line",{className:e.className,key:t,x1:e.x,y1:e.y,x2:e.x,y2:e.y+e.height,stroke:e.fill}):0===e.height?w.createElement("line",{key:t,x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height,stroke:e.fill}):w.createElement("rect",{key:t,className:e.className,fillOpacity:r,x:e.x,y:e.y,width:e.width,height:e.height,fill:e.fill,stroke:e.stroke,strokeWidth:s}))}(this.props,l)))}render(){const{clip:e}=this.props;return w.createElement(xe,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}}function Ze(e,t,r,s,n){const{wickStroke:i}=e,a=(0,O.ER)(i),{classNames:o,fill:l,stroke:c,yAccessor:h}=e,d=(0,O.ER)(o),u=(0,O.ER)(l),p=(0,O.ER)(c),m=.5*(0,O.ER)(e.width)(e,{xScale:r,xAccessor:t,plotData:n}),g=m>.7?Math.round(m):Math.floor(m);let f=[];for(let e=0;e<n.length;e++){const i=n[e];if((0,O.O9)(h(i).close)){const e=Math.round(r(t(i))),n=h(i),o=Math.round(s(Math.max(n.open,n.close))),l=Math.round(Math.abs(s(n.open)-s(n.close)));f.push({x:e-g,y:o,wick:{stroke:a(n),x:e,y1:Math.round(s(n.high)),y2:o,y3:o+l,y4:Math.round(s(n.low))},height:l,width:2*g,className:d(n),fill:u(n),stroke:p(n),direction:n.close-n.open})}}return f}Qe.propTypes={className:E().string,wickClassName:E().string,candleClassName:E().string,widthRatio:E().number,width:E().oneOfType([E().number,E().func]),classNames:E().oneOfType([E().func,E().string]),fill:E().oneOfType([E().func,E().string]),stroke:E().oneOfType([E().func,E().string]),wickStroke:E().oneOfType([E().func,E().string]),yAccessor:E().func,clip:E().bool},Qe.defaultProps={className:"react-stockcharts-candlestick",wickClassName:"react-stockcharts-candlestick-wick",candleClassName:"react-stockcharts-candlestick-candle",yAccessor:e=>({open:e.open,high:e.high,low:e.low,close:e.close}),classNames:e=>e.close>e.open?"up":"down",width:O.hc,wickStroke:"#000000",fill:e=>e.close>e.open?"#6BA583":"#FF0000",stroke:"#000000",candleStrokeWidth:.5,widthRatio:.8,opacity:.5,clip:!0};const _e=Qe;class Ke extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{yAccessor:r}=this.props,{xAccessor:s}=t,{xScale:n,chartConfig:{yScale:i},plotData:a}=t;!function(e,t){const{strokeWidth:r,bars:s}=t,n=(0,T.$I)().key(e=>e.stroke).entries(s);e.lineWidth=r,n.forEach(t=>{const{key:r,values:s}=t;e.strokeStyle=r,s.forEach(t=>{e.beginPath(),e.moveTo(t.x,t.y1),e.lineTo(t.x,t.y2),e.moveTo(t.openX1,t.openY),e.lineTo(t.openX2,t.openY),e.moveTo(t.closeX1,t.closeY),e.lineTo(t.closeX2,t.closeY),e.stroke()})})}(e,Je(this.props,s,r,n,i,a))}render(){const{clip:e}=this.props;return w.createElement(xe,{svgDraw:this.renderSVG,canvasToDraw:ye,canvasDraw:this.drawOnCanvas,clip:e,drawOn:["pan"]})}renderSVG(e){const{className:t,yAccessor:r}=this.props,{xAccessor:s}=e,{xScale:n,chartConfig:{yScale:i},plotData:a}=e,o=Je(this.props,s,r,n,i,a),{strokeWidth:l,bars:c}=o;return w.createElement("g",{className:t},c.map((e,t)=>w.createElement("path",{key:t,className:e.className,stroke:e.stroke,strokeWidth:l,d:`M${e.openX1} ${e.openY} L${e.openX2} ${e.openY} M${e.x} ${e.y1} L${e.x} ${e.y2} M${e.closeX1} ${e.closeY} L${e.closeX2} ${e.closeY}`})))}}function Je(e,t,r,s,n,i){const{classNames:a,stroke:o}=e,l=(0,O.ER)(o),c=(0,O.ER)(a),h=s(t(i[i.length-1]))-s(t(i[0])),d=Math.max(1,Math.round(h/(i.length-1)/2)-1.5),u=Math.min(d,6),p=i.filter(e=>(0,O.O9)(r(e).close)).map(e=>{const i=r(e),a=Math.round(s(t(e))),o=n(i.high),h=n(i.low),p=a-d,m=a+u/2,g=n(i.open),f=a-u/2,y=a+d,b=n(i.close),v=c(e);return{x:a,y1:o,y2:h,openX1:p,openX2:m,openY:g,closeX1:f,closeX2:y,closeY:b,stroke:l(e),className:v}});return{barWidth:d,strokeWidth:u,bars:p}}Ke.propTypes={className:E().string,classNames:E().oneOfType([E().func,E().string]).isRequired,stroke:E().oneOfType([E().func,E().string]).isRequired,yAccessor:E().func.isRequired,clip:E().bool.isRequired},Ke.defaultProps={className:"react-stockcharts-ohlc",yAccessor:e=>({open:e.open,high:e.high,low:e.low,close:e.close}),classNames:e=>(0,O.O9)(e.absoluteChange)?e.absoluteChange>0?"up":"down":"firstbar",stroke:e=>(0,O.O9)(e.absoluteChange)?e.absoluteChange>0?"#6BA583":"#FF0000":"#000000",clip:!0};const et=Ke;var tt=r(41832);class rt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{xAccessor:r}=t;nt(e,this.props,t,r,tt.A)}renderSVG(e){const{xAccessor:t}=e;return w.createElement("g",null,it(this.props,e,t,tt.A))}render(){const{clip:e}=this.props;return w.createElement(xe,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}}function st(){let e=[];function t(t){const r=e.map((e,r)=>{let s=t.map(t=>{let r=[0,t[e]];return r.data=t,r});return s.key=e,s.index=r,s});return r}return t.keys=function(r){return arguments.length?(e=r,t):e},t}function nt(e,t,r,s,n,i=O.D_,a=ot){const{xScale:o,chartConfig:{yScale:l},plotData:c}=r;ct(t,e,at(t,s,c,o,l,n,a,i))}function it(e,t,r,s,n=O.D_,i=ot){const{xScale:a,chartConfig:{yScale:o},plotData:l}=t;return lt(e,at(e,r,l,a,o,s,i,n))}function at(e,t,r,s,n,i,a,o){const{yAccessor:l,swapScales:c}=e,h=function(e,t,r,s,n,i,a=st,o=O.D_){const{baseAt:l,className:c,fill:h,stroke:d,spaceBetweenBar:u=0}=e,p=(0,O.ER)(c),m=(0,O.ER)(h),g=(0,O.ER)(l),f=(0,O.ER)(e.width)(e,{xScale:s,xAccessor:t,plotData:i}),y=Math.round(f),b=(y-u*(r.length-1))/r.length,v=1===y?0:.5*f,k=i.map(e=>{let s={appearance:{},x:t(e)};return r.forEach((t,r)=>{const n=`y${r}`;s[n]=t(e);const i={className:p(e,r),stroke:d?m(e,r):"none",fill:m(e,r)};s.appearance[n]=i}),s}),x=r.map((e,t)=>`y${t}`),S=a().keys(x)(k).map((e,t)=>{const r=e.key;return e.map(e=>{let s=[e[0],e[1]];return s.data={x:e.data.x,i:t,appearance:e.data.appearance[r]},s})});return o((0,R.Am)(S).map(e=>{let t=n(e[1]),r=g(s,n,e.data)-n(e[1]-e[0]);return r<0&&(t+=r,r=-r),{...e.data.appearance,x:Math.round(s(e.data.x)-f/2),y:t,groupOffset:Math.round(v-(e.data.i>0?(b+u)*e.data.i:0)),groupWidth:Math.round(b),offset:Math.round(v),height:r,width:y}}).filter(e=>!isNaN(e.y)))}(e,c?l:t,(d=c?e.xAccessor:l,Array.isArray(d)?d:[d]),c?n:s,c?s:n,r,i,c?a:o);var d;return h}rt.propTypes={baseAt:E().oneOfType([E().number,E().func]).isRequired,direction:E().oneOf(["up","down"]).isRequired,stroke:E().bool.isRequired,width:E().oneOfType([E().number,E().func]).isRequired,opacity:E().number.isRequired,fill:E().oneOfType([E().func,E().string]).isRequired,className:E().oneOfType([E().func,E().string]).isRequired,clip:E().bool.isRequired},rt.defaultProps={baseAt:(e,t)=>(0,O.d5)(t.range()),direction:"up",className:"bar",stroke:!0,fill:"#4682B4",opacity:.5,width:O.hc,widthRatio:.8,clip:!0,swapScales:!1};const ot=e=>e.map(e=>({...e,x:e.y,y:e.x,height:e.width,width:e.height}));function lt(e,t){const{opacity:r}=e;return t.map((e,t)=>e.width<=1?w.createElement("line",{key:t,className:e.className,stroke:e.fill,x1:e.x,y1:e.y,x2:e.x,y2:e.y+e.height}):w.createElement("rect",{key:t,className:e.className,stroke:e.stroke,fill:e.fill,x:e.x,y:e.y,width:e.width,fillOpacity:r,height:e.height}))}function ct(e,t,r){const{stroke:s}=e;(0,T.$I)().key(e=>e.fill).entries(r).forEach(r=>{const{key:n,values:i}=r;(0,O.d5)(i).width>1&&(t.strokeStyle=n);const a=(0,O.d5)(i).width<=1?n:(0,O.zX)(n,e.opacity);t.fillStyle=a,i.forEach(e=>{e.width<=1?t.fillRect(e.x-.5,e.y,1,e.height):(t.fillRect(e.x,e.y,e.width,e.height),s&&t.strokeRect(e.x,e.y,e.width,e.height))})})}const ht=rt;class dt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){if(this.props.swapScales){const{xAccessor:r}=t;nt(e,this.props,t,r,st)}else{const r=pt(this.props,t);ct(this.props,e,r)}}renderSVG(e){if(this.props.swapScales){const{xAccessor:t}=e;return w.createElement("g",null,it(this.props,e,t,st))}{const t=pt(this.props,e);return w.createElement("g",null,lt(this.props,t))}}render(){const{clip:e}=this.props;return w.createElement(xe,{clip:e,svgDraw:this.renderSVG,canvasToDraw:ye,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})}}dt.propTypes={baseAt:E().oneOfType([E().number,E().func]),stroke:E().bool,width:E().oneOfType([E().number,E().func]),yAccessor:E().func.isRequired,opacity:E().number,fill:E().oneOfType([E().func,E().string]),className:E().oneOfType([E().func,E().string]),clip:E().bool,swapScales:E().bool},dt.defaultProps=ht.defaultProps;const ut=dt;function pt(e,t){const{baseAt:r,fill:s,stroke:n,yAccessor:i}=e,{xScale:a,xAccessor:o,plotData:l,chartConfig:{yScale:c}}=t,h=(0,O.ER)(s),d=(0,O.ER)(r),u=(0,O.ER)(e.width)(e,{xScale:a,xAccessor:o,plotData:l}),p=Math.floor(.5*u);return l.filter(e=>(0,O.O9)(i(e))).map(e=>{const t=i(e);let r=c(t);const s=Math.round(a(o(e)))-p;let l=d(a,c,e)-c(t);return l<0&&(r+=l,l=-l),{x:s,y:Math.round(r),height:Math.round(l),width:2*p,fill:h(e,0),stroke:n?h(e,0):"none"}})}class mt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{xAccessor:r}=t;nt(e,this.props,t,r,st,gt)}renderSVG(e){const{xAccessor:t}=e;return w.createElement("g",{className:"react-stockcharts-grouped-bar-series"},it(this.props,e,t,st,gt))}render(){return w.createElement(xe,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}}function gt(e){return e.map(e=>({...e,x:e.x+e.offset-e.groupOffset,width:e.groupWidth}))}mt.propTypes={baseAt:E().oneOfType([E().number,E().func]).isRequired,direction:E().oneOf(["up","down"]).isRequired,stroke:E().bool.isRequired,widthRatio:E().number.isRequired,opacity:E().number.isRequired,fill:E().oneOfType([E().func,E().string]).isRequired,className:E().oneOfType([E().func,E().string]).isRequired,yAccessor:E().arrayOf(E().func)},mt.defaultProps={...ht.defaultProps,widthRatio:.8,spaceBetweenBar:5};var ft=r(17041);class yt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{xAccessor:r}=t;!function(e,t,r,s){const{stroke:n,strokeWidth:i,currentValueStroke:a}=t,{xScale:o,chartConfig:{yScale:l},plotData:c}=r,h=bt(c,s);let d=!0;h.forEach(t=>{let r;e.strokeStyle=n[t.type],e.lineWidth=i,e.beginPath(),t.plot.forEach(t=>{const[s,n]=[o(t[0]),l(t[1])];d?(e.moveTo(s,n),d=!1):((0,O.O9)(r)&&e.lineTo(r,n),e.lineTo(s,n)),r=s}),e.stroke()});const u=h[h.length-1].plot,p=u[u.length-1];e.beginPath(),e.lineWidth=1;const[m,g,f]=[o(p[0]),l(p[2]),l(p[3])];e.moveTo(m,g),e.lineTo(m+10,g),e.stroke(),e.beginPath(),e.strokeStyle=a,e.moveTo(m-10,f),e.lineTo(m,f),e.stroke()}(e,this.props,t,r)}render(){return w.createElement(xe,{svgDraw:this.renderSVG,canvasToDraw:ye,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})}renderSVG(e){const{xAccessor:t}=e,{xScale:r,chartConfig:{yScale:s},plotData:n}=e,{className:i,stroke:a,fill:o,strokeWidth:l}=this.props,c=bt(n,t).map((e,t)=>{const n=(0,Te.A)().x(e=>r(e[0])).y(e=>s(e[1])).curve(ft.Ko);return n(e.plot),w.createElement("path",{key:t,d:n(e.plot),className:e.type,stroke:a[e.type],fill:o[e.type],strokeWidth:l})});return w.createElement("g",{className:i},c)}}function bt(e,t){const r=[];let s={},n=e[0],i=t(n);for(let a=0;a<e.length;a++)n=e[a],(0,O.pN)(n.close)||((0,O.pN)(s.type)&&(s.type=n.startAs),(0,O.pN)(s.plot)&&(s.plot=[]),i=t(n),s.plot.push([i,n.open]),(0,O.O9)(n.changeTo)&&(s.plot.push([i,n.changePoint]),s.added=!0,r.push(s),s={type:n.changeTo,plot:[],added:!1},s.plot.push([i,n.changePoint])));return s.added||(s.plot.push([i,n.close,n.current,n.reverseAt]),r.push(s)),r}yt.propTypes={className:E().string,stroke:E().object,fill:E().object,strokeWidth:E().number.isRequired},yt.defaultProps={className:"react-stockcharts-kagi",strokeWidth:2,stroke:{yang:"#6BA583",yin:"#E60000"},fill:{yang:"none",yin:"none"},currentValueStroke:"#000000"};class vt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{xAccessor:r}=t,{xScale:s,chartConfig:{yScale:n},plotData:i}=t,a=kt(s,r,n,i);!function(e,t,r){const{stroke:s,fill:n,strokeWidth:i}=t;e.lineWidth=i,r.forEach(t=>{const[r,i]=t.offset;t.boxes.forEach(a=>{if(t.direction>0)e.fillStyle=n.up,e.strokeStyle=s.up,e.beginPath(),e.moveTo(r,i+a.open),e.lineTo(r+a.columnWidth,i+a.close),e.moveTo(r,i+a.close),e.lineTo(r+a.columnWidth,i+a.open),e.stroke();else{e.fillStyle=n.down,e.strokeStyle=s.down,e.beginPath();const[t,o]=[r+a.columnWidth/2,i+a.open+a.boxHeight/2],[l,c]=[a.columnWidth/2,a.boxHeight/2];e.ellipse(t,o,l,c,0,0,2*Math.PI),e.stroke()}})}),e.stroke()}(e,this.props,a)}render(){const{clip:e}=this.props;return w.createElement(xe,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}renderSVG(e){const{xAccessor:t}=e,{xScale:r,chartConfig:{yScale:s},plotData:n}=e,{stroke:i,fill:a,strokeWidth:o,className:l}=this.props,c=kt(r,t,s,n);return w.createElement("g",{className:l},c.map((e,t)=>w.createElement("g",{key:t,className:e.className,transform:`translate(${e.offset[0]}, ${e.offset[1]})`},e.boxes.map((r,s)=>e.direction>0?w.createElement("g",{key:`${t}-${s}`},w.createElement("line",{className:"up",strokeWidth:o,stroke:i.up,fill:a.up,x1:0,y1:r.open,x2:r.columnWidth,y2:r.close}),w.createElement("line",{className:"up",strokeWidth:o,stroke:i.up,fill:a.up,x1:0,y1:r.close,x2:r.columnWidth,y2:r.open})):w.createElement("ellipse",{key:`${t}-${s}`,className:"down",strokeWidth:o,stroke:i.down,fill:a.down,cx:r.columnWidth/2,cy:(r.open+r.close)/2,rx:r.columnWidth/2,ry:r.boxHeight/2})))))}}function kt(e,t,r,s){const n=(e(t(s[s.length-1]))-e(t(s[0])))/(s.length-1);let i,a=0;for(;(0,O.pN)(i)&&(0,O.O9)(s[a].close);)i=s[a].boxes[0],a++;const o=Math.abs(r(i.open)-r(i.close));return s.filter(e=>(0,O.O9)(e.close)).map(s=>{const i=s.boxes.map(e=>({columnWidth:n,boxHeight:o,open:r(e.open),close:r(e.close)})),a=e(t(s))-n/2;return{boxes:i,direction:s.direction,offset:[a,0]}})}vt.propTypes={className:E().string,strokeWidth:E().number.isRequired,stroke:E().object.isRequired,fill:E().object.isRequired,clip:E().bool.isRequired},vt.defaultProps={className:"react-stockcharts-point-and-figure",strokeWidth:1,stroke:{up:"#6BA583",down:"#FF0000"},fill:{up:"none",down:"none"},clip:!0};class xt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{xAccessor:r}=t,{xScale:s,chartConfig:{yScale:n},plotData:i}=t,{yAccessor:a}=this.props;!function(e,t){t.forEach(t=>{e.beginPath(),e.strokeStyle=t.stroke,e.fillStyle=t.fill,e.rect(t.x,t.y,t.width,t.height),e.closePath(),e.fill()})}(e,St(this.props,i,s,r,n,a))}render(){const{clip:e}=this.props;return w.createElement(xe,{clip:e,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}renderSVG(e){const{xAccessor:t}=e,{xScale:r,chartConfig:{yScale:s},plotData:n}=e,{yAccessor:i}=this.props,a=St(this.props,n,r,t,s,i).map((e,t)=>w.createElement("rect",{key:t,className:e.className,fill:e.fill,x:e.x,y:e.y,width:e.width,height:e.height}));return w.createElement("g",null,w.createElement("g",{className:"candle"},a))}}function St(e,t,r,s,n,i){const{classNames:a,fill:o}=e,l=(r(s(t[t.length-1]))-r(s(t[0])))/(t.length-1);return t.filter(e=>(0,O.O9)(i(e).close)).map(e=>{const t=i(e),c=r(s(e))-.5*l,h=n(Math.max(t.open,t.close)),d=Math.abs(n(t.open)-n(t.close));return{className:t.open<=t.close?a.up:a.down,fill:e.fullyFormed?t.open<=t.close?o.up:o.down:o.partial,x:c,y:h,height:d,width:l}})}function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ct.apply(null,arguments)}xt.propTypes={classNames:E().shape({up:E().string,down:E().string}),stroke:E().shape({up:E().string,down:E().string}),fill:E().shape({up:E().string,down:E().string,partial:E().string}),yAccessor:E().func.isRequired,clip:E().bool.isRequired},xt.defaultProps={classNames:{up:"up",down:"down"},stroke:{up:"none",down:"none"},fill:{up:"#6BA583",down:"#E60000",partial:"#4682B4"},yAccessor:e=>({open:e.open,high:e.high,low:e.low,close:e.close}),clip:!0};class wt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{type:r,stroke:s,strokeWidth:n,opacity:i,strokeDasharray:a}=this.props,{yValue:o,xValue:l}=this.props,{xScale:c}=t,{chartConfig:{yScale:h,width:d,height:u}}=t;e.beginPath(),e.strokeStyle=(0,O.zX)(s,i),e.lineWidth=n;const{x1:p,y1:m,x2:g,y2:f}=Dt(r,c,h,l,o,d,u);e.setLineDash((0,O.KA)(a).split(",")),e.moveTo(p,m),e.lineTo(g,f),e.stroke()}render(){return w.createElement(xe,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}renderSVG(e){const{width:t,height:r}=e,{xScale:s,chartConfig:{yScale:n}}=e,{className:i}=this.props,{type:a,stroke:o,strokeWidth:l,opacity:c,strokeDasharray:h}=this.props,{yValue:d,xValue:u}=this.props,p=Dt(a,s,n,u,d,t,r);return w.createElement("line",Ct({className:i,strokeDasharray:(0,O.KA)(h),stroke:o,strokeWidth:l,strokeOpacity:c},p))}}function Dt(e,t,r,s,n,i,a){return"horizontal"===e?{x1:0,y1:Math.round(r(n)),x2:i,y2:Math.round(r(n))}:{x1:Math.round(t(s)),y1:0,x2:Math.round(t(s)),y2:a}}wt.propTypes={className:E().string,type:E().oneOf(["vertical","horizontal"]),stroke:E().string,strokeWidth:E().number,strokeDasharray:E().oneOf(O.uF),opacity:E().number.isRequired,yValue:function(e,t){return"vertical"===e.type&&(0,O.O9)(e[t])?new Error("Do not define `yValue` when type is `vertical`, define the `xValue` prop"):"horizontal"===e.type&&(0,O.pN)(e[t])?new Error("when type = `horizontal` `yValue` is required"):void 0},xValue:function(e,t){return"horizontal"===e.type&&(0,O.O9)(e[t])?new Error("Do not define `xValue` when type is `horizontal`, define the `yValue` prop"):"vertical"===e.type&&(0,O.pN)(e[t])?new Error("when type = `vertical` `xValue` is required"):void 0}},wt.defaultProps={className:"line ",type:"horizontal",stroke:"#000000",opacity:.5,strokeWidth:1,strokeDasharray:"Solid"};const Et=wt;class Rt extends w.Component{constructor(e){super(e),this.yAccessorForMACD=this.yAccessorForMACD.bind(this),this.yAccessorForSignal=this.yAccessorForSignal.bind(this),this.yAccessorForDivergence=this.yAccessorForDivergence.bind(this),this.yAccessorForDivergenceBase=this.yAccessorForDivergenceBase.bind(this)}yAccessorForMACD(e){const{yAccessor:t}=this.props;return t(e)&&t(e).macd}yAccessorForSignal(e){const{yAccessor:t}=this.props;return t(e)&&t(e).signal}yAccessorForDivergence(e){const{yAccessor:t}=this.props;return t(e)&&t(e).divergence}yAccessorForDivergenceBase(e,t){return t(0)}render(){const{className:e,opacity:t,divergenceStroke:r,widthRatio:s,width:n}=this.props,{stroke:i,fill:a}=this.props,{clip:o}=this.props,{zeroLineStroke:l,zeroLineOpacity:c}=this.props;return w.createElement("g",{className:e},w.createElement(ut,{baseAt:this.yAccessorForDivergenceBase,className:"macd-divergence",width:n,widthRatio:s,stroke:r,fill:a.divergence,opacity:t,clip:o,yAccessor:this.yAccessorForDivergence}),w.createElement(qe,{yAccessor:this.yAccessorForMACD,stroke:i.macd,fill:"none"}),w.createElement(qe,{yAccessor:this.yAccessorForSignal,stroke:i.signal,fill:"none"}),w.createElement(Et,{stroke:l,opacity:c,yValue:0}))}}Rt.propTypes={className:E().string,yAccessor:E().func.isRequired,opacity:E().number,divergenceStroke:E().bool,zeroLineStroke:E().string,zeroLineOpacity:E().number,clip:E().bool.isRequired,stroke:E().shape({macd:E().string.isRequired,signal:E().string.isRequired}).isRequired,fill:E().shape({divergence:E().oneOfType([E().string,E().func]).isRequired}).isRequired,widthRatio:E().number,width:ut.propTypes.width},Rt.defaultProps={className:"react-stockcharts-macd-series",zeroLineStroke:"#000000",zeroLineOpacity:.3,opacity:.6,divergenceStroke:!1,clip:!0,widthRatio:.5,width:ut.defaultProps.width};class Ot extends w.Component{constructor(e){super(e),this.yAccessorForTop=this.yAccessorForTop.bind(this),this.yAccessorForMiddle=this.yAccessorForMiddle.bind(this),this.yAccessorForBottom=this.yAccessorForBottom.bind(this),this.yAccessorForScalledBottom=this.yAccessorForScalledBottom.bind(this)}yAccessorForTop(e){const{yAccessor:t}=this.props;return t(e)&&t(e).top}yAccessorForMiddle(e){const{yAccessor:t}=this.props;return t(e)&&t(e).middle}yAccessorForBottom(e){const{yAccessor:t}=this.props;return t(e)&&t(e).bottom}yAccessorForScalledBottom(e,t){const{yAccessor:r}=this.props;return e(r(t)&&r(t).bottom)}render(){const{areaClassName:e,className:t,opacity:r}=this.props,{stroke:s,fill:n}=this.props;return w.createElement("g",{className:t},w.createElement(qe,{yAccessor:this.yAccessorForTop,stroke:s.top,fill:"none"}),w.createElement(qe,{yAccessor:this.yAccessorForMiddle,stroke:s.middle,fill:"none"}),w.createElement(qe,{yAccessor:this.yAccessorForBottom,stroke:s.bottom,fill:"none"}),w.createElement(Me,{className:e,yAccessor:this.yAccessorForTop,base:this.yAccessorForScalledBottom,stroke:"none",fill:n,opacity:r}))}}Ot.propTypes={yAccessor:E().func.isRequired,className:E().string,areaClassName:E().string,opacity:E().number,type:E().string,stroke:E().shape({top:E().string.isRequired,middle:E().string.isRequired,bottom:E().string.isRequired}).isRequired,fill:E().string.isRequired},Ot.defaultProps={className:"react-stockcharts-bollinger-band-series",areaClassName:"react-stockcharts-bollinger-band-series-area",opacity:.2};class Tt extends w.Component{constructor(e){super(e),this.renderClip=this.renderClip.bind(this),this.topAndBottomClip=this.topAndBottomClip.bind(this),this.mainClip=this.mainClip.bind(this);const t=String(Math.round(1e4*Math.random()*1e4));this.clipPathId1=`rsi-clip-${t}`;const r=String(Math.round(1e4*Math.random()*1e4));this.clipPathId2=`rsi-clip-${r}`}topAndBottomClip(e,t){const{chartConfig:r}=t,{overSold:s,overBought:n}=this.props,{yScale:i,width:a}=r;e.beginPath(),e.rect(0,i(s),a,i(n)-i(s)),e.clip()}mainClip(e,t){const{chartConfig:r}=t,{overSold:s,overBought:n}=this.props,{yScale:i,width:a,height:o}=r;e.beginPath(),e.rect(0,0,a,i(s)),e.rect(0,i(n),a,o-i(n)),e.clip()}renderClip(e){const{chartConfig:t}=e,{overSold:r,overBought:s}=this.props,{yScale:n,width:i,height:a}=t;return w.createElement("defs",null,w.createElement("clipPath",{id:this.clipPathId1},w.createElement("rect",{x:0,y:n(r),width:i,height:n(s)-n(r)})),w.createElement("clipPath",{id:this.clipPathId2},w.createElement("rect",{x:0,y:0,width:i,height:n(r)}),w.createElement("rect",{x:0,y:n(s),width:i,height:a-n(s)})))}render(){const{className:e,stroke:t,opacity:r,strokeDasharray:s,strokeWidth:n}=this.props,{yAccessor:i}=this.props,{overSold:a,middle:o,overBought:l}=this.props,c={clipPath:`url(#${this.clipPathId1})`},h={clipPath:`url(#${this.clipPathId2})`};return w.createElement("g",{className:e},w.createElement(ze,null,this.renderClip),w.createElement(Et,{stroke:t.top,opacity:r.top,yValue:a,strokeDasharray:s.top,strokeWidth:n.top}),w.createElement(Et,{stroke:t.middle,opacity:r.middle,yValue:o,strokeDasharray:s.middle,strokeWidth:n.middle}),w.createElement(Et,{stroke:t.bottom,opacity:r.bottom,yValue:l,strokeDasharray:s.bottom,strokeWidth:n.bottom}),w.createElement(qe,{style:c,canvasClip:this.topAndBottomClip,className:e,yAccessor:i,stroke:t.insideThreshold||t.line,strokeWidth:n.insideThreshold,strokeDasharray:s.line}),w.createElement(qe,{style:h,canvasClip:this.mainClip,className:e,yAccessor:i,stroke:t.outsideThreshold||t.line,strokeWidth:n.outsideThreshold,strokeDasharray:s.line}))}}Tt.propTypes={className:E().string,yAccessor:E().func.isRequired,stroke:E().shape({top:E().string.isRequired,middle:E().string.isRequired,bottom:E().string.isRequired,outsideThreshold:E().string.isRequired,insideThreshold:E().string.isRequired}).isRequired,opacity:E().shape({top:E().number.isRequired,middle:E().number.isRequired,bottom:E().number.isRequired}).isRequired,strokeDasharray:E().shape({line:E().oneOf(O.uF),top:E().oneOf(O.uF),middle:E().oneOf(O.uF),bottom:E().oneOf(O.uF)}).isRequired,strokeWidth:E().shape({outsideThreshold:E().number.isRequired,insideThreshold:E().number.isRequired,top:E().number.isRequired,middle:E().number.isRequired,bottom:E().number.isRequired}).isRequired,overSold:E().number.isRequired,middle:E().number.isRequired,overBought:E().number.isRequired},Tt.defaultProps={className:"react-stockcharts-rsi-series",stroke:{line:"#000000",top:"#B8C2CC",middle:"#8795A1",bottom:"#B8C2CC",outsideThreshold:"#b300b3",insideThreshold:"#ffccff"},opacity:{top:1,middle:1,bottom:1},strokeDasharray:{line:"Solid",top:"ShortDash",middle:"ShortDash",bottom:"ShortDash"},strokeWidth:{outsideThreshold:1,insideThreshold:1,top:1,middle:1,bottom:1},overSold:70,middle:50,overBought:30};class Ft extends w.Component{constructor(e){super(e),this.yAccessorForD=this.yAccessorForD.bind(this),this.yAccessorForK=this.yAccessorForK.bind(this)}yAccessorForD(e){const{yAccessor:t}=this.props;return t(e)&&t(e).D}yAccessorForK(e){const{yAccessor:t}=this.props;return t(e)&&t(e).K}render(){const{className:e,stroke:t,refLineOpacity:r}=this.props,{overSold:s,middle:n,overBought:i}=this.props;return w.createElement("g",{className:e},w.createElement(qe,{yAccessor:this.yAccessorForD,stroke:t.dLine,fill:"none"}),w.createElement(qe,{yAccessor:this.yAccessorForK,stroke:t.kLine,fill:"none"}),w.createElement(Et,{stroke:t.top,opacity:r,yValue:s}),w.createElement(Et,{stroke:t.middle,opacity:r,yValue:n}),w.createElement(Et,{stroke:t.bottom,opacity:r,yValue:i}))}}Ft.propTypes={className:E().string,yAccessor:E().func.isRequired,stroke:E().shape({top:E().string.isRequired,middle:E().string.isRequired,bottom:E().string.isRequired,dLine:E().string.isRequired,kLine:E().string.isRequired}).isRequired,overSold:E().number.isRequired,middle:E().number.isRequired,overBought:E().number.isRequired,refLineOpacity:E().number.isRequired},Ft.defaultProps={className:"react-stockcharts-stochastic-series",stroke:{top:"#964B00",middle:"#000000",bottom:"#964B00",dLine:"#EA2BFF",kLine:"#74D400"},overSold:80,middle:50,overBought:20,refLineOpacity:.3};class Pt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{yAccessor:r}=this.props,s=qt(this.props,t,r);ct(this.props,e,s)}renderSVG(e){const{yAccessor:t}=this.props,r=qt(this.props,e,t);return w.createElement("g",{className:"react-stockcharts-bar-series"},lt(this.props,r))}render(){const{clip:e}=this.props;return w.createElement(xe,{svgDraw:this.renderSVG,canvasToDraw:ye,canvasDraw:this.drawOnCanvas,clip:e,drawOn:["pan"]})}}function qt(e,t,r){const{xScale:s,xAccessor:n,chartConfig:{yScale:i},plotData:a}=t,{baseAt:o,className:l,fill:c,stroke:h}=e,d=(0,O.ER)(l),u=(0,O.ER)(c),p=(0,O.ER)(o),m=(0,O.ER)(e.width)(e,t),g=Math.floor(.5*m),f=a.map(e=>{let t,a=r.map((t,r)=>{const a=t(e);if((0,O.pN)(a))return;const o=n(e),l=Math.round(s(o))-g,c=i(a);return{width:2*g,x:l,y:c,className:d(e,r),stroke:h?u(e,r):"none",fill:u(e,r),i:r}}).filter(e=>(0,O.O9)(e)),o=p(s,i,e);for(let e=a.length-1;e>=0;e--)t=o-a[e].y,t<0&&(a[e].y=o,t*=-1),a[e].height=t,o=a[e].y;return a});return(0,R.Am)(f)}Pt.propTypes={baseAt:E().oneOfType([E().number,E().func]).isRequired,direction:E().oneOf(["up","down"]).isRequired,stroke:E().bool.isRequired,widthRatio:E().number.isRequired,opacity:E().number.isRequired,fill:E().oneOfType([E().func,E().string]).isRequired,className:E().oneOfType([E().func,E().string]).isRequired,xAccessor:E().func,yAccessor:E().arrayOf(E().func),xScale:E().func,yScale:E().func,plotData:E().array,clip:E().bool.isRequired},Pt.defaultProps={baseAt:(e,t)=>(0,O.$1)(t.range()),direction:"up",className:"bar",stroke:!1,fill:"#4682B4",opacity:1,widthRatio:.5,width:O.hc,clip:!0};const At=Pt;class Nt extends w.Component{constructor(e){super(e),this.fillForEachBar=this.fillForEachBar.bind(this),this.yAccessorTop=this.yAccessorTop.bind(this),this.yAccessorBullTop=this.yAccessorBullTop.bind(this),this.yAccessorBearTop=this.yAccessorBearTop.bind(this),this.yAccessorBullBottom=this.yAccessorBullBottom.bind(this),this.yAccessorBearBottom=this.yAccessorBearBottom.bind(this),this.yAccessorForBarBase=this.yAccessorForBarBase.bind(this)}yAccessorTop(e){const{yAccessor:t}=this.props;return t(e)&&Math.max(t(e).bullPower,0)}yAccessorBullTop(e){const{yAccessor:t}=this.props;return t(e)&&(t(e).bullPower>0?t(e).bullPower:void 0)}yAccessorBearTop(e){const{yAccessor:t}=this.props;return t(e)&&(t(e).bearPower>0?t(e).bearPower:void 0)}yAccessorBullBottom(e){const{yAccessor:t}=this.props;return t(e)&&(t(e).bullPower<0?0:void 0)}yAccessorBearBottom(e){const{yAccessor:t}=this.props;return t(e)&&(t(e).bullPower<0||t(e).bullPower*t(e).bearPower<0?Math.min(0,t(e).bullPower):void 0)}yAccessorForBarBase(e,t,r){const{yAccessor:s}=this.props;return t(s(r)&&Math.min(s(r).bearPower,0))}fillForEachBar(e,t){const{bullPowerFill:r,bearPowerFill:s}=this.props;return t%2==0?r:s}render(){const{className:e,opacity:t,stroke:r,straightLineStroke:s,straightLineOpacity:n,widthRatio:i}=this.props,{clip:a}=this.props;return w.createElement("g",{className:e},w.createElement(At,{baseAt:this.yAccessorForBarBase,className:"react-stockcharts-elderray-bar",stroke:r,fill:this.fillForEachBar,opacity:t,widthRatio:i,clip:a,yAccessor:[this.yAccessorBullTop,this.yAccessorBearTop,this.yAccessorBullBottom,this.yAccessorBearBottom]}),w.createElement(Et,{className:"react-stockcharts-elderray-straight-line",yValue:0,stroke:s,opacity:n}))}}function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Mt.apply(null,arguments)}Nt.propTypes={className:E().string,yAccessor:E().func,opacity:E().number,stroke:E().bool,bullPowerFill:E().string,bearPowerFill:E().string,straightLineStroke:E().string,straightLineOpacity:E().number,widthRatio:E().number,clip:E().bool.isRequired},Nt.defaultProps={className:"react-stockcharts-elderray-series",straightLineStroke:"#000000",straightLineOpacity:.3,opacity:.5,stroke:!0,bullPowerFill:"#6BA583",bearPowerFill:"#FF0000",widthRatio:.8,clip:!0};class Wt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{xAccessor:r,width:s}=t,{rects:n,sessionBg:i}=Vt(this.props,t,r,s);!function(e,t,r,s){const{opacity:n,sessionBackGround:i,sessionBackGroundOpacity:a,showSessionBackground:o}=t;o&&(e.fillStyle=(0,O.zX)(i,a),s.forEach(t=>{const{x:r,y:s,height:n,width:i}=t;e.beginPath(),e.rect(r,s,i,n),e.closePath(),e.fill()})),r.forEach(t=>{const{x:r,y:s,height:i,w1:a,w2:o,stroke1:l,stroke2:c,fill1:h,fill2:d}=t;a>0&&(e.fillStyle=(0,O.zX)(h,n),"none"!==l&&(e.strokeStyle=l),e.beginPath(),e.rect(r,s,a,i),e.closePath(),e.fill(),"none"!==l&&e.stroke()),o>0&&(e.fillStyle=(0,O.zX)(d,n),"none"!==c&&(e.strokeStyle=c),e.beginPath(),e.rect(r+a,s,o,i),e.closePath(),e.fill(),"none"!==c&&e.stroke())})}(e,this.props,n,i)}render(){return w.createElement(xe,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}renderSVG(e){const{className:t,opacity:r}=this.props,{showSessionBackground:s,sessionBackGround:n,sessionBackGroundOpacity:i}=this.props,{xAccessor:a,width:o}=e,{rects:l,sessionBg:c}=Vt(this.props,e,a,o),h=s?c.map((e,t)=>w.createElement("rect",Mt({key:t},e,{opacity:i,fill:n}))):null;return w.createElement("g",{className:t},h,l.map((e,t)=>w.createElement("g",{key:t},w.createElement("rect",{x:e.x,y:e.y,width:e.w1,height:e.height,fill:e.fill1,stroke:e.stroke1,fillOpacity:r}),w.createElement("rect",{x:e.x+e.w1,y:e.y,width:e.w2,height:e.height,fill:e.fill2,stroke:e.stroke2,fillOpacity:r}))))}}function Vt(e,t,r,s){const{xScale:n,chartConfig:{yScale:i},plotData:a}=t,{sessionStart:o,bySession:l,partialStartOK:c,partialEndOK:h}=e,{bins:d,maxProfileWidthPercent:u,source:p,volume:m,absoluteChange:g,orient:f,fill:y,stroke:b}=e,v=(0,O.MZ)().discardTillStart(!c).discardTillEnd(!h).accumulateTill((e,r)=>o({d:e,i:r,...t})).accumulator(O.D_),k=a.length>1?n(r(a[1]))-n(r((0,O.d5)(a))):0,S=(l?v(a):[a]).map(e=>{const t=l?n(r((0,O.d5)(e))):0,a=l?n(r((0,O.HV)(e))):s,o=a-t+k,c=(0,R.JW)().value(p).thresholds(d),h=(0,T.$I)().key(e=>e.direction).sortKeys("right"===f?R.rG:R.V_).rollup(e=>(0,R.cz)(e,e=>e.volume)),v=c(e),S=v.map(e=>e.map(e=>g(e)>0?{direction:"up",volume:m(e)}:{direction:"down",volume:m(e)})).map(e=>h.entries(e)),C=S.map(e=>(0,R.cz)(e.map(e=>e.value))),[w,D]="right"===f?[t,t+o*u/100]:[a,a-o*(100-u)/100],E=(0,x.m4)().domain([0,(0,R.T9)(C)]).range([w,D]),F=S.map(e=>{const t=(0,R.cz)(e,e=>e.value),r=E(t),s=(e=>(0,O.d5)(e.range()))(E)-r;return{x:s<0?r+s:r,ws:e.map(e=>({type:e.key,width:e.value*Math.abs(s)/t})),totalVolumeX:r}}),P=(0,R.yU)(v,F).map(([e,{x:t,ws:r}])=>{const n=r[0]||{type:"up",width:0},a=r[1]||{type:"down",width:0};return{y:i(e.x1),height:i(e.x1)-i(e.x0),x:t,width:s,w1:n.width,w2:a.width,stroke1:(0,O.ER)(b)(n),stroke2:(0,O.ER)(b)(a),fill1:(0,O.ER)(y)(n),fill2:(0,O.ER)(y)(a)}});return{rects:P,sessionBg:{x:t,y:(0,O.HV)(P).y,height:(0,O.d5)(P).y-(0,O.HV)(P).y+(0,O.d5)(P).height,width:o}}});return{rects:(0,R.Am)(S.map(e=>e.rects)),sessionBg:S.map(e=>e.sessionBg)}}function Ht(){return Ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ht.apply(null,arguments)}Wt.propTypes={className:E().string,opacity:E().number,showSessionBackground:E().bool,sessionBackGround:E().string,sessionBackGroundOpacity:E().number},Wt.defaultProps={className:"line ",bins:20,opacity:.5,maxProfileWidthPercent:50,fill:({type:e})=>"up"===e?"#6BA583":"#FF0000",stroke:"#FFFFFF",showSessionBackground:!1,sessionBackGround:"#4682B4",sessionBackGroundOpacity:.3,source:e=>e.close,volume:e=>e.volume,absoluteChange:e=>e.absoluteChange,bySession:!1,sessionStart:({d:e,i:t,plotData:r})=>t>0&&r[t-1].date.getMonth()!==e.date.getMonth(),orient:"left",partialStartOK:!0,partialEndOK:!0};class zt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}isHover(e){const{mouseXY:t,currentItem:r,chartConfig:{yScale:s}}=e,{yAccessor:n}=this.props,i=t[1],a=s(n(r));return i<a+5&&i>a-5}drawOnCanvas(e,t){const{yAccessor:r,fill:s,opacity:n}=this.props,{xAccessor:i,plotData:a,xScale:o,chartConfig:{yScale:l},hovering:c}=t,h=(o(i((0,O.HV)(a)))-o(i((0,O.$1)(a))))/a.length*.5/2,d=Math.min(2,Math.max(.5,h))+(c?2:0);a.forEach(t=>{const a=o(i(t)),c=l(r(t)),h=r(t)>t.close?s.falling:s.rising;e.fillStyle=(0,O.zX)(h,n),e.strokeStyle=h,e.beginPath(),e.ellipse(a,c,d,d,0,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()})}renderSVG(e){const{className:t,yAccessor:r}=this.props,{xAccessor:s,plotData:n,xScale:i,chartConfig:{yScale:a}}=e;return w.createElement("g",{className:t},n.filter(e=>(0,O.O9)(r(e))).map((e,t)=>w.createElement("circle",{key:t,cx:i(s(e)),cy:a(r(e)),r:3,fill:"green"})))}render(){const{highlightOnHover:e}=this.props,t=e?{isHover:this.isHover,drawOn:["mousemove","pan"],canvasToDraw:be}:{drawOn:["pan"],canvasToDraw:ye};return w.createElement(xe,Ht({svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,onClickWhenHover:this.props.onClick,onDoubleClickWhenHover:this.props.onDoubleClick,onContextMenuWhenHover:this.props.onContextMenu},t))}}function It(e,t){const{currentItem:r}=t;return r}function Lt(){return Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Lt.apply(null,arguments)}zt.propTypes={className:E().string,fill:E().object.isRequired,yAccessor:E().func.isRequired,opacity:E().number.isRequired,onClick:E().func,onDoubleClick:E().func,onContextMenu:E().func,highlightOnHover:E().bool},zt.defaultProps={className:"react-stockcharts-sar",fill:{falling:"#4682B4",rising:"#15EC2E"},highlightOnHover:!0,opacity:.2,onClick:function(e){console.log("Click",e)},onDoubleClick:function(e){console.log("Double Click",e)},onContextMenu:function(e){console.log("Right Click",e)}};class Xt extends w.Component{render(){return w.createElement("text",Lt({fontFamily:this.props.fontFamily,fontSize:this.props.fontSize},this.props,{className:"react-stockcharts-tooltip"}),this.props.children)}}Xt.propTypes={fontFamily:E().string.isRequired,fontSize:E().number.isRequired,children:E().node.isRequired},Xt.defaultProps={fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:11};const Bt=Xt;function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Yt.apply(null,arguments)}function Gt(e){return w.createElement("tspan",Yt({className:"react-stockcharts-tooltip-label"},e),e.children)}Gt.propTypes={children:E().node.isRequired,fill:E().string.isRequired},Gt.defaultProps={fill:"#4682B4"};const $t=Gt;class jt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this)}renderSVG(e){const{onClick:t,fontFamily:r,fontSize:s,displayFormat:n,className:i}=this.props,{yAccessor:a,options:o,appearance:l,labelFill:c}=this.props,{displayValuesFor:h}=this.props,{chartConfig:{width:d,height:u}}=e,p=h(this.props,e),m=p&&a(p),g=m&&m.macd&&n(m.macd)||"n/a",f=m&&m.signal&&n(m.signal)||"n/a",y=m&&m.divergence&&n(m.divergence)||"n/a",{origin:b}=this.props,v=(0,O.ER)(b),[k,x]=v(d,u);return w.createElement("g",{className:i,transform:`translate(${k}, ${x})`,onClick:t},w.createElement(Bt,{x:0,y:0,fontFamily:r,fontSize:s},w.createElement($t,{fill:c},"MACD ("),w.createElement("tspan",{fill:l.stroke.macd},o.slow),w.createElement($t,{fill:c},", "),w.createElement("tspan",{fill:l.stroke.macd},o.fast),w.createElement($t,{fill:c},"): "),w.createElement("tspan",{fill:l.stroke.macd},g),w.createElement($t,{fill:c}," Signal ("),w.createElement("tspan",{fill:l.stroke.signal},o.signal),w.createElement($t,{fill:c},"): "),w.createElement("tspan",{fill:l.stroke.signal},f),w.createElement($t,{fill:c}," Divergence: "),w.createElement("tspan",{fill:l.fill.divergence},y)))}render(){return w.createElement(xe,{clip:!1,svgDraw:this.renderSVG,drawOn:["mousemove"]})}}jt.propTypes={origin:E().oneOfType([E().array,E().func]).isRequired,className:E().string,fontFamily:E().string,fontSize:E().number,labelFill:E().string,yAccessor:E().func.isRequired,options:E().shape({slow:E().number.isRequired,fast:E().number.isRequired,signal:E().number.isRequired}).isRequired,appearance:E().shape({stroke:{macd:E().string.isRequired,signal:E().string.isRequired}.isRequired,fill:E().shape({divergence:E().string.isRequired}).isRequired}).isRequired,displayFormat:E().func.isRequired,displayValuesFor:E().func,onClick:E().func},jt.defaultProps={origin:[0,0],displayFormat:(0,S.GP)(".2f"),displayValuesFor:It,className:"react-stockcharts-tooltip"};class Ut extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this)}renderSVG(e){const{displayValuesFor:t}=this.props,{xDisplayFormat:r,accessor:s,volumeFormat:n,ohlcFormat:i,percentFormat:a,displayTexts:o}=this.props,{chartConfig:{width:l,height:c}}=e,{displayXAccessor:h}=e,d=t(this.props,e);let u,p,m,g,f,y,b;if(u=p=m=g=f=y=b=o.na,(0,O.O9)(d)&&(0,O.O9)(s(d))){const e=s(d);y=(0,O.O9)(e.volume)?n(e.volume):o.na,u=r(h(e)),p=i(e.open),m=i(e.high),g=i(e.low),f=i(e.close),b=a((e.close-e.open)/e.open)}const{origin:v}=this.props,k=(0,O.ER)(v),[x,S]=k(l,c),C={displayDate:u,open:p,high:m,low:g,close:f,percent:b,volume:y,x,y:S};return this.props.children(this.props,e,C)}render(){return w.createElement(xe,{clip:!1,svgDraw:this.renderSVG,drawOn:["mousemove"]})}}Ut.propTypes={className:E().string,accessor:E().func,xDisplayFormat:E().func,children:E().func,volumeFormat:E().func,percentFormat:E().func,ohlcFormat:E().func,origin:E().oneOfType([E().array,E().func]),fontFamily:E().string,fontSize:E().number,onClick:E().func,displayValuesFor:E().func,textFill:E().string,labelFill:E().string,displayTexts:E().object},Ut.defaultProps={accessor:e=>({date:e.date,open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume}),xDisplayFormat:(0,C.DC)("%Y-%m-%d"),volumeFormat:(0,S.GP)(".4s"),percentFormat:(0,S.GP)(".2%"),ohlcFormat:(0,S.GP)(".2f"),displayValuesFor:It,origin:[0,0],children:function(e,t,r){const{className:s,textFill:n,labelFill:i,onClick:a,fontFamily:o,fontSize:l,displayTexts:c}=e,{displayDate:h,open:d,high:u,low:p,close:m,volume:g,x:f,y}=r;return w.createElement("g",{className:`react-stockcharts-tooltip-hover ${s}`,transform:`translate(${f}, ${y})`,onClick:a},w.createElement(Bt,{x:0,y:0,fontFamily:o,fontSize:l},w.createElement($t,{fill:i,key:"label",x:0,dy:"5"},c.d),w.createElement("tspan",{key:"value",fill:n},h),w.createElement($t,{fill:i,key:"label_O"},c.o),w.createElement("tspan",{key:"value_O",fill:n},d),w.createElement($t,{fill:i,key:"label_H"},c.h),w.createElement("tspan",{key:"value_H",fill:n},u),w.createElement($t,{fill:i,key:"label_L"},c.l),w.createElement("tspan",{key:"value_L",fill:n},p),w.createElement($t,{fill:i,key:"label_C"},c.c),w.createElement("tspan",{key:"value_C",fill:n},m),w.createElement($t,{fill:i,key:"label_Vol"},c.v),w.createElement("tspan",{key:"value_Vol",fill:n},g)))},displayTexts:{d:"Date: ",o:" O: ",h:" H: ",l:" L: ",c:" C: ",v:" Vol: ",na:"n/a"}};const Qt=Ut;class Zt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this)}renderSVG(e){const{onClick:t,fontFamily:r,fontSize:s,labelFill:n,valueFill:i,className:a}=this.props,{xDisplayFormat:o,yDisplayFormat:l,xLabel:c,yLabel:h,xAccessor:d,yAccessor:u}=this.props,{displayValuesFor:p}=this.props,{chartConfig:{width:m,height:g}}=e,f=p(this.props,e),y=(0,O.O9)(f)&&(0,O.O9)(d(f))?o(d(f)):"n/a",b=(0,O.O9)(f)&&(0,O.O9)(u(f))?l(u(f)):"n/a",{origin:v}=this.props,k=(0,O.ER)(v),[x,S]=k(m,g);return w.createElement("g",{className:a,transform:`translate(${x}, ${S})`,onClick:t},w.createElement(Bt,{x:0,y:0,fontFamily:r,fontSize:s},c?w.createElement($t,{x:0,dy:"5",fill:n},`${c}: `):null,c?w.createElement("tspan",{fill:i},`${y} `):null,w.createElement($t,{fill:n},`${h}: `),w.createElement("tspan",{fill:i},b)))}render(){return w.createElement(xe,{clip:!1,svgDraw:this.renderSVG,drawOn:["mousemove"]})}}Zt.propTypes={xDisplayFormat:E().func,yDisplayFormat:E().func.isRequired,xLabel:E().string,yLabel:E().oneOfType([E().string,E().func]).isRequired,labelFill:E().string.isRequired,valueFill:E().string,origin:E().oneOfType([E().array,E().func]).isRequired,className:E().string,fontFamily:E().string,fontSize:E().number,onClick:E().func,displayValuesFor:E().func,xAccessor:E().func,yAccessor:E().func},Zt.defaultProps={origin:[0,0],labelFill:"#4682B4",valueFill:"#000000",yDisplayFormat:(0,S.GP)(".2f"),displayValuesFor:It,xAccessor:O.lQ,yAccessor:O.D_,className:"react-stockcharts-tooltip"};class _t extends w.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(e){const{onClick:t,forChart:r,options:s}=this.props;t({chartId:r,...s},e)}render(){const{textFill:e,labelFill:t}=this.props,r="translate("+this.props.origin[0]+", "+this.props.origin[1]+")";return w.createElement("g",{transform:r},w.createElement("line",{x1:0,y1:2,x2:0,y2:28,stroke:this.props.color,strokeWidth:"4px"}),w.createElement(Bt,{x:5,y:11,fontFamily:this.props.fontFamily,fontSize:this.props.fontSize},w.createElement($t,{fill:t},this.props.displayName),w.createElement("tspan",{x:"5",dy:"15",fill:e},this.props.value)),w.createElement("rect",{x:0,y:0,width:55,height:30,onClick:this.handleClick,fill:"none",stroke:"none"}))}}_t.propTypes={origin:E().array.isRequired,color:E().string.isRequired,displayName:E().string.isRequired,value:E().string.isRequired,onClick:E().func,fontFamily:E().string,textFill:E().string,labelFill:E().string,fontSize:E().number,forChart:E().oneOfType([E().number,E().string]).isRequired,options:E().object.isRequired};class Kt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this)}renderSVG(e){const{displayValuesFor:t}=this.props,{chartId:r}=e,{chartConfig:s}=e,{className:n,onClick:i,width:a,fontFamily:o,fontSize:l,textFill:c,labelFill:h}=this.props,{origin:d,displayFormat:u,options:p}=this.props,{chartConfig:{height:m}}=e,g=t(this.props,e),f=s,y=(0,O.ER)(d),[b,v]=y(a,m),[k,x]=f.origin;return w.createElement("g",{transform:`translate(${k+b}, ${x+v})`,className:n},p.map((e,t)=>{const s=g&&e.yAccessor(g),n=`${e.type} (${e.windowSize})`,d=s?u(s):"n/a";return w.createElement(_t,{key:t,origin:[a*t,0],color:e.stroke,displayName:n,value:d,options:e,forChart:r,onClick:i,fontFamily:o,fontSize:l,textFill:c,labelFill:h})}))}render(){return w.createElement(xe,{clip:!1,svgDraw:this.renderSVG,drawOn:["mousemove"]})}}Kt.propTypes={className:E().string,displayFormat:E().func.isRequired,origin:E().array.isRequired,displayValuesFor:E().func,onClick:E().func,textFill:E().string,labelFill:E().string,fontFamily:E().string,fontSize:E().number,width:E().number,options:E().arrayOf(E().shape({yAccessor:E().func.isRequired,type:E().string.isRequired,stroke:E().string.isRequired,windowSize:E().number.isRequired,echo:E().any}))},Kt.defaultProps={className:"react-stockcharts-tooltip react-stockcharts-moving-average-tooltip",displayFormat:(0,S.GP)(".2f"),displayValuesFor:It,origin:[0,10],width:65};class Jt extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this)}renderSVG(e){const{onClick:t,displayFormat:r,yAccessor:s,options:n,textFill:i,labelFill:a}=this.props,{displayValuesFor:o}=this.props,{chartConfig:{width:l,height:c}}=e,h=o(this.props,e);let d,u,p;if(d=u=p="n/a",(0,O.O9)(h)&&(0,O.O9)(s(h))){const e=s(h);d=r(e.top),u=r(e.middle),p=r(e.bottom)}const{origin:m}=this.props,g=(0,O.ER)(m),[f,y]=g(l,c),{sourcePath:b,windowSize:v,multiplier:k,movingAverageType:x}=n,S=`BB(${b}, ${v}, ${k}, ${x}): `,C=`${d}, ${u}, ${p}`;return w.createElement("g",{transform:`translate(${f}, ${y})`,className:this.props.className,onClick:t},w.createElement(Bt,{x:0,y:0,fontFamily:this.props.fontFamily,fontSize:this.props.fontSize},w.createElement($t,{fill:a},S),w.createElement("tspan",{fill:i},C)))}render(){return w.createElement(xe,{clip:!1,svgDraw:this.renderSVG,drawOn:["mousemove"]})}}Jt.propTypes={className:E().string,yAccessor:E().func.isRequired,displayValuesFor:E().func,displayFormat:E().func.isRequired,origin:E().array.isRequired,onClick:E().func,options:E().shape({sourcePath:E().string.isRequired,windowSize:E().number.isRequired,multiplier:E().number.isRequired,movingAverageType:E().string.isRequired}).isRequired,textFill:E().string,labelFill:E().string,fontFamily:E().string,fontSize:E().number},Jt.defaultProps={className:"react-stockcharts-tooltip react-stockcharts-bollingerband-tooltip",displayFormat:(0,S.GP)(".2f"),displayValuesFor:It,origin:[0,10]};class er extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this)}renderSVG(e){const{onClick:t,fontFamily:r,fontSize:s,yAccessor:n,displayFormat:i,className:a}=this.props,{options:o,labelFill:l,textFill:c}=this.props,{displayValuesFor:h}=this.props,{chartConfig:{width:d,height:u}}=e,p=h(this.props,e),m=(0,O.O9)(p)&&n(p),g=m&&i(m)||"n/a",{origin:f}=this.props,y=(0,O.ER)(f),[b,v]=y(d,u),k=`RSI (${o.windowSize}): `;return w.createElement("g",{className:a,transform:`translate(${b}, ${v})`,onClick:t},w.createElement(Bt,{x:0,y:0,fontFamily:r,fontSize:s},w.createElement($t,{fill:l},k),w.createElement("tspan",{fill:c},g)))}render(){return w.createElement(xe,{clip:!1,svgDraw:this.renderSVG,drawOn:["mousemove"]})}}er.propTypes={origin:E().oneOfType([E().array,E().func]).isRequired,options:E().shape({windowSize:E().number.isRequired}).isRequired,className:E().string,fontFamily:E().string,fontSize:E().number,onClick:E().func,yAccessor:E().func.isRequired,displayFormat:E().func.isRequired,displayValuesFor:E().func,textFill:E().string,labelFill:E().string},er.defaultProps={displayFormat:(0,S.GP)(".2f"),displayValuesFor:It,origin:[0,0],className:"react-stockcharts-tooltip"};class tr extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this)}renderSVG(e){const{onClick:t,fontFamily:r,fontSize:s,yAccessor:n,displayFormat:i,label:a}=this.props,{className:o,options:l,appearance:c,labelFill:h}=this.props,{displayValuesFor:d}=this.props,{chartConfig:{width:u,height:p}}=e,m=d(this.props,e),{stroke:g}=c,f=m&&n(m),y=f&&f.K&&i(f.K)||"n/a",b=f&&f.D&&i(f.D)||"n/a",{origin:v}=this.props,k=(0,O.ER)(v),[x,S]=k(u,p);return w.createElement("g",{className:o,transform:`translate(${x}, ${S})`,onClick:t},w.createElement(Bt,{x:0,y:0,fontFamily:r,fontSize:s},w.createElement($t,{fill:h},`${a} %K(`),w.createElement("tspan",{fill:g.kLine},`${l.windowSize}, ${l.kWindowSize}`),w.createElement($t,{fill:h},"): "),w.createElement("tspan",{fill:g.kLine},y),w.createElement($t,{fill:h}," %D ("),w.createElement("tspan",{fill:g.dLine},l.dWindowSize),w.createElement($t,{fill:h},"): "),w.createElement("tspan",{fill:g.dLine},b)))}render(){return w.createElement(xe,{clip:!1,svgDraw:this.renderSVG,drawOn:["mousemove"]})}}tr.propTypes={origin:E().oneOfType([E().array,E().func]).isRequired,className:E().string,fontFamily:E().string,fontSize:E().number,labelFill:E().string,onClick:E().func,yAccessor:E().func.isRequired,options:E().shape({windowSize:E().number.isRequired,kWindowSize:E().number.isRequired,dWindowSize:E().number.isRequired}).isRequired,appearance:E().shape({stroke:{dLine:E().string.isRequired,kLine:E().string.isRequired}.isRequired}).isRequired,displayFormat:E().func.isRequired,displayValuesFor:E().func,label:E().string.isRequired},tr.defaultProps={displayFormat:(0,S.GP)(".2f"),displayValuesFor:It,origin:[0,0],className:"react-stockcharts-tooltip",label:"STO"};class rr extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const r=ar(this.props,t,e),{height:s}=t;if((0,O.pN)(r))return null;!function(e,t,r,s,n){const{margin:i,ratio:a}=r,{bgFill:o,bgOpacity:l}=t,{backgroundShapeCanvas:c,tooltipCanvas:h}=t,d=.5*a+i.left,u=.5*a+i.top;e.save(),e.setTransform(1,0,0,1,0,0),e.scale(a,a),e.translate(d,u);const{x:p,y:m,content:g,centerX:f,pointWidth:y,bgSize:b}=s;e.fillStyle=(0,O.zX)(o,l),e.beginPath(),e.rect(f-y/2,0,y,n),e.fill(),e.translate(p,m),c(t,b,e),h(t,g,e),e.restore()}(e,this.props,this.context,r,s)}render(){return w.createElement(fe,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,drawOn:["mousemove","pan"]})}renderSVG(e){const t=ar(this.props,e);if((0,O.pN)(t))return null;const{bgFill:r,bgOpacity:s,backgroundShapeSVG:n,tooltipSVG:i}=this.props,{bgheight:a,bgwidth:o}=this.props,{height:l}=e,{x:c,y:h,content:d,centerX:u,pointWidth:p,bgSize:m}=t,g=(0,O.O9)(o)&&(0,O.O9)(a)?{width:o,height:a}:m;return w.createElement("g",null,w.createElement("rect",{x:u-p/2,y:0,width:p,height:l,fill:r,opacity:s}),w.createElement("g",{className:"react-stockcharts-tooltip-content",transform:`translate(${c}, ${h})`},n(this.props,g),i(this.props,d)))}}rr.propTypes={chartId:E().oneOfType([E().number,E().string]),yAccessor:E().func,tooltipSVG:E().func,backgroundShapeSVG:E().func,bgwidth:E().number,bgheight:E().number,bgFill:E().string.isRequired,bgOpacity:E().number.isRequired,tooltipContent:E().func.isRequired,origin:E().oneOfType([E().array,E().func]).isRequired,fontFamily:E().string,fontSize:E().number},rr.contextTypes={margin:E().object.isRequired,ratio:E().number.isRequired},rr.defaultProps={tooltipSVG:function({fontFamily:e,fontSize:t,fontFill:r},s){const n=[],i=ir+.9*t;for(let e=0;e<s.y.length;e++){const r=s.y[e],a=i+t*(e+1);n.push(w.createElement("tspan",{key:`L-${e}`,x:nr,y:a,fill:r.stroke},r.label)),n.push(w.createElement("tspan",{key:e},": ")),n.push(w.createElement("tspan",{key:`V-${e}`},r.value))}return w.createElement("text",{fontFamily:e,fontSize:t,fill:r},w.createElement("tspan",{x:nr,y:i},s.x),n)},tooltipCanvas:function({fontFamily:e,fontSize:t,fontFill:r},s,n){const i=ir+.9*t;n.font=`${t}px ${e}`,n.fillStyle=r,n.textAlign="left",n.fillText(s.x,nr,i);for(let e=0;e<s.y.length;e++){const a=s.y[e],o=i+t*(e+1);n.fillStyle=a.stroke||r,n.fillText(a.label,nr,o),n.fillStyle=r,n.fillText(": "+a.value,nr+n.measureText(a.label).width,o)}},origin:function(e,t,r,s){const{chartId:n,yAccessor:i}=e,{mouseXY:a,xAccessor:o,currentItem:l,xScale:c,chartConfig:h,width:d}=t;let u=(0,O.HV)(a);const p=o(l);let m=Math.round(c(p));if((0,O.O9)(n)&&(0,O.O9)(i)&&(0,O.O9)(h)&&(0,O.O9)(h.findIndex)){const e=i(l),t=h.findIndex(e=>e.id===n);u=Math.round(h[t].yScale(e))}return m=function(e,t,r,s){return e<s/2?e+r/2+sr:e-t.width-r/2-sr}(m,r,s,d),u=function(e,t){return e-t.height<=0?e+sr:e-t.height-sr}(u,r),[m,u]},fill:"#D4E2FD",bgFill:"#D4E2FD",bgOpacity:.5,stroke:"#9B9BFF",fontFill:"#000000",opacity:.8,backgroundShapeSVG:function({fill:e,stroke:t,opacity:r},{height:s,width:n}){return w.createElement("rect",{height:s,width:n,fill:e,opacity:r,stroke:t})},backgroundShapeCanvas:function(e,{width:t,height:r},s){const{fill:n,stroke:i,opacity:a}=e;s.fillStyle=(0,O.zX)(n,a),s.strokeStyle=i,s.beginPath(),s.rect(0,0,t,r),s.fill(),s.stroke()},fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12};const sr=5,nr=10,ir=10;function ar(e,t,r){const{show:s,xScale:n,currentItem:i,plotData:a}=t,{origin:o,tooltipContent:l}=e,{xAccessor:c,displayXAccessor:h}=t;if(!s||(0,O.pN)(i))return;const d=c(i);if(!s||(0,O.pN)(d))return;const u=l({currentItem:i,xAccessor:h}),p=n(d),m=Math.abs(n(c((0,O.HV)(a)))-n(c((0,O.$1)(a))))/(a.length-1),g=function({fontFamily:e,fontSize:t,fontFill:r},s,n){if((0,O.pN)(n)){const e=document.createElement("canvas");n=e.getContext("2d")}n.font=`${t}px ${e}`,n.fillStyle=r,n.textAlign="left";const i=e=>({width:n.measureText(e).width,height:t}),{width:a,height:o}=s.y.map(({label:e,value:t})=>i(`${e}: ${t}`)).reduce((e,t)=>function(...e){return{width:Math.max(...e.map(e=>e.width)),height:(0,R.cz)(e,e=>e.height)}}(e,t),i(String(s.x)));return{width:a+2*nr,height:o+2*ir}}(e,u,r),[f,y]=o(e,t,g,m);return{x:f,y,content:u,centerX:p,pointWidth:m,bgSize:g}}const or=["horizontal","horizontalRows","horizontalInline","vertical","verticalRows"];class lr extends w.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(e){const{onClick:t,forChart:r,options:s}=this.props;t({chartId:r,...s},e)}renderValueNextToLabel(){const{origin:e,yLabel:t,yValue:r,labelFill:s,valueFill:n,withShape:i,fontSize:a,fontFamily:o}=this.props;return w.createElement("g",{transform:`translate(${e[0]}, ${e[1]})`,onClick:this.handleClick},i?w.createElement("rect",{x:"0",y:"-6",width:"6",height:"6",fill:n}):null,w.createElement(Bt,{x:i?8:0,y:0,fontFamily:o,fontSize:a},w.createElement($t,{fill:s},t,": "),w.createElement("tspan",{fill:n},r)))}renderValueBeneathToLabel(){const{origin:e,yLabel:t,yValue:r,labelFill:s,valueFill:n,withShape:i,fontSize:a,fontFamily:o}=this.props;return w.createElement("g",{transform:`translate(${e[0]}, ${e[1]})`,onClick:this.handleClick},i?w.createElement("line",{x1:0,y1:2,x2:0,y2:28,stroke:n,strokeWidth:"4px"}):null,w.createElement(Bt,{x:5,y:11,fontFamily:o,fontSize:a},w.createElement($t,{fill:s},t),w.createElement("tspan",{x:"5",dy:"15",fill:n},r)))}renderInline(){const{yLabel:e,yValue:t,labelFill:r,valueFill:s,fontSize:n,fontFamily:i}=this.props;return w.createElement("tspan",{onClick:this.handleClick,fontFamily:i,fontSize:n},w.createElement($t,{fill:r},e,":"),w.createElement("tspan",{fill:s},t,""))}render(){const{layout:e}=this.props;let t=null;switch(e){case"horizontal":case"vertical":default:t=this.renderValueNextToLabel();break;case"horizontalRows":case"verticalRows":t=this.renderValueBeneathToLabel();break;case"horizontalInline":t=this.renderInline()}return t}}lr.propTypes={origin:E().array.isRequired,yLabel:E().string.isRequired,yValue:E().string.isRequired,onClick:E().func,fontFamily:E().string,labelFill:E().string.isRequired,valueFill:E().string.isRequired,fontSize:E().number,withShape:E().bool,forChart:E().oneOfType([E().number,E().string]).isRequired,options:E().object.isRequired,layout:E().oneOf(or).isRequired},lr.defaultProps={labelFill:"#4682B4",valueFill:"#000000",withShape:!1};class cr extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this)}getPosition(e){const{position:t}=this.props,{height:r,width:s}=e.chartConfig;let n=null,i=null;if(void 0!==t)switch(t){case"topRight":i=[s-20,null],n="end";break;case"bottomLeft":i=[null,r-40];break;case"bottomRight":i=[s-20,r-40],n="end";break;default:i=[null,null]}else i=[null,null];return{xyPos:i,textAnchor:n}}renderSVG(e){const{displayValuesFor:t}=this.props,{chartId:r}=e,{className:s,onClick:n,width:i,verticalSize:a,fontFamily:o,fontSize:l,layout:c}=this.props,{origin:h,displayFormat:d,options:u}=this.props,p=t(this.props,e),{xyPos:m,textAnchor:g}=this.getPosition(e),f=null!=m&&null!=m[0]?m[0]:h[0],y=null!=m&&null!=m[1]?m[1]:h[1],b=u.map((e,t)=>{const s=p&&e.yAccessor(p),h=s?d(s):"n/a";return w.createElement(lr,{key:t,layout:c,origin:"horizontal"===c||"horizontalRows"===c?[i*t,0]:"vertical"===c?[0,a*t]:"verticalRows"===c?[0,2.3*a*t]:[0,0],yLabel:e.yLabel,yValue:h,options:e,forChart:r,onClick:n,fontFamily:o,fontSize:l,labelFill:e.labelFill,valueFill:e.valueFill,withShape:e.withShape})});return w.createElement("g",{transform:`translate(${f}, ${y})`,className:s,textAnchor:g},"horizontalInline"===c?w.createElement(Bt,{x:0,y:0,fontFamily:o,fontSize:l},b):b)}render(){return w.createElement(xe,{clip:!1,svgDraw:this.renderSVG,drawOn:["mousemove"]})}}cr.propTypes={className:E().string,layout:E().oneOf(or).isRequired,position:E().oneOf(["topRight","bottomLeft","bottomRight"]),displayFormat:E().func.isRequired,origin:E().array.isRequired,displayValuesFor:E().func,onClick:E().func,fontFamily:E().string,fontSize:E().number,width:E().number,verticalSize:E().number,options:E().arrayOf(E().shape({yLabel:E().oneOfType([E().string,E().func]).isRequired,yAccessor:E().func.isRequired,labelFill:E().string,valueFill:E().string,withShape:E().bool}))},cr.defaultProps={className:"react-stockcharts-tooltip react-stockcharts-group-tooltip",layout:"horizontal",displayFormat:(0,S.GP)(".2f"),displayValuesFor:It,origin:[0,0],width:60,verticalSize:13};var hr=r(75781);class dr extends w.Component{constructor(e){super(e),this.handleDragStartMouse=this.handleDragStartMouse.bind(this),this.handleDragStartTouch=this.handleDragStartTouch.bind(this),this.handleDrag=this.handleDrag.bind(this),this.handleDragEnd=this.handleDragEnd.bind(this),this.handleRightClick=this.handleRightClick.bind(this),this.saveNode=this.saveNode.bind(this),this.state={startPosition:null}}saveNode(e){this.node=e}handleRightClick(e){e.stopPropagation(),e.preventDefault();const{onContextMenu:t}=this.props,r=(0,O.jQ)(e,this.node.getBoundingClientRect());(0,Y.A)((0,O.mK)(this.node)).on(O.Xd,null).on(O.du,null),this.setState({startPosition:null}),t(r,e),this.contextMenuClicked=!0}handleDragStartMouse(e){this.mouseInteraction=!0;const{getScale:t,getMoreProps:r}=this.props,s=t(r());if(this.dragHappened=!1,s.invert){(0,Y.A)((0,O.mK)(this.node)).on(O.Xd,this.handleDrag,!1).on(O.du,this.handleDragEnd,!1);const t=(0,O.jQ)(e);this.setState({startPosition:{startXY:t,startScale:s}})}e.preventDefault()}handleDragStartTouch(e){this.mouseInteraction=!1;const{getScale:t,getMoreProps:r}=this.props,s=t(r());if(this.dragHappened=!1,1===e.touches.length&&s.invert){(0,Y.A)((0,O.mK)(this.node)).on(O.vx,this.handleDrag).on(O.t2,this.handleDragEnd);const t=(0,O.L6)((0,O.Sq)(e.touches[0]),e);this.setState({startPosition:{startXY:t,startScale:s}})}}handleDrag(){const{startPosition:e}=this.state,{getMouseDelta:t,inverted:r}=this.props;if(this.dragHappened=!0,(0,O.O9)(e)){const{startScale:s}=e,{startXY:n}=e,i=t(n,this.mouseInteraction?(0,$.A)(this.node):(0,j.A)(this.node)[0]),a=(0,R.i2)(s.range()),o=s.range().map(e=>r?e-(0,O._S)(e-a)*i:e+(0,O._S)(e-a)*i),l=o.map(s.invert);if((0,O._S)((0,O.HV)(s.range())-(0,O.$1)(s.range()))===(0,O._S)((0,O.HV)(o)-(0,O.$1)(o))){const{axisZoomCallback:e}=this.props;e(l)}}}handleDragEnd(){if(!this.dragHappened)if(this.clicked){const e=G.f0,t=this.mouseInteraction?(0,$.A)(this.node):(0,j.A)(this.node)[0],{onDoubleClick:r}=this.props;r(t,e)}else this.clicked=!0,setTimeout(()=>{this.clicked=!1},300);(0,Y.A)((0,O.mK)(this.node)).on(O.Xd,null).on(O.du,null).on(O.vx,null).on(O.t2,null),this.setState({startPosition:null})}render(){const{bg:e,className:t,zoomCursorClassName:r}=this.props,s=(0,O.O9)(this.state.startPosition)?r:"react-stockcharts-default-cursor";return w.createElement("rect",{className:`react-stockcharts-enable-interaction ${s} ${t}`,ref:this.saveNode,x:e.x,y:e.y,opacity:0,height:e.h,width:e.w,onContextMenu:this.handleRightClick,onMouseDown:this.handleDragStartMouse,onTouchStart:this.handleDragStartTouch})}}dr.propTypes={innerTickSize:E().number,outerTickSize:E().number,tickFormat:E().func,tickPadding:E().number,tickSize:E().number,ticks:E().number,tickValues:E().array,showDomain:E().bool,showTicks:E().bool,className:E().string,axisZoomCallback:E().func,inverted:E().bool,bg:E().object.isRequired,zoomCursorClassName:E().string.isRequired,getMoreProps:E().func.isRequired,getScale:E().func.isRequired,getMouseDelta:E().func.isRequired,onDoubleClick:E().func.isRequired,onContextMenu:E().func.isRequired},dr.defaultProps={onDoubleClick:O.lQ,onContextMenu:O.lQ,inverted:!0};const ur=dr;class pr extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.saveNode=this.saveNode.bind(this),this.getMoreProps=this.getMoreProps.bind(this)}saveNode(e){this.node=e}getMoreProps(){return this.node.getMoreProps()}drawOnCanvas(e,t){const{showDomain:r,showTicks:s,transform:n,range:i,getScale:a}=this.props;e.save(),e.translate(n[0],n[1]),r&&function(e,t,r){const{orient:s,outerTickSize:n,stroke:i,strokeWidth:a,opacity:o}=t,l="top"===s||"left"===s?-1:1,c="bottom"===s||"top"===s;e.lineWidth=a,e.strokeStyle=(0,O.zX)(i,o),e.beginPath(),c?(e.moveTo((0,O.$1)(r),l*n),e.lineTo((0,O.$1)(r),0),e.lineTo((0,O.HV)(r),0),e.lineTo((0,O.HV)(r),l*n)):(e.moveTo(l*n,(0,O.$1)(r)),e.lineTo(0,(0,O.$1)(r)),e.lineTo(0,(0,O.HV)(r)),e.lineTo(l*n,(0,O.HV)(r))),e.stroke()}(e,this.props,i),s&&function(e,t){const{tickStroke:r,tickStrokeOpacity:s,tickLabelFill:n}=t,{textAnchor:i,fontSize:a,fontFamily:o,fontWeight:l,ticks:c,showTickLabel:h}=t;e.strokeStyle=(0,O.zX)(r,s),e.fillStyle=r,c.forEach(r=>{!function(e,t,r){const{tickStrokeWidth:s,tickStrokeDasharray:n}=r;e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=s,e.setLineDash((0,O.KA)(n).split(",")),e.stroke()}(e,r,t)}),e.font=`${l} ${a}px ${o}`,e.fillStyle=n,e.textAlign="middle"===i?"center":i,h&&c.forEach(r=>{!function(e,t,r){const{canvas_dy:s,format:n}=r;t.hideLabel||(e.beginPath(),e.fillText(n(t.value),t.labelX,t.labelY+s))}(e,r,t)})}(e,mr(this.props,a(t))),e.restore()}renderSVG(e){const{className:t}=this.props,{showDomain:r,showTicks:s,range:n,getScale:i}=this.props,a=s?function(e,t){const r=mr(e,t),{tickLabelFill:s,tickStroke:n,tickStrokeOpacity:i,tickStrokeWidth:a,tickStrokeDasharray:o,textAnchor:l}=r,{fontSize:c,fontFamily:h,fontWeight:d,ticks:u,format:p}=r,{dy:m}=r;return w.createElement("g",null,u.map((e,t)=>w.createElement(gr,{key:t,tickStroke:n,tickLabelFill:s,tickStrokeWidth:a,tickStrokeOpacity:i,tickStrokeDasharray:o,dy:m,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,labelX:e.labelX,labelY:e.labelY,textAnchor:l,fontSize:c,fontWeight:d,fontFamily:h},p(e.value))))}(this.props,i(e)):null,o=r?function(e,t){const{orient:r,outerTickSize:s}=e,{domainClassName:n,fill:i,stroke:a,strokeWidth:o,opacity:l}=e,c="top"===r||"left"===r?-1:1;let h;return h="bottom"===r||"top"===r?"M"+t[0]+","+c*s+"V0H"+t[1]+"V"+c*s:"M"+c*s+","+t[0]+"H0V"+t[1]+"H"+c*s,w.createElement("path",{className:n,d:h,fill:i,opacity:l,stroke:a,strokeWidth:o})}(this.props,n):null;return w.createElement("g",{className:t},a,o)}render(){const{bg:e,axisZoomCallback:t,className:r,zoomCursorClassName:s,zoomEnabled:n,getScale:i,inverted:a}=this.props,{transform:o,getMouseDelta:l,edgeClip:c}=this.props,{onContextMenu:h,onDoubleClick:d}=this.props,u=n?w.createElement(ur,{bg:e,getScale:i,getMoreProps:this.getMoreProps,getMouseDelta:l,axisZoomCallback:t,className:r,zoomCursorClassName:s,inverted:a,onContextMenu:h,onDoubleClick:d}):null;return w.createElement("g",{transform:`translate(${o[0]}, ${o[1]})`},u,w.createElement(xe,{ref:this.saveNode,canvasToDraw:ye,clip:!1,edgeClip:c,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,drawOn:["pan"]}))}}function mr(e,t){const{orient:r,innerTickSize:s,tickFormat:n,tickPadding:i,tickLabelFill:a,tickStrokeWidth:o,tickStrokeDasharray:l,fontSize:c,fontFamily:h,fontWeight:d,showTicks:u,flexTicks:p,showTickLabel:m,customLevels:g}=e,{ticks:f,tickValues:y,tickStroke:b,tickStrokeOpacity:v,tickInterval:k,tickIntervalFunction:x}=e;let S;if((0,O.O9)(y))S="function"==typeof y?y(t.domain()):y;else if((0,O.O9)(k)){const[e,r]=t.domain(),s=(0,R.y1)(e,r,(r-e)/k);S=x?x(e,r,k):s}else S=(0,O.O9)(t.ticks)?t.ticks(f,!0,g):t.domain();const C=t.tickFormat?t.tickFormat(f):O.D_,w=(0,O.pN)(n)?C:e=>n(e)||"",D="top"===r||"left"===r?-1:1,E=Math.max(s,0)+i;let T,F,P,q;if("bottom"===r||"top"===r){if(F=D<0?"0em":".71em",P=D<0?0:.71*c,q="middle",T=S.map(e=>{const r=(0,O.Gv)(e)?e.index:e,n=Math.round(t(r));return{value:r,x1:n,y1:0,x2:n,y2:D*s,labelX:n,labelY:D*E,hideLabel:(0,O.Gv)(e)}}),u&&p){const e=T.map(e=>({id:e.value,value:e.value,fy:e.y2,origX:e.x1})),t=(0,hr.tX)(e).force("x",(0,hr.KS)(e=>e.origX).strength(1)).force("collide",(0,hr.eR)(22)).stop();for(let e=0;e<100;++e)t.tick();T=(0,O.LI)().combine((e,t)=>Math.abs(t.x-t.origX)>.01?{...e,x2:t.x,labelX:t.x}:e)(T,e)}}else T=S.map(e=>{const r=Math.round(t(e));return{value:e,x1:0,y1:r,x2:D*s,y2:r,labelX:D*E,labelY:r}}),F=".32em",P=.32*c,q=D<0?"end":"start";return{ticks:T,scale:t,tickStroke:b,tickLabelFill:a||b,tickStrokeOpacity:v,tickStrokeWidth:o,tickStrokeDasharray:l,dy:F,canvas_dy:P,textAnchor:q,fontSize:c,fontFamily:h,fontWeight:d,format:w,showTickLabel:m}}function gr(e){const{tickLabelFill:t,tickStroke:r,tickStrokeOpacity:s,tickStrokeDasharray:n,tickStrokeWidth:i,textAnchor:a,fontSize:o,fontFamily:l,fontWeight:c}=e,{x1:h,y1:d,x2:u,y2:p,labelX:m,labelY:g,dy:f}=e;return w.createElement("g",{className:"tick"},w.createElement("line",{shapeRendering:"crispEdges",opacity:s,stroke:r,strokeWidth:i,strokeDasharray:(0,O.KA)(n),x1:h,y1:d,x2:u,y2:p}),w.createElement("text",{dy:f,x:m,y:g,fill:t,fontSize:o,fontWeight:c,fontFamily:l,textAnchor:a},e.children))}pr.propTypes={innerTickSize:E().number,outerTickSize:E().number,tickFormat:E().func,tickPadding:E().number,tickSize:E().number,ticks:E().number,tickLabelFill:E().string,tickStroke:E().string,tickStrokeOpacity:E().number,tickStrokeWidth:E().number,tickStrokeDasharray:E().oneOf(O.uF),tickValues:E().oneOfType([E().array,E().func]),tickInterval:E().number,tickIntervalFunction:E().func,showDomain:E().bool,showTicks:E().bool,className:E().string,axisZoomCallback:E().func,zoomEnabled:E().bool,inverted:E().bool,zoomCursorClassName:E().string,transform:E().arrayOf(E().number).isRequired,range:E().arrayOf(E().number).isRequired,getMouseDelta:E().func.isRequired,getScale:E().func.isRequired,bg:E().object.isRequired,edgeClip:E().bool.isRequired,onContextMenu:E().func,onDoubleClick:E().func,customLevels:E().array},pr.defaultProps={zoomEnabled:!1,zoomCursorClassName:"",edgeClip:!1},gr.propTypes={children:E().string.isRequired,x1:E().number.isRequired,y1:E().number.isRequired,x2:E().number.isRequired,y2:E().number.isRequired,labelX:E().number.isRequired,labelY:E().number.isRequired,dy:E().string.isRequired,tickStroke:E().string,tickLabelFill:E().string,tickStrokeWidth:E().number,tickStrokeOpacity:E().number,tickStrokeDasharray:E().oneOf(O.uF),textAnchor:E().string,fontSize:E().number,fontFamily:E().string,fontWeight:E().oneOfType([E().string,E().number])};const fr=pr;function yr(){return yr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},yr.apply(null,arguments)}class br extends w.Component{constructor(e,t){super(e,t),this.axisZoomCallback=this.axisZoomCallback.bind(this)}axisZoomCallback(e){const{xAxisZoom:t}=this.context;t(e)}render(){const{showTicks:e}=this.props,t=function(e,t){const{axisAt:r,xZoomHeight:s,orient:n}=e,{chartConfig:{width:i,height:a}}=t;let o;return o="top"===r?0:"bottom"===r?a:"middle"===r?a/2:r,{transform:[0,o],range:[0,i],getScale:vr,bg:{x:0,y:"top"===n?-s:0,h:s,w:i}}}(this.props,this.context);return w.createElement(fr,yr({},this.props,t,{x:!0,zoomEnabled:this.props.zoomEnabled&&e,axisZoomCallback:this.axisZoomCallback,zoomCursorClassName:"react-stockcharts-ew-resize-cursor"}))}}function vr(e){const{xScale:t,width:r}=e;if(t.invert){const e=[0,r],s=e.map(t.invert);return t.copy().domain(s).range(e)}return t}br.propTypes={axisAt:E().oneOfType([E().oneOf(["top","bottom","middle"]),E().number]).isRequired,orient:E().oneOf(["top","bottom"]).isRequired,innerTickSize:E().number,outerTickSize:E().number,tickFormat:E().func,tickPadding:E().number,tickSize:E().number,ticks:E().number,tickValues:E().array,showTicks:E().bool,className:E().string,zoomEnabled:E().bool,onContextMenu:E().func,onDoubleClick:E().func,customLevels:E().array},br.defaultProps={showTicks:!0,showTickLabel:!0,showDomain:!0,className:"react-stockcharts-x-axis",ticks:10,outerTickSize:0,fill:"none",stroke:"#000000",strokeWidth:1,opacity:1,domainClassName:"react-stockcharts-axis-domain",innerTickSize:5,tickPadding:6,tickStroke:"#000000",tickStrokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fontWeight:400,xZoomHeight:25,zoomEnabled:!0,getMouseDelta:(e,t)=>e[0]-t[0],customLevels:null},br.contextTypes={chartConfig:E().object.isRequired,xAxisZoom:E().func.isRequired};const kr=br;function xr(){return xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},xr.apply(null,arguments)}class Sr extends w.Component{constructor(e,t){super(e,t),this.axisZoomCallback=this.axisZoomCallback.bind(this)}axisZoomCallback(e){const{chartId:t,yAxisZoom:r}=this.context;r(t,e)}render(){const{zoomEnabled:e,...t}=function(e,t){const{axisAt:r,yZoomWidth:s,orient:n}=e,{chartConfig:{width:i,height:a}}=t;let o;return o="left"===r?0:"right"===r?i:"middle"===r?i/2:r,{transform:[o,0],range:[0,a],getScale:Cr,bg:{x:"left"===n?-s:0,y:0,h:a,w:s},zoomEnabled:t.chartConfig.yPan}}(this.props,this.context);return w.createElement(fr,xr({},this.props,t,{zoomEnabled:this.props.zoomEnabled&&e,edgeClip:!0,axisZoomCallback:this.axisZoomCallback,zoomCursorClassName:"react-stockcharts-ns-resize-cursor"}))}}function Cr(e){const{yScale:t,flipYScale:r,height:s}=e.chartConfig;if(t.invert){const e=r?[0,s]:[s,0],n=e.map(t.invert);return t.copy().domain(n).range(e)}return t}Sr.propTypes={axisAt:E().oneOfType([E().oneOf(["left","right","middle"]),E().number]).isRequired,orient:E().oneOf(["left","right"]).isRequired,innerTickSize:E().number,outerTickSize:E().number,tickFormat:E().func,tickPadding:E().number,tickSize:E().number,ticks:E().number,yZoomWidth:E().number,tickValues:E().array,showTicks:E().bool,className:E().string,zoomEnabled:E().bool,onContextMenu:E().func,onDoubleClick:E().func},Sr.defaultProps={showTicks:!0,showTickLabel:!0,showDomain:!0,className:"react-stockcharts-y-axis",ticks:10,outerTickSize:0,domainClassName:"react-stockcharts-axis-domain",fill:"none",stroke:"#FFFFFF",strokeWidth:1,opacity:1,innerTickSize:5,tickPadding:6,tickStroke:"#000000",tickStrokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fontWeight:400,yZoomWidth:40,zoomEnabled:!0,getMouseDelta:(e,t)=>e[1]-t[1]},Sr.contextTypes={yAxisZoom:E().func.isRequired,chartId:E().oneOfType([E().number,E().string]).isRequired,chartConfig:E().object.isRequired};const wr=Sr;class Dr extends w.Component{constructor(e){super(e),this.state={type:this.props.type},this.handleTypeChange=this.handleTypeChange.bind(this)}handleTypeChange(e){this.setState({type:e.target.value})}render(){return w.createElement("div",null,w.createElement("label",null,"Type: "),w.createElement("select",{name:"type",id:"type",onChange:this.handleTypeChange,value:this.state.type},w.createElement("option",{value:"svg"},"svg"),w.createElement("option",{value:"hybrid"},"canvas + svg")),w.createElement("div",{style:this.props.style},this.props.children(this.state.type)))}}Dr.propTypes={type:E().oneOf(["svg","hybrid"]),children:E().func.isRequired,style:E().object.isRequired},Dr.defaultProps={type:"hybrid",style:{}};var Er=r(6584),Rr=r.n(Er);const Or={save(e,t,r,s="",n="",i){Rr().svgAsDataUri(t.getElementsByTagName("svg")[0],{},function(a){let o=new Image;o.onload=function(){let a=e.createElement("canvas");a.width=o.width,a.height=o.height;let l=a.getContext("2d");if((0,O.O9)(r)&&(l.fillStyle=r,l.fillRect(0,0,a.width,a.height)),""!==s){l.fillStyle="rgba(105, 105, 105, 0.5)",l.font=n+" sans-serif";const e=l.measureText(s).width;l.fillText(s,a.width/2-e/2,a.height/2)}const c=t.getElementsByTagName("canvas");for(let e=0;e<c.length;e++){const t=c[e];if((0,O.O9)(t)){const e=t.parentNode.parentNode.getBoundingClientRect(),r=t.getBoundingClientRect();l.drawImage(t,r.left-e.left+0,r.top-e.top+0)}}l.drawImage(o,0,0),i(a.toDataURL("image/png"))},o.src=a})},saveWithWhiteBG(e,t,r){return this.saveWithBG(e,t,"white",r)},saveWithDarkBG(e,t,r){return this.saveWithBG(e,t,"#303030",r)},saveWithBG(e,t,r,s){return this.save(e,t,r,s)},saveChartAsImage(e){this.saveWithWhiteBG(document,e,function(e){const t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","Chart.png"),document.body.appendChild(t),t.addEventListener("click",function(){t.parentNode.removeChild(t)}),t.click()})}},Tr=Or;function Fr(){return Fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Fr.apply(null,arguments)}r(54392);const Pr={yearFormat:"%Y",quarterFormat:"%b %Y",monthFormat:"%b",weekFormat:"%d",dayFormat:"%d",hourFormat:"%H:%M",minuteFormat:"%H:%M",secondFormat:"%I:%M:%S %p",milliSecondFormat:"%L"},qr=[(e,t,r)=>e.startOfYear&&t.getFullYear()%12==0&&"yearFormat",(e,t,r)=>e.startOfYear&&t.getFullYear()%4==0&&"yearFormat",(e,t,r)=>e.startOfYear&&t.getFullYear()%2==0&&"yearFormat",(e,t,r)=>e.startOfYear&&"yearFormat",(e,t,r)=>e.startOfQuarter&&"quarterFormat",(e,t,r)=>e.startOfMonth&&"monthFormat",(e,t,r)=>e.startOfWeek&&"weekFormat",(e,t,r)=>e.startOfDay&&r%2==0&&"dayFormat",(e,t,r)=>e.startOfDay&&"dayFormat",(e,t,r)=>e.startOfHalfDay&&"hourFormat",(e,t,r)=>e.startOfQuarterDay&&"hourFormat",(e,t,r)=>e.startOfEighthOfADay&&"hourFormat",(e,t,r)=>e.startOfHour&&t.getHours()%2==0&&"hourFormat",(e,t,r)=>e.startOfHour&&"hourFormat",(e,t,r)=>e.startOf30Minutes&&"minuteFormat",(e,t,r)=>e.startOf15Minutes&&"minuteFormat",(e,t,r)=>e.startOf5Minutes&&"minuteFormat",(e,t,r)=>e.startOfMinute&&"minuteFormat",(e,t,r)=>e.startOf30Seconds&&"secondFormat",(e,t,r)=>"secondFormat"],Ar=qr.length-1;function Nr(e,t,r=(0,x.m4)()){if((0,O.pN)(e))throw new Error("Use the discontinuousTimeScaleProvider to create financeDiscontinuousScale");function s(e){return r(e)}return s.invert=function(e){const t=r.invert(e);return Math.round(1e4*t)/1e4},s.domain=function(e){return arguments.length?(r.domain(e),s):r.domain()},s.range=function(e){return arguments.length?(r.range(e),s):r.range()},s.rangeRound=function(e){return r.range(e)},s.clamp=function(e){return arguments.length?(r.clamp(e),s):r.clamp()},s.interpolate=function(e){return arguments.length?(r.interpolate(e),s):r.interpolate()},s.ticks=function(t,s,n){const i=r.ticks(t),a=(0,T.Tj)(),[o,l]=r.domain(),c=Math.max(Math.ceil(o),(0,O.d5)(e).index)+Math.abs((0,O.d5)(e).index),h=Math.min(Math.floor(l),(0,O.HV)(e).index)+Math.abs((0,O.d5)(e).index);Math.floor(l);const d=Math.ceil((h-c)/(l-o)*i.length);for(let t=Ar;t>=0;t--){const r=a.get(t),s=(0,O.pN)(r)?[]:r.slice();for(let r=c;r<=h;r++)e[r].level===t&&s.push(e[r]);a.set(t,s)}let u=[];for(let e=Ar;e>=0&&!(a.get(e).length+u.length>1.5*d);e--)u=u.concat(a.get(e).map(e=>e.index));null!==n&&n.map(e=>{u=u.concat(a.get(e))});const p=[...new Set(u)].sort(R.V_);if(!s&&h-c>p.length){const t=(0,T.hZ)(p),r=Math.abs((0,O.d5)(e).index),s=Math.ceil(1.5*(i.length>0?((0,O.HV)(i)-(0,O.d5)(i))/i.length/4:1));for(let n=0;n<p.length-1;n++)for(let i=n+1;i<p.length;i++)p[i]-p[n]<=s&&t.remove(e[p[n]+r].level>=e[p[i]+r].level?p[i]:p[n]);const n=t.values().map(e=>parseInt(e,10));return n}return p},s.tickFormat=function(){return function(t){const r=Math.abs((0,O.d5)(e).index),{format:s,date:n}=e[Math.floor(t+r)];return s(n)}},s.value=function(t){const r=Math.abs((0,O.d5)(e).index);if((0,O.O9)(e[Math.floor(t+r)])){const{date:s}=e[Math.floor(t+r)];return s}},s.nice=function(e){return r.nice(e),s},s.index=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return Nr(e,t,r.copy())},s}function Mr(e,t,r,s){return qr.map((n,i)=>({level:qr.length-i-1,format:s[n(e,t,r)]})).find(e=>!!e.format)}const Wr=(0,O.vT)().windowSize(2).undefinedValue((e,t,{initialIndex:r,formatters:s})=>{const n=r,i={date:e.getTime(),startOf30Seconds:!1,startOfMinute:!1,startOf5Minutes:!1,startOf15Minutes:!1,startOf30Minutes:!1,startOfHour:!1,startOfEighthOfADay:!1,startOfQuarterDay:!1,startOfHalfDay:!1,startOfDay:!0,startOfWeek:!1,startOfMonth:!1,startOfQuarter:!1,startOfYear:!1},a=Mr(i,e,n,s);return{...i,index:n,...a}}),Vr=Wr.accumulator(([e,t],r,s,{initialIndex:n,formatters:i})=>{const a=t.getSeconds()%30==0,o=t.getMinutes()!==e.getMinutes(),l=o&&t.getMinutes()%5<=e.getMinutes()%5,c=o&&t.getMinutes()%15<=e.getMinutes()%15,h=o&&t.getMinutes()%30<=e.getMinutes()%30,d=t.getHours()!==e.getHours(),u=d&&t.getHours()%3==0,p=d&&t.getHours()%6==0,m=d&&t.getHours()%12==0,g=t.getDay()!==e.getDay(),f=t.getDay()<e.getDay(),y=t.getMonth()!==e.getMonth(),b=y&&t.getMonth()%3<=e.getMonth()%3,v=t.getFullYear()!==e.getFullYear(),k={date:t.getTime(),startOf30Seconds:a,startOfMinute:o,startOf5Minutes:l,startOf15Minutes:c,startOf30Minutes:h,startOfHour:d,startOfEighthOfADay:u,startOfQuarterDay:p,startOfHalfDay:m,startOfDay:g,startOfWeek:f,startOfMonth:y,startOfQuarter:b,startOfYear:v},x=Mr(k,t,r,i);return null==x&&console.log(k),{...k,index:r+n,...x}});function Hr(e,t,r,s){return function(n){const i=e(t);return{index:Vr.source(i).misc({initialIndex:r,formatters:s})(n).map(e=>{const{format:t}=e;return{index:e.index,level:e.level,date:new Date(e.date),format:(0,C.DC)(t)}})}}}const zr=function(){let e,t=0,r=O.D_,s=e=>e.date,n=e=>e.idx,i=(e,t)=>({...e,idx:t}),a=Pr,o=function(o){let l=e;(0,O.pN)(l)&&(l=Hr(r,s,t,a)(o).index);const c=l,h=Nr(c);return{data:(0,O.LI)().combine(i)(o,c),xScale:h,xAccessor:e=>e&&n(e).index,displayXAccessor:r(s)}};return o.initialIndex=function(e){return arguments.length?(t=e,o):t},o.inputDateAccessor=function(e){return arguments.length?(s=e,o):s},o.indexAccessor=function(e){return arguments.length?(n=e,o):n},o.indexMutator=function(e){return arguments.length?(i=e,o):i},o.withIndex=function(t){return arguments.length?(e=t,o):e},o.utc=function(){return r=e=>t=>{const r=e(t),s=60*r.getTimezoneOffset()*1e3;return new Date(r.getTime()+s)},o},o.setLocale=function(e,t=null){return e&&(0,C.Ay)(e),t&&(a=t),o},o.indexCalculator=function(){return Hr(r,s,t,a)},o}();function Ir(e){console.log(e);const{className:t}=e,r=Lr(e);if(null===r)return null;let s,n,i;if((0,O.O9)(r.line)&&(s=w.createElement("line",{className:"react-stockcharts-cross-hair",strokeOpacity:r.line.opacity,stroke:r.line.stroke,strokeDasharray:(0,O.KA)(r.line.strokeDasharray),x1:r.line.x1,y1:r.line.y1,x2:r.line.x2,y2:r.line.y2})),(0,O.O9)(r.coordinateBase)){const{rectWidth:e,rectHeight:t,arrowWidth:s}=r.coordinateBase,a="left"===r.orient?`M0,0L0,${t}L${e},${t}L${e+s},10L${e},0L0,0L0,0`:`M0,${s}L${s},${t}L${e+s},${t}L${e+s},0L${s},0L0,${s}`;n="left"===r.orient||"right"===r.orient?w.createElement("g",{key:1,transform:`translate(${r.coordinateBase.edgeXRect},${r.coordinateBase.edgeYRect})`},w.createElement("path",{d:a,className:"react-stockchart-text-background",height:t,width:e,stroke:r.coordinateBase.stroke,strokeLinejoin:"miter",strokeOpacity:r.coordinateBase.strokeOpacity,strokeWidth:r.coordinateBase.strokeWidth,fill:r.coordinateBase.fill,fillOpacity:r.coordinateBase.opacity})):w.createElement("rect",{key:1,className:"react-stockchart-text-background",x:r.coordinateBase.edgeXRect,y:r.coordinateBase.edgeYRect,height:t,width:e,fill:r.coordinateBase.fill,opacity:r.coordinateBase.opacity}),i=w.createElement("text",{key:2,x:r.coordinate.edgeXText,y:r.coordinate.edgeYText,textAnchor:r.coordinate.textAnchor,fontFamily:r.coordinate.fontFamily,fontSize:r.coordinate.fontSize,dy:".32em",fill:r.coordinate.textFill},r.coordinate.displayCoordinate)}return w.createElement("g",{className:t},s,n,i)}function Lr(e){const{coordinate:t,show:r,type:s,orient:n,edgeAt:i,hideLine:a,lineStrokeDasharray:o}=e,{fill:l,opacity:c,fontFamily:h,fontSize:d,textFill:u,lineStroke:p,lineOpacity:m}=e,{stroke:g,strokeOpacity:f,strokeWidth:y}=e,{arrowWidth:b,rectWidth:v,rectHeight:k,rectRadius:x}=e,{x1:S,y1:C,x2:w,y2:D,dx:E}=e;if(!r)return null;let R,T;if((0,O.O9)(t)){let e,r,a,o;if("horizontal"===s)e=E+("right"===n?i+1:i-v-1),r=C-k/2-y,a=E+("right"===n?i+v/2:i-v/2),o=C;else{const t="bottom"===n?y-1:1-y;e=S-v/2,r=("bottom"===n?i:i-k)+t,a=S,o=("bottom"===n?i+k/2:i-k/2)+t}R={edgeXRect:e,edgeYRect:r,rectHeight:k+y,rectWidth:v,rectRadius:x,fill:l,opacity:c,arrowWidth:b,stroke:g,strokeOpacity:f,strokeWidth:y},T={edgeXText:a,edgeYText:o,textAnchor:"middle",fontFamily:h,fontSize:d,textFill:u,displayCoordinate:t}}return{coordinateBase:R,coordinate:T,line:a?void 0:{opacity:m,stroke:p,strokeDasharray:o,x1:S,y1:C,x2:w,y2:D},orient:n}}function Xr(e,t){const{fontSize:r,fontFamily:s}=t;e.font=`${r}px ${s}`,e.textBaseline="middle";const n=Math.round(e.measureText(t.coordinate).width+10),i=Lr({...t,rectWidth:n});if(null!==i){if((0,O.O9)(i.line)){const t=(0,O.KA)(i.line.strokeDasharray).split(",").map(e=>+e);e.setLineDash(t),e.strokeStyle=(0,O.zX)(i.line.stroke,i.line.opacity),e.lineWidth=1,e.beginPath(),e.moveTo(i.line.x1,i.line.y1),e.lineTo(i.line.x2,i.line.y2),e.stroke()}if(e.setLineDash([]),(0,O.O9)(i.coordinateBase)){const{rectWidth:t,rectHeight:r,rectRadius:s,arrowWidth:n}=i.coordinateBase;e.fillStyle=(0,O.zX)(i.coordinateBase.fill,i.coordinateBase.opacity),(0,O.O9)(i.coordinateBase.stroke)&&(e.strokeStyle=(0,O.zX)(i.coordinateBase.stroke,i.coordinateBase.strokeOpacity),e.lineWidth=i.coordinateBase.strokeWidth);let a=i.coordinateBase.edgeXRect;const o=i.coordinateBase.edgeYRect,l=r/2;e.beginPath(),s?function(e,t,r,s,n,i){e.beginPath(),e.moveTo(t+i,r),e.lineTo(t+s-i,r),e.quadraticCurveTo(t+s,r,t+s,r+i),e.lineTo(t+s,r+n-i),e.quadraticCurveTo(t+s,r+n,t+s-i,r+n),e.lineTo(t+i,r+n),e.quadraticCurveTo(t,r+n,t,r+n-i),e.lineTo(t,r+i),e.quadraticCurveTo(t,r,t+i,r),e.closePath()}(e,a,o,t,r,s):"right"===i.orient?(a-=n,e.moveTo(a,o+l),e.lineTo(a+n,o),e.lineTo(a+t+n,o),e.lineTo(a+t+n,o+r),e.lineTo(a+n,o+r),e.closePath()):"left"===i.orient?(e.moveTo(a,o),e.lineTo(a+t,o),e.lineTo(a+t+n,o+l),e.lineTo(a+t,o+r),e.lineTo(a,o+r),e.closePath()):e.rect(a,o,t,r),e.fill(),(0,O.O9)(i.coordinateBase.stroke)&&e.stroke(),e.fillStyle=i.coordinate.textFill,e.textAlign="middle"===i.coordinate.textAnchor?"center":i.coordinate.textAnchor,e.fillText(i.coordinate.displayCoordinate,i.coordinate.edgeXText,i.coordinate.edgeYText)}}}class Br extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const r=Yr(this.props,t);Xr(e,{...this.props,...r})}renderSVG(e){const t=Yr(this.props,e);return Ir({...this.props,...t})}render(){return w.createElement(xe,{edgeClip:!0,clip:!1,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}}function Yr(e,t){const{itemType:r,yAccessor:s}=e,{plotData:n}=t,i="first"===r?(0,O.$1)(n,s):(0,O.HV)(n,s),a=(0,O.O9)(i)?function(e,t,r){const{type:s,displayFormat:n,edgeAt:i,yAxisPad:a,orient:o,lineStroke:l}=e,{yAccessor:c,fill:h,textFill:d,rectHeight:u,rectWidth:p,arrowWidth:m,rectRadius:g}=e,{fontFamily:f,fontSize:y}=e,{stroke:b}=e,{xScale:v,chartConfig:{yScale:k},xAccessor:x,width:S}=t,C=c(r),w=x(r),D=Math.round(v(w)),E=Math.round(k(C)),[R,T]=[0,S],F="left"===i?R-a:T+a;return{coordinate:n(C),show:!0,type:s,orient:o,edgeAt:F,fill:(0,O.ER)(h)(r),lineStroke:(0,O.ER)(l)(r),stroke:(0,O.ER)(b)(r),fontFamily:f,fontSize:y,textFill:(0,O.ER)(d)(r),rectHeight:u,rectWidth:p,arrowWidth:m,rectRadius:g,x1:D,y1:E,x2:T,y2:E}}(e,t,i):null;return a}Br.propTypes={yAccessor:E().func,type:E().oneOf(["horizontal"]),className:E().string,fill:E().oneOfType([E().string,E().func]),lineStroke:E().oneOfType([E().string,E().func]),textFill:E().oneOfType([E().string,E().func]),itemType:E().oneOf(["first","last"]).isRequired,orient:E().oneOf(["left","right"]),edgeAt:E().oneOf(["left","right"]),displayFormat:E().func,rectHeight:E().number,rectWidth:E().number,arrowWidth:E().number,rectRadius:E().number,lineStrokeDasharray:E().oneOf(O.uF)},Br.defaultProps={className:"react-stockcharts-edgeindicator",type:"horizontal",orient:"left",edgeAt:"left",textFill:"#FFFFFF",displayFormat:(0,S.GP)(".2f"),yAxisPad:0,rectHeight:20,rectWidth:50,rectRadius:0,arrowWidth:10,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:13,dx:0,hideLine:!1,fill:"#8a8a8a",opacity:1,stroke:O.lQ,strokeOpacity:1,strokeWidth:3,lineStroke:"#000000",lineOpacity:.3,lineStrokeDasharray:"ShortDash"};const Gr=Br;class $r extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const r=jr(this.props,t);if(!r)return null;e.fillStyle=r.fill,e.beginPath(),e.arc(r.x,r.y,r.r,0,2*Math.PI,!1),e.fill()}renderSVG(e){const{className:t}=this.props,r=jr(this.props,e);if(!r)return null;const s=r.fill instanceof Function?r.fill(e.currentItem):r.fill;return w.createElement("circle",{className:t,cx:r.x,cy:r.y,r:r.r,fill:s})}render(){return w.createElement(xe,{svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:be,drawOn:["mousemove","pan"]})}}function jr(e,t){const{fill:r,yAccessor:s,r:n}=e,{show:i,xScale:a,chartConfig:{yScale:o},currentItem:l,xAccessor:c}=t;if(!i||(0,O.pN)(l))return null;const h=c(l),d=s(l);return(0,O.pN)(d)?null:{x:Math.round(a(h)),y:Math.round(o(d)),r:n,fill:r}}$r.propTypes={yAccessor:E().func,r:E().number.isRequired,className:E().string},$r.defaultProps={r:3,className:"react-stockcharts-current-coordinate"};const Ur=$r;class Qr extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const r=Zr(this.props,t);if((0,O.pN)(r))return null;Xr(e,r)}renderSVG(e){const t=Zr(this.props,e);return(0,O.pN)(t)?null:Ir(t)}render(){return w.createElement(xe,{svgDraw:this.renderSVG,clip:!1,canvasDraw:this.drawOnCanvas,canvasToDraw:be,drawOn:["mousemove","pan","drag"]})}}function Zr(e,t){const{show:r,currentItem:s}=t,{chartConfig:{height:n}}=t;if((0,O.pN)(s))return null;const{customX:i}=e,{orient:a,at:o}=e,{stroke:l,strokeOpacity:c,strokeWidth:h}=e,{rectRadius:d,rectWidth:u,rectHeight:p}=e,{fill:m,opacity:g,fontFamily:f,fontSize:y,textFill:b}=e,v="bottom"===o?n:0,{x:k,coordinate:x}=i(e,t);return{coordinate:x,show:r,type:"vertical",orient:a,edgeAt:v,hideLine:!0,fill:m,opacity:g,fontFamily:f,fontSize:y,textFill:b,stroke:l,strokeOpacity:c,strokeWidth:h,rectWidth:u,rectHeight:p,rectRadius:d,arrowWidth:0,x1:k,x2:k,y1:0,y2:n}}Qr.propTypes={displayFormat:E().func.isRequired,yAxisPad:E().number,rectWidth:E().number,rectHeight:E().number,orient:E().oneOf(["bottom","top","left","right"]),at:E().oneOf(["bottom","top","left","right"]),fill:E().string,opacity:E().number,fontFamily:E().string,fontSize:E().number,textFill:E().string,snapX:E().bool},Qr.defaultProps={yAxisPad:0,rectWidth:80,rectHeight:20,strokeOpacity:1,strokeWidth:1,orient:"bottom",at:"bottom",fill:"#525252",opacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:13,textFill:"#FFFFFF",snapX:!0,customX:function(e,t){const{xScale:r,xAccessor:s,currentItem:n,mouseXY:i}=t,{snapX:a}=e,o=a?r(s(n)):i[0],{displayXAccessor:l}=t,{displayFormat:c}=e;return{x:o,coordinate:c(a?l(n):r.invert(o))}}};const _r=Qr,Kr={xPosition:E().func,drawCoordinate:E().func,displayFormat:E().func.isRequired,at:E().oneOf(["bottom","top"]),orient:E().oneOf(["bottom","top"]),text:E().shape({fontStyle:E().string,fontWeight:E().string,fontFamily:E().string,fontSize:E().number,fill:E().oneOfType([E().func,E().string])}),bg:E().shape({fill:E().oneOfType([E().func,E().string]),stroke:E().string,strokeWidth:E().number,padding:E().shape({left:E().number,right:E().number,top:E().number,bottom:E().number})}),dx:E().number,dy:E().number},Jr={xPosition:function(e,t){const{currentItem:r,xAccessor:s}=t;return s(r)},drawCoordinate:function(e,t,r,s){const{x:n,y:i,textWidth:a,text:o}=t,{orient:l,dx:c,dy:h}=r,{bg:{padding:d,fill:u,stroke:p,strokeWidth:m},text:{fontSize:g,fill:f}}=r;e.textAlign="center";const y="top"===l?-1:1,b=Math.round(a/2+d.right),v=Math.round(g+d.top+d.bottom);e.strokeStyle="function"==typeof p?p(s,e):p,e.fillStyle="function"==typeof u?u(s,e):u,e.lineWidth="function"==typeof m?m(s):m,e.beginPath(),e.moveTo(n,i),e.lineTo(n+c,i+y*h),e.lineTo(n+b,i+y*h),e.lineTo(n+b,i+y*(h+v)),e.lineTo(n-b,i+y*(h+v)),e.lineTo(n-b,i+y*h),e.lineTo(n-c,i+y*h),e.closePath(),e.stroke(),e.fill(),e.beginPath(),e.fillStyle="function"==typeof f?f(s,e):f,e.textBaseline="top"===l?"alphabetic":"hanging";const k="top"===l?d.bottom:d.top;e.fillText(o,n,i+y*(h+k+2))},at:"bottom",orient:"bottom",text:{fontStyle:"",fontWeight:"",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:13,fill:"rgb(35, 35, 35)"},bg:{fill:"rgb(255, 255, 255)",stroke:"rgb(35, 35, 35)",strokeWidth:1,padding:{left:7,right:7,top:4,bottom:4}},dx:7,dy:7};class es extends w.Component{constructor(e){super(e),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const{show:r,currentItem:s}=t,{drawCoordinate:n}=this.props;if(r&&null!=s){const r=function(e,t,r){const{xPosition:s}=t,n=s(t,r),{at:i,displayFormat:a}=t,{text:o}=t,{xScale:l,chartConfig:{height:c}}=r;e.font=`${o.fontStyle} ${o.fontWeight} ${o.fontSize}px ${o.fontFamily}`;const h=a(n),d=e.measureText(h).width,u="bottom"===i?c:0;return{x:Math.round(l(n)),y:u,textWidth:d,text:h}}(e,this.props,t);n(e,r,this.props,t)}}render(){return w.createElement(xe,{clip:!1,canvasDraw:this.drawOnCanvas,canvasToDraw:be,drawOn:["mousemove","pan","drag"]})}}es.defaultProps=Jr,es.propTypes=Kr;class ts extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const r=rs(this.props,t);if((0,O.pN)(r))return null;Xr(e,r)}renderSVG(e){const t=rs(this.props,e);return(0,O.pN)(t)?null:Ir(t)}render(){return w.createElement(xe,{clip:!1,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:be,drawOn:["mousemove","pan","drag"]})}}function rs(e,t){const{chartId:r}=t,{currentCharts:s,mouseXY:n}=t;if((0,O.pN)(n))return null;if(s.indexOf(r)<0)return null;const{show:i}=t;if(!i)return null;const a=n[1],{chartConfig:{yScale:o}}=t,{displayFormat:l}=e;return ss(a,l(o.invert(a)),e,t)}function ss(e,t,r,s){const{width:n}=s,{orient:i,at:a,rectWidth:o,rectHeight:l,rectRadius:c,dx:h}=r,{fill:d,opacity:u,fontFamily:p,fontSize:m,textFill:g,arrowWidth:f}=r,{stroke:y,strokeOpacity:b,strokeWidth:v}=r;return{coordinate:t,show:!0,type:"horizontal",orient:i,edgeAt:"right"===a?n:0,hideLine:!0,fill:d,opacity:u,fontFamily:p,fontSize:m,textFill:g,stroke:y,strokeOpacity:b,strokeWidth:v,rectWidth:o,rectHeight:l,rectRadius:c,arrowWidth:f,dx:h,x1:0,x2:n,y1:e,y2:e}}ts.propTypes={displayFormat:E().func.isRequired,yAxisPad:E().number,rectWidth:E().number,rectHeight:E().number,rectRadius:E().number,orient:E().oneOf(["bottom","top","left","right"]),at:E().oneOf(["bottom","top","left","right"]),dx:E().number,fill:E().string,opacity:E().number,fontFamily:E().string,fontSize:E().number,textFill:E().string},ts.defaultProps={yAxisPad:0,rectWidth:50,rectHeight:20,rectRadius:0,orient:"left",at:"left",dx:0,arrowWidth:10,fill:"#525252",opacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:13,textFill:"#FFFFFF",strokeOpacity:1,strokeWidth:1};const ns=ts;function is(){return is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},is.apply(null,arguments)}class as extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){const r=os(this.props,t);if((0,O.O9)(r)){const{margin:t,ratio:s}=this.context,n=.5*s+t.left,i=.5*s+t.top;e.save(),e.setTransform(1,0,0,1,0,0),e.scale(s,s),e.translate(n,i),r.forEach(t=>{const r=(0,O.KA)(t.strokeDasharray).split(",").map(e=>+e);e.strokeStyle=(0,O.zX)(t.stroke,t.opacity),e.setLineDash(r),e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.stroke()}),e.restore()}}renderSVG(e){const{className:t}=this.props,r=os(this.props,e);return(0,O.pN)(r)?null:w.createElement("g",{className:`react-stockcharts-crosshair ${t}`},r.map(({strokeDasharray:e,...t},r)=>w.createElement("line",is({key:r,strokeDasharray:(0,O.KA)(e)},t))))}render(){return w.createElement(fe,{svgDraw:this.renderSVG,clip:!1,canvasDraw:this.drawOnCanvas,canvasToDraw:be,drawOn:["mousemove","pan","drag"]})}}function os(e,t){const{mouseXY:r,currentItem:s,show:n,height:i,width:a}=t,{customX:o,stroke:l,opacity:c,strokeDasharray:h}=e;if(!n||(0,O.pN)(s))return null;const d={x1:0,x2:a,y1:r[1],y2:r[1],stroke:l,strokeDasharray:h,opacity:c},u=o(e,t);return[d,{x1:u,x2:u,y1:0,y2:i,stroke:l,strokeDasharray:h,opacity:c}]}as.propTypes={className:E().string,strokeDasharray:E().oneOf(O.uF)},as.contextTypes={margin:E().object.isRequired,ratio:E().number.isRequired},as.defaultProps={stroke:"#000000",opacity:.3,strokeDasharray:"ShortDash",snapX:!0,customX:function(e,t){const{xScale:r,xAccessor:s,currentItem:n,mouseXY:i}=t,{snapX:a}=e;return a?Math.round(r(s(n))):i[0]}};const ls=as;class cs extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){Xr(e,hs(this.props,t))}renderSVG(e){return Ir(hs(this.props,e))}render(){return w.createElement(xe,{clip:!1,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:ye,drawOn:["pan"]})}}function hs(e,t){const{width:r}=t,{chartConfig:{yScale:s}}=t,[n,i]=s.domain(),{price:a,stroke:o,strokeDasharray:l,strokeOpacity:c,strokeWidth:h}=e,{orient:d,at:u,rectWidth:p,rectHeight:m,displayFormat:g,dx:f}=e,{fill:y,opacity:b,fontFamily:v,fontSize:k,textFill:x,arrowWidth:S,lineOpacity:C,lineStroke:w}=e,D=r,E="right"===u?r:0,R=s(a),T=a<=i&&a>=n;return{coordinate:g(s.invert(R)),show:T,type:"horizontal",orient:d,edgeAt:E,hideLine:!1,lineOpacity:C,lineStroke:w,lineStrokeDasharray:l,stroke:o,strokeOpacity:c,strokeWidth:h,fill:(0,O.ER)(y)(a),textFill:(0,O.ER)(x)(a),opacity:b,fontFamily:v,fontSize:k,rectWidth:p,rectHeight:m,arrowWidth:S,dx:f,x1:0,x2:D,y1:R,y2:R}}cs.propTypes={displayFormat:E().func.isRequired,yAxisPad:E().number,rectWidth:E().number,rectHeight:E().number,orient:E().oneOf(["bottom","top","left","right"]),at:E().oneOf(["bottom","top","left","right"]),price:E().number,dx:E().number,arrowWidth:E().number,opacity:E().number,lineOpacity:E().number,lineStroke:E().string,fontFamily:E().string,fontSize:E().number,fill:E().oneOfType([E().string,E().func]),strokeDasharray:E().oneOf(O.uF),stroke:E().string,strokeOpacity:E().number,strokeWidth:E().number,textFill:E().oneOfType([E().string,E().func])},cs.defaultProps={yAxisPad:0,rectWidth:50,rectHeight:20,orient:"left",at:"left",price:0,dx:0,arrowWidth:0,fill:"#BAB8b8",opacity:1,lineOpacity:.2,lineStroke:"#000000",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:13,textFill:"#FFFFFF",strokeOpacity:1,strokeWidth:1,strokeDasharray:"Solid"};const ds={source:e=>e.close,windowSize:10};let us=0;function ps(){let e,t,r,s,n,i=us++;function a(){}return a.id=function(e){return arguments.length?(i=e,a):i},a.accessor=function(t){return arguments.length?(e=t,a):e},a.stroke=function(e){return arguments.length?(t=e,a):t||(t=(0,O.Bf)(i))},a.fill=function(e){return arguments.length?(r=e,a):r||(r=(0,O.Bf)(i))},a.echo=function(e){return arguments.length?(s=e,a):s},a.type=function(e){return arguments.length?(n=e,a):n},a}function ms(e,t,r,s){return(0,O.O9)(e)&&e.index===t?e[r]:s}function gs(){this.setState({current:null,override:null})}function fs(e){return t=>{(0,O.pN)(t)&&(0,O.O9)(this.nodes[e])?delete this.nodes[e]:this.nodes[e]=t}}function ys(e){return function(t){if((0,O.O9)(this.nodes)){const r=this.nodes.map(e=>e.isHover(t));return this.props[e].map((e,t)=>({...e,selected:r[t]}))}}}function bs(e){return(0,O.s8)(this.nodes,t=>t.isHover(e)).reduce((e,t)=>e||t)}function vs(e,t){const{chartConfig:r}=e,s=(0,O.I6)(r,e=>e.id===t);if((0,O.pN)(s))return!1;const{origin:n}=s,i=function(e,[t,r]){if(Array.isArray(e.mouseXY)){const{mouseXY:[s,n]}=e;return[s-t,n-r]}return e.mouseXY}(e,n);return{...e,chartConfig:s,mouseXY:i}}class ks extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}isHover(e){const{tolerance:t,onHover:r}=this.props;if((0,O.O9)(r)){const{x1Value:r,x2Value:s,y1Value:n,y2Value:i,type:a}=this.props,{mouseXY:o,xScale:l}=e,{chartConfig:{yScale:c}}=e;return Ss({x1Value:r,y1Value:n,x2Value:s,y2Value:i,mouseXY:o,type:a,tolerance:t,xScale:l,yScale:c})}return!1}drawOnCanvas(e,t){const{stroke:r,strokeWidth:s,strokeOpacity:n,strokeDasharray:i}=this.props,{x1:a,y1:o,x2:l,y2:c}=Cs(this.props,t);e.lineWidth=s,e.strokeStyle=(0,O.zX)(r,n),e.setLineDash((0,O.KA)(i).split(",")),e.beginPath(),e.moveTo(a,o),e.lineTo(l,c),e.stroke()}renderSVG(e){const{stroke:t,strokeWidth:r,strokeOpacity:s,strokeDasharray:n}=this.props,i=r,{x1:a,y1:o,x2:l,y2:c}=Cs(this.props,e);return w.createElement("line",{x1:a,y1:o,x2:l,y2:c,stroke:t,strokeWidth:i,strokeDasharray:(0,O.KA)(n),strokeOpacity:s})}render(){const{selected:e,interactiveCursorClass:t}=this.props,{onDragStart:r,onDrag:s,onDragComplete:n,onHover:i,onUnHover:a}=this.props;return w.createElement(xe,{isHover:this.isHover,svgDraw:this.renderSVG,canvasToDraw:be,canvasDraw:this.drawOnCanvas,interactiveCursorClass:t,selected:e,onDragStart:r,onDrag:s,onDragComplete:n,onHover:i,onUnHover:a,drawOn:["mousemove","pan","drag"]})}}function xs(e,t,[r,s],n){const i=ws(e,t);if((0,O.O9)(i)){const a=i*r+Ds(i,t);return s<a+n&&s>a-n&&r>Math.min(e[0],t[0])-n&&r<Math.max(e[0],t[0])+n}return s>=Math.min(e[1],t[1])&&s<=Math.max(e[1],t[1])&&r<e[0]+n&&r>e[0]-n}function Ss({x1Value:e,y1Value:t,x2Value:r,y2Value:s,mouseXY:n,type:i,tolerance:a,xScale:o,yScale:l}){const c=Es({type:i,start:[e,t],end:[r,s],xScale:o,yScale:l}),h=[o(c.x1),l(c.y1)],d=[o(c.x2),l(c.y2)],u=ws(h,d),[p,m]=n;if((0,O.O9)(u)){const e=u*p+Ds(u,d);return m<e+a&&m>e-a&&p>Math.min(h[0],d[0])-a&&p<Math.max(h[0],d[0])+a}return m>=Math.min(h[1],d[1])&&m<=Math.max(h[1],d[1])&&p<h[0]+a&&p>h[0]-a}function Cs(e,t){const{x1Value:r,x2Value:s,y1Value:n,y2Value:i,type:a}=e,{xScale:o,chartConfig:{yScale:l}}=t,c=Es({type:a,start:[r,n],end:[s,i],xScale:o,yScale:l});return{x1:o(c.x1),y1:l(c.y1),x2:o(c.x2),y2:l(c.y2)}}function ws(e,t){return t[0]===e[0]?void 0:(t[1]-e[1])/(t[0]-e[0])}function Ds(e,t){return-1*e*t[0]+t[1]}function Es({type:e,start:t,end:r,xScale:s,yScale:n}){const i=ws(t,r),a=Ds(i,t);switch(e){case"XLINE":return function({start:e,end:t,xScale:r,yScale:s,m:n,b:i}){const[a,o]=r.domain(),[l,c]=s.domain();if(t[0]===e[0])return{x1:t[0],y1:l,x2:t[0],y2:c};const[h,d]=t[0]>e[0]?[a,o]:[o,a];return{x1:h,y1:n*h+i,x2:d,y2:n*d+i}}({type:e,start:t,end:r,xScale:s,yScale:n,m:i,b:a});case"RAY":return function({start:e,end:t,xScale:r,yScale:s,m:n,b:i}){const[a,o]=r.domain(),[l,c]=s.domain(),h=e[0];if(t[0]===e[0])return{x1:h,y1:e[1],x2:h,y2:t[1]>e[1]?c:l};const d=t[0]>e[0]?o:a;return{x1:h,y1:n*h+i,x2:d,y2:n*d+i}}({type:e,start:t,end:r,xScale:s,yScale:n,m:i,b:a});case"LINE":return function({start:e,end:t}){const[r,s]=e,[n,i]=t;return t[0]===e[0]?{x1:r,y1:e[1],x2:r,y2:t[1]}:{x1:r,y1:s,x2:n,y2:i}}({type:e,start:t,end:r,xScale:s,yScale:n,m:i,b:a})}}ks.propTypes={x1Value:E().any.isRequired,x2Value:E().any.isRequired,y1Value:E().any.isRequired,y2Value:E().any.isRequired,interactiveCursorClass:E().string,stroke:E().string.isRequired,strokeWidth:E().number.isRequired,strokeOpacity:E().number.isRequired,strokeDasharray:E().oneOf(O.uF),type:E().oneOf(["XLINE","RAY","LINE"]).isRequired,onEdge1Drag:E().func.isRequired,onEdge2Drag:E().func.isRequired,onDragStart:E().func.isRequired,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired,onHover:E().func,onUnHover:E().func,defaultClassName:E().string,r:E().number.isRequired,edgeFill:E().string.isRequired,edgeStroke:E().string.isRequired,edgeStrokeWidth:E().number.isRequired,withEdge:E().bool.isRequired,children:E().func.isRequired,tolerance:E().number.isRequired,selected:E().bool.isRequired},ks.defaultProps={onEdge1Drag:O.lQ,onEdge2Drag:O.lQ,onDragStart:O.lQ,onDrag:O.lQ,onDragComplete:O.lQ,edgeStrokeWidth:3,edgeStroke:"#000000",edgeFill:"#FFFFFF",r:10,withEdge:!1,strokeWidth:1,strokeDasharray:"Solid",children:O.lQ,tolerance:7,selected:!1};const Rs=ks;class Os extends w.Component{constructor(e){super(e),this.saveNode=this.saveNode.bind(this),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}saveNode(e){this.node=e}isHover(e){const{mouseXY:t}=e,r=this.props.r+7,[s,n]=Ts(this.props,e),[i,a]=t;return s-r<i&&i<s+r&&n-r<a&&a<n+r}drawOnCanvas(e,t){const{stroke:r,strokeWidth:s,fill:n}=this.props,{fillOpacity:i,strokeOpacity:a}=this.props,{r:o}=this.props,[l,c]=Ts(this.props,t);e.lineWidth=s,e.fillStyle=(0,O.zX)(n,i),e.strokeStyle=(0,O.zX)(r,a),e.beginPath(),e.arc(l,c,o,0,2*Math.PI,!1),e.fill(),e.stroke()}renderSVG(e){const{stroke:t,strokeWidth:r,fill:s}=this.props,{fillOpacity:n,strokeOpacity:i}=this.props,{r:a}=this.props,[o,l]=Ts(this.props,e);return w.createElement("circle",{cx:o,cy:l,r:a,strokeWidth:r,stroke:t,strokeOpacity:i,fill:s,fillOpacity:n})}render(){const{interactiveCursorClass:e}=this.props,{show:t}=this.props,{onDragStart:r,onDrag:s,onDragComplete:n}=this.props;return t?w.createElement(xe,{ref:this.saveNode,interactiveCursorClass:e,selected:!0,isHover:this.isHover,onDragStart:r,onDrag:s,onDragComplete:n,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:be,drawOn:["pan","mousemove","drag"]}):null}}function Ts(e,t){const{xyProvider:r,cx:s,cy:n}=e;if((0,O.O9)(r))return r(t);const{xScale:i,chartConfig:{yScale:a}}=t;return[i(s),a(n)]}Os.propTypes={xyProvider:E().func,onDragStart:E().func.isRequired,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired,strokeWidth:E().number.isRequired,stroke:E().string.isRequired,fill:E().string.isRequired,r:E().number.isRequired,cx:E().number,cy:E().number,className:E().string.isRequired,show:E().bool.isRequired,strokeOpacity:E().number.isRequired,fillOpacity:E().number.isRequired,interactiveCursorClass:E().string},Os.defaultProps={className:"react-stockcharts-interactive-line-edge",onDragStart:O.lQ,onDrag:O.lQ,onDragComplete:O.lQ,onMove:O.lQ,show:!1,fillOpacity:1,strokeOpacity:1};const Fs=Os;function Ps(){return Ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ps.apply(null,arguments)}const qs=10;class As extends w.Component{constructor(e){super(e),this.state={textWidth:void 0,textHeight:void 0},this.saveNode=this.saveNode.bind(this),this.updateTextSize=this.updateTextSize.bind(this),this.renderSVG=this.renderSVG.bind(this)}saveNode(e){this.textNode=e}updateTextSize(){const{bgWidth:e,bgHeight:t}=this.props;if("auto"===e||"auto"===t){const e=this.textNode;if(e){const{width:t,height:r}=e.getBBox();this.state.textWidth===t&&this.state.textHeight===r||this.setState({textWidth:t,textHeight:r})}}}componentDidMount(){this.updateTextSize()}componentDidUpdate(){this.updateTextSize()}getBgWidth(){const{bgWidth:e}=this.props,{textWidth:t}=this.state;return"auto"!==e?e:void 0!==t?t+qs:10}getBgHeight(){const{bgHeight:e}=this.props,{textHeight:t}=this.state;return"auto"!==e?e:void 0!==t?t+qs:10}renderSVG(e){const{fontFamily:t,fontSize:r,fill:s,bgFill:n,bgOpacity:i}=this.props,a=function(e,t){const{show:r,bgWidth:s,bgHeight:n}=e,{mouseXY:i,chartConfig:{height:a,width:o},show:l}=t;if(r&&l&&Symbol.iterator in Object(i)){const[t,r]=i,l=t<o/2?t+qs:t-s-qs,c=r<a/2?r+qs:r-n-qs;return{rect:{x:l,y:c,width:s,height:n},text:{text:e.text,x:l+5,y:c+n/2}}}}({...this.props,bgWidth:this.getBgWidth(),bgHeight:this.getBgHeight()},e);if((0,O.O9)(a)){const{rect:e,text:o}=a;return w.createElement("g",null,w.createElement("rect",Ps({fill:n,fillOpacity:i,stroke:n},e)),w.createElement("text",{ref:this.saveNode,fontSize:r,fontFamily:t,textAnchor:"start",alignmentBaseline:"central",fill:s,x:o.x,y:o.y},o.text))}}render(){const{text:e}=this.props;return e?w.createElement(xe,{svgDraw:this.renderSVG,drawOn:["mousemove"]}):null}}const Ns=E().oneOfType([E().number,E().oneOf(["auto"])]);As.propTypes={fontFamily:E().string.isRequired,fontSize:E().number.isRequired,fill:E().string.isRequired,text:E().string.isRequired,bgFill:E().string.isRequired,bgOpacity:E().number.isRequired,bgWidth:Ns.isRequired,bgHeight:Ns.isRequired,show:E().bool.isRequired},As.defaultProps={fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fill:"#000000",bgFill:"#FA9325",bgOpacity:.5};const Ms=As;function Ws(){return Ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ws.apply(null,arguments)}class Vs extends w.Component{constructor(e){super(e),this.handleEdge1Drag=this.handleEdge1Drag.bind(this),this.handleEdge2Drag=this.handleEdge2Drag.bind(this),this.handleLineDragStart=this.handleLineDragStart.bind(this),this.handleLineDrag=this.handleLineDrag.bind(this),this.handleEdge1DragStart=this.handleEdge1DragStart.bind(this),this.handleEdge2DragStart=this.handleEdge2DragStart.bind(this),this.handleDragComplete=this.handleDragComplete.bind(this),this.handleHover=this.handleHover.bind(this),this.isHover=bs.bind(this),this.saveNodeType=fs.bind(this),this.nodes={},this.state={hover:!1}}handleLineDragStart(){const{x1Value:e,y1Value:t,x2Value:r,y2Value:s}=this.props;this.dragStart={x1Value:e,y1Value:t,x2Value:r,y2Value:s}}handleLineDrag(e){const{index:t,onDrag:r}=this.props,{x1Value:s,y1Value:n,x2Value:i,y2Value:a}=this.dragStart,{xScale:o,chartConfig:{yScale:l},xAccessor:c,fullData:h}=e,{startPos:d,mouseXY:u}=e,p=o(s),m=l(n),g=o(i),f=l(a),y=d[0]-u[0],b=d[1]-u[1];r(t,{x1Value:L(o,c,[p-y,m-b],h),y1Value:l.invert(m-b),x2Value:L(o,c,[g-y,f-b],h),y2Value:l.invert(f-b)})}handleEdge1DragStart(){this.setState({anchor:"edge2"})}handleEdge2DragStart(){this.setState({anchor:"edge1"})}handleDragComplete(...e){this.setState({anchor:void 0}),this.props.onDragComplete(...e)}handleEdge1Drag(e){const{index:t,onDrag:r}=this.props,{x2Value:s,y2Value:n}=this.props,[i,a]=Hs(e);r(t,{x1Value:i,y1Value:a,x2Value:s,y2Value:n})}handleEdge2Drag(e){const{index:t,onDrag:r}=this.props,{x1Value:s,y1Value:n}=this.props,[i,a]=Hs(e);r(t,{x1Value:s,y1Value:n,x2Value:i,y2Value:a})}handleHover(e){this.state.hover!==e.hovering&&this.setState({hover:e.hovering})}render(){const{x1Value:e,y1Value:t,x2Value:r,y2Value:s,type:n,stroke:i,strokeWidth:a,strokeOpacity:o,strokeDasharray:l,r:c,edgeStrokeWidth:h,edgeFill:d,edgeStroke:u,edgeInteractiveCursor:p,lineInteractiveCursor:m,hoverText:g,selected:f,onDragComplete:y}=this.props,{enable:b,selectedText:v,text:k,...x}=g,{hover:S,anchor:C}=this.state;return w.createElement("g",null,w.createElement(Rs,{ref:this.saveNodeType("line"),selected:f||S,onHover:this.handleHover,onUnHover:this.handleHover,x1Value:e,y1Value:t,x2Value:r,y2Value:s,type:n,stroke:i,strokeWidth:S||f?a+1:a,strokeOpacity:o,strokeDasharray:l,interactiveCursorClass:m,onDragStart:this.handleLineDragStart,onDrag:this.handleLineDrag,onDragComplete:y}),w.createElement(Fs,{ref:this.saveNodeType("edge1"),show:f||S,cx:e,cy:t,r:c,fill:d,stroke:"edge1"===C?i:u,strokeWidth:h,strokeOpacity:1,interactiveCursorClass:p,onDragStart:this.handleEdge1DragStart,onDrag:this.handleEdge1Drag,onDragComplete:this.handleDragComplete}),w.createElement(Fs,{ref:this.saveNodeType("edge2"),show:f||S,cx:r,cy:s,r:c,fill:d,stroke:"edge2"===C?i:u,strokeWidth:h,strokeOpacity:1,interactiveCursorClass:p,onDragStart:this.handleEdge2DragStart,onDrag:this.handleEdge2Drag,onDragComplete:this.handleDragComplete}),w.createElement(Ms,Ws({show:b&&S},x,{text:f?v:k})))}}function Hs(e){const{xScale:t,chartConfig:{yScale:r},xAccessor:s,plotData:n,mouseXY:i}=e,a=i[1],o=L(t,s,i,n),[l,c]=r.domain().slice().sort(R.V_),h=r.invert(a);return[o,Math.min(Math.max(h,l),c)]}Vs.propTypes={x1Value:E().any.isRequired,x2Value:E().any.isRequired,y1Value:E().any.isRequired,y2Value:E().any.isRequired,index:E().number,type:E().oneOf(["XLINE","RAY","LINE"]).isRequired,onDrag:E().func.isRequired,onEdge1Drag:E().func.isRequired,onEdge2Drag:E().func.isRequired,onDragComplete:E().func.isRequired,onSelect:E().func.isRequired,onUnSelect:E().func.isRequired,r:E().number.isRequired,strokeOpacity:E().number.isRequired,defaultClassName:E().string,selected:E().bool,stroke:E().string.isRequired,strokeWidth:E().number.isRequired,strokeDasharray:E().oneOf(O.uF),edgeStrokeWidth:E().number.isRequired,edgeStroke:E().string.isRequired,edgeInteractiveCursor:E().string.isRequired,lineInteractiveCursor:E().string.isRequired,edgeFill:E().string.isRequired,hoverText:E().object.isRequired},Vs.defaultProps={onDrag:O.lQ,onEdge1Drag:O.lQ,onEdge2Drag:O.lQ,onDragComplete:O.lQ,onSelect:O.lQ,onUnSelect:O.lQ,selected:!1,edgeStroke:"#000000",edgeFill:"#FFFFFF",edgeStrokeWidth:2,r:5,strokeWidth:1,strokeOpacity:1,strokeDasharray:"Solid",hoverText:{enable:!1}};const zs=Vs;class Is extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.handleMousePosChange=this.handleMousePosChange.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleClick=this.handleClick.bind(this),this.xy=this.xy.bind(this),this.mutableState={}}handleMouseDown(e,t){const r=this.xy(e,t);if((0,O.O9)(r)){const{xValue:s,yValue:n,x:i,y:a}=r;this.mutableState={x:i,y:a},this.props.onMouseDown([s,n],e,t)}}handleClick(e,t){const r=this.xy(e,t);if((0,O.O9)(r)){const{xValue:s,yValue:n,x:i,y:a}=r;this.mutableState={x:i,y:a},this.props.onClick([s,n],e,t)}}xy(e,t){const{xAccessor:r,plotData:s}=e,{mouseXY:n,currentItem:i,xScale:a,chartConfig:{yScale:o}}=e,{enabled:l,snap:c,shouldDisableSnap:h,snapTo:d}=this.props;if(l&&(0,O.O9)(i)&&(0,O.O9)(t)){const e=c&&!h(t)?r(i):L(a,r,n,s),l=c&&!h(t)?(0,O.xZ)(d(i),o.invert(n[1])):o.invert(n[1]);return{xValue:e,yValue:l,x:a(e),y:o(l)}}}handleMousePosChange(e,t){if(!(0,O.bN)(e.mousXY,e.prevMouseXY)){const r=this.xy(e,t);if((0,O.O9)(r)){const{xValue:e,yValue:s,x:n,y:i}=r;this.mutableState={x:n,y:i},this.props.onMouseMove([e,s],t)}}}drawOnCanvas(e,t){const{enabled:r,r:s,stroke:n,strokeWidth:i}=this.props,{x:a,y:o}=this.mutableState,{show:l}=t;r&&l&&(0,O.O9)(a)&&(e.lineWidth=i,e.strokeStyle=n,e.moveTo(a,o),e.beginPath(),e.arc(a,o,s,0,2*Math.PI,!1),e.stroke())}renderSVG(e){const{enabled:t,r,stroke:s,strokeWidth:n,opacity:i}=this.props,{x:a,y:o}=this.mutableState,{show:l}=e;return t&&l&&(0,O.O9)(a)?w.createElement("circle",{cx:a,cy:o,r,stroke:s,opacity:i,fill:"none",strokeWidth:n}):null}render(){const{enabled:e,disablePan:t}=this.props;return w.createElement(xe,{onMouseDown:this.handleMouseDown,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onMouseMove:this.handleMousePosChange,onPan:this.handleMousePosChange,disablePan:e&&t,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:be,drawOn:["mousemove","pan"]})}}Is.propTypes={enabled:E().bool.isRequired,snap:E().bool.isRequired,shouldDisableSnap:E().func.isRequired,snapTo:E().func,onMouseMove:E().func.isRequired,onMouseDown:E().func.isRequired,onClick:E().func.isRequired,r:E().number.isRequired,stroke:E().string.isRequired,strokeWidth:E().number.isRequired,opacity:E().number.isRequired,disablePan:E().bool.isRequired},Is.defaultProps={onMouseMove:O.lQ,onMouseDown:O.lQ,onClick:O.lQ,shouldDisableSnap:(0,O.ER)(!1),stroke:"#000000",strokeWidth:1,opacity:1,disablePan:!0};const Ls=Is;class Xs extends w.Component{constructor(e){super(e),this.handleStart=this.handleStart.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleDrawLine=this.handleDrawLine.bind(this),this.handleDragLine=this.handleDragLine.bind(this),this.handleDragLineComplete=this.handleDragLineComplete.bind(this),this.terminate=gs.bind(this),this.saveNodeType=fs.bind(this),this.getSelectionState=ys("trends").bind(this),this.state={},this.nodes=[]}handleDragLine(e,t){this.setState({override:{index:e,...t}})}handleDragLineComplete(e){const{override:t}=this.state;if((0,O.O9)(t)){const{trends:r}=this.props,s=r.map((e,r)=>r===t.index?{...e,start:[t.x1Value,t.y1Value],end:[t.x2Value,t.y2Value],selected:!0}:{...e,selected:!1});this.setState({override:null},()=>{this.props.onComplete(s,e)})}}handleDrawLine(e){const{current:t}=this.state;(0,O.O9)(t)&&(0,O.O9)(t.start)&&(this.mouseMoved=!0,this.setState({current:{start:t.start,end:e}}))}handleStart(e,t,r){const{current:s}=this.state;((0,O.pN)(s)||(0,O.pN)(s.start))&&(this.mouseMoved=!1,this.setState({current:{start:e,end:null}},()=>{this.props.onStart(t,r)}))}handleEnd(e,t,r){const{current:s}=this.state,{trends:n,appearance:i,type:a}=this.props;if(this.mouseMoved&&(0,O.O9)(s)&&(0,O.O9)(s.start)){const o=[...n.map(e=>({...e,selected:!1})),{start:s.start,end:e,selected:!0,appearance:i,type:a}];this.setState({current:null,trends:o},()=>{this.props.onComplete(o,t,r)})}}render(){const{appearance:e}=this.props,{enabled:t,snap:r,shouldDisableSnap:s,snapTo:n,type:i}=this.props,{currentPositionRadius:a,currentPositionStroke:o}=this.props,{currentPositionstrokeOpacity:l,currentPositionStrokeWidth:c}=this.props,{hoverText:h,trends:d}=this.props,{current:u,override:p}=this.state,m=(0,O.O9)(u)&&(0,O.O9)(u.end)?w.createElement(Rs,{type:i,noHover:!0,x1Value:u.start[0],y1Value:u.start[1],x2Value:u.end[0],y2Value:u.end[1],stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity}):null;return w.createElement("g",null,d.map((t,r)=>{const s=(0,O.O9)(t.appearance)?{...e,...t.appearance}:e,n={...Xs.defaultProps.hoverText,...h};return w.createElement(zs,{key:r,ref:this.saveNodeType(r),index:r,type:t.type,selected:t.selected,x1Value:ms(p,r,"x1Value",t.start[0]),y1Value:ms(p,r,"y1Value",t.start[1]),x2Value:ms(p,r,"x2Value",t.end[0]),y2Value:ms(p,r,"y2Value",t.end[1]),stroke:s.stroke,strokeWidth:s.strokeWidth,strokeOpacity:s.strokeOpacity,strokeDasharray:s.strokeDasharray,edgeStroke:s.edgeStroke,edgeFill:s.edgeFill,edgeStrokeWidth:s.edgeStrokeWidth,r:s.r,hoverText:n,onDrag:this.handleDragLine,onDragComplete:this.handleDragLineComplete,edgeInteractiveCursor:"react-stockcharts-move-cursor",lineInteractiveCursor:"react-stockcharts-move-cursor"})}),m,w.createElement(Ls,{enabled:t,snap:r,shouldDisableSnap:s,snapTo:n,r:a,stroke:o,strokeOpacity:l,strokeWidth:c,onMouseDown:this.handleStart,onClick:this.handleEnd,onMouseMove:this.handleDrawLine}))}}Xs.propTypes={snap:E().bool.isRequired,enabled:E().bool.isRequired,snapTo:E().func,shouldDisableSnap:E().func.isRequired,onStart:E().func.isRequired,onComplete:E().func.isRequired,onSelect:E().func,currentPositionStroke:E().string,currentPositionStrokeWidth:E().number,currentPositionstrokeOpacity:E().number,currentPositionRadius:E().number,type:E().oneOf(["XLINE","RAY","LINE"]),hoverText:E().object.isRequired,trends:E().array.isRequired,appearance:E().shape({stroke:E().string.isRequired,strokeOpacity:E().number.isRequired,strokeWidth:E().number.isRequired,strokeDasharray:E().oneOf(O.uF),edgeStrokeWidth:E().number.isRequired,edgeFill:E().string.isRequired,edgeStroke:E().string.isRequired}).isRequired},Xs.defaultProps={type:"XLINE",onStart:O.lQ,onComplete:O.lQ,onSelect:O.lQ,currentPositionStroke:"#000000",currentPositionstrokeOpacity:1,currentPositionStrokeWidth:3,currentPositionRadius:0,shouldDisableSnap:e=>2===e.button||e.shiftKey,hoverText:{...Ms.defaultProps,enable:!0,bgHeight:"auto",bgWidth:"auto",text:"Click to select object",selectedText:""},trends:[],appearance:{stroke:"#000000",strokeOpacity:1,strokeWidth:1,strokeDasharray:"Solid",edgeStrokeWidth:1,edgeFill:"#FFFFFF",edgeStroke:"#000000",r:6}};const Bs=Xs;class Ys extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}isHover(){return!1}drawOnCanvas(e,t){const{xyProvider:r,fontFamily:s,fontSize:n,fill:i,children:a}=this.props,[o,l]=r(t);e.font=`${n}px ${s}`,e.fillStyle=i,e.beginPath(),e.fillText(a,o,l)}renderSVG(e){const{xyProvider:t,fontFamily:r,fontSize:s,fill:n,children:i}=this.props,[a,o]=t(e);return w.createElement("text",{x:a,y:o,fontFamily:r,fontSize:s,fill:n},i)}render(){const{selected:e}=this.props;return w.createElement(xe,{selected:e,svgDraw:this.renderSVG,canvasToDraw:be,canvasDraw:this.drawOnCanvas,drawOn:["mousemove","pan","drag"]})}}Ys.propTypes={xyProvider:E().func.isRequired,fontFamily:E().string.isRequired,fontSize:E().number.isRequired,fill:E().string.isRequired,children:E().string.isRequired,selected:E().bool.isRequired},Ys.defaultProps={selected:!1};const Gs=Ys;function $s(){return $s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$s.apply(null,arguments)}class js extends w.Component{constructor(e){super(e),this.handleEdge1Drag=this.handleEdge1Drag.bind(this),this.handleEdge2Drag=this.handleEdge2Drag.bind(this),this.handleLineNSResizeTop=this.handleLineNSResizeTop.bind(this),this.handleLineNSResizeBottom=this.handleLineNSResizeBottom.bind(this),this.handleLineMove=this.handleLineMove.bind(this),this.handleLineDragStart=this.handleLineDragStart.bind(this),this.handleHover=this.handleHover.bind(this),this.isHover=bs.bind(this),this.saveNodeType=fs.bind(this),this.nodes={},this.state={hover:!1}}handleHover(e){this.state.hover!==e.hovering&&this.setState({hover:e.hovering})}handleLineDragStart(){const{x1:e,y1:t,x2:r,y2:s}=this.props;this.dragStart={x1:e,y1:t,x2:r,y2:s}}handleLineMove(e){const{index:t,onDrag:r}=this.props,{x1:s,y1:n,x2:i,y2:a}=this.dragStart,{xScale:o,chartConfig:{yScale:l},xAccessor:c,fullData:h}=e,{startPos:d,mouseXY:u}=e,p=o(s),m=l(n),g=o(i),f=l(a),y=d[0]-u[0],b=d[1]-u[1];r(t,{x1:L(o,c,[p-y,m-b],h),y1:l.invert(m-b),x2:L(o,c,[g-y,f-b],h),y2:l.invert(f-b)})}handleLineNSResizeTop(e){const{index:t,onDrag:r}=this.props,{x1:s,x2:n,y2:i}=this.props,[,a]=Hs(e);r(t,{x1:s,y1:a,x2:n,y2:i})}handleLineNSResizeBottom(e){const{index:t,onDrag:r}=this.props,{x1:s,y1:n,x2:i}=this.props,[,a]=Hs(e);r(t,{x1:s,y1:n,x2:i,y2:a})}handleEdge1Drag(e){const{index:t,onDrag:r}=this.props,{y1:s,x2:n,y2:i}=this.props,[a]=Hs(e);r(t,{x1:a,y1:s,x2:n,y2:i})}handleEdge2Drag(e){const{index:t,onDrag:r}=this.props,{x1:s,y1:n,y2:i}=this.props,[a]=Hs(e);r(t,{x1:s,y1:n,x2:a,y2:i})}render(){const{x1:e,x2:t,y1:r,y2:s}=this.props,{interactive:n,yDisplayFormat:i,type:a,appearance:o}=this.props,{stroke:l,strokeWidth:c,strokeOpacity:h}=o,{fontFamily:d,fontSize:u,fontFill:p}=o,{edgeStroke:m,edgeFill:g,nsEdgeFill:f,edgeStrokeWidth:y,r:b}=o,{hoverText:v,selected:k}=this.props,{hover:x}=this.state,{onDragComplete:S}=this.props,C=function({x1:e,y1:t,x2:r,y2:s}){const n=s-t;return[222.7,200,161.8,150,127.2,100,61.8,50,38.2,23.6,0].map(t=>({percent:t,x1:e,x2:r,y:s-t/100*n}))}({x1:e,x2:t,y1:r,y2:s}),{enable:D,selectedText:E,text:R,...T}=v,F="EXTEND"===a?"XLINE":"BOUND"===a?"LINE":a,P=(0,O.d5)(C).y1>(0,O.HV)(C).y1?3:-1.3;return w.createElement("g",null,C.map((e,t)=>{const r=`${i(e.y)} (${e.percent.toFixed(2)}%)`,s=0===t||t===C.length-1,a=s?"react-stockcharts-ns-resize-cursor":"react-stockcharts-move-cursor",o=s?"react-stockcharts-ns-resize-cursor":"react-stockcharts-ew-resize-cursor",v=0===t||t===C.length-1?this.handleLineNSResizeBottom:this.handleLineMove,D=0===t||t===C.length-1?this.handleLineNSResizeBottom:this.handleEdge1Drag,E=0===t||t===C.length-1?this.handleLineNSResizeBottom:this.handleEdge2Drag,R=n?{onHover:this.handleHover,onUnHover:this.handleHover}:{};return w.createElement("g",{key:t},w.createElement(Rs,$s({ref:this.saveNodeType(`line_${t}`),selected:k||x},R,{type:F,x1Value:e.x1,y1Value:e.y,x2Value:e.x2,y2Value:e.y,stroke:l,strokeWidth:x||k?c+1:c,strokeOpacity:h,interactiveCursorClass:a,onDragStart:this.handleLineDragStart,onDrag:v,onDragComplete:S})),w.createElement(Gs,{selected:k,xyProvider:({xScale:t,chartConfig:r})=>{const{yScale:s}=r,{x1:n,y1:i,x2:a}=Es({type:F,start:[e.x1,e.y],end:[e.x2,e.y],xScale:t,yScale:s});return[t(Math.min(n,a))+10,s(i)+4*P]},fontFamily:d,fontSize:u,fill:p},r),w.createElement(Fs,{ref:this.saveNodeType("edge1"),show:k||x,cx:e.x1,cy:e.y,r:b,fill:s?f:g,stroke:m,strokeWidth:y,interactiveCursorClass:o,onDrag:D,onDragComplete:S}),w.createElement(Fs,{ref:this.saveNodeType("edge2"),show:k||x,cx:e.x2,cy:e.y,r:b,fill:s?f:g,stroke:m,strokeWidth:y,interactiveCursorClass:o,onDrag:E,onDragComplete:S}))}),w.createElement(Ms,$s({show:D&&x},T,{text:k?E:R})))}}js.propTypes={x1:E().any.isRequired,x2:E().any.isRequired,y1:E().number.isRequired,y2:E().number.isRequired,yDisplayFormat:E().func.isRequired,type:E().string.isRequired,selected:E().bool.isRequired,appearance:E().shape({stroke:E().string.isRequired,strokeWidth:E().number.isRequired,strokeOpacity:E().number.isRequired,fontFamily:E().string.isRequired,fontSize:E().number.isRequired,fontFill:E().string.isRequired,edgeStroke:E().string.isRequired,edgeFill:E().string.isRequired,nsEdgeFill:E().string.isRequired,edgeStrokeWidth:E().number.isRequired,r:E().number.isRequired}).isRequired,interactive:E().bool.isRequired,hoverText:E().object.isRequired,index:E().number,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired},js.defaultProps={yDisplayFormat:e=>e.toFixed(2),interactive:!0,appearance:{stroke:"#000000",strokeWidth:1,strokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:10,fontFill:"#000000",edgeStroke:"#000000",edgeFill:"#FFFFFF",nsEdgeFill:"#000000",edgeStrokeWidth:1,r:5},selected:!1,onDrag:O.lQ,onDragComplete:O.lQ,hoverText:{enable:!1}};const Us=js;function Qs(){return Qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Qs.apply(null,arguments)}class Zs extends w.Component{constructor(e){super(e),this.handleStart=this.handleStart.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleDrawRetracement=this.handleDrawRetracement.bind(this),this.handleEdge1Drag=this.handleEdge1Drag.bind(this),this.handleEdge2Drag=this.handleEdge2Drag.bind(this),this.handleDrag=this.handleDrag.bind(this),this.handleDragComplete=this.handleDragComplete.bind(this),this.terminate=gs.bind(this),this.getSelectionState=ys("retracements").bind(this),this.saveNodeType=fs.bind(this),this.nodes=[],this.state={}}handleDrawRetracement(e){const{current:t}=this.state;(0,O.O9)(t)&&(0,O.O9)(t.x1)&&(this.mouseMoved=!0,this.setState({current:{...t,x2:e[0],y2:e[1]}}))}handleDrag(e,t){this.setState({override:{index:e,...t}})}handleEdge1Drag(e,t,r){const{retracements:s}=this.props,{index:n}=e,i=r.x1Value-t.x1Value;this.setState({override:{index:n,x1:s[n].x1-i,y1:s[n].y1,x2:s[n].x2,y2:s[n].y2}})}handleEdge2Drag(e,t,r){const{retracements:s}=this.props,{index:n}=e,i=r.x2Value-t.x2Value;this.setState({override:{index:n,x1:s[n].x1,y1:s[n].y1,x2:s[n].x2-i,y2:s[n].y2}})}handleDragComplete(e){const{retracements:t}=this.props,{override:r}=this.state;if((0,O.O9)(r)){const{index:s,...n}=r,i=t.map((e,t)=>t===s?{...e,...n,selected:!0}:e);this.setState({override:null},()=>{this.props.onComplete(i,e)})}}handleStart(e,t){const{current:r}=this.state;((0,O.pN)(r)||(0,O.pN)(r.x1))&&(this.mouseMoved=!1,this.setState({current:{x1:e[0],y1:e[1],x2:null,y2:null}},()=>{this.props.onStart(t)}))}handleEnd(e,t,r){const{retracements:s,appearance:n,type:i}=this.props,{current:a}=this.state;if(this.mouseMoved&&(0,O.O9)(a)&&(0,O.O9)(a.x1)){const o=s.concat({...a,x2:e[0],y2:e[1],selected:!0,appearance:n,type:i});this.setState({current:null},()=>{this.props.onComplete(o,t,r)})}}render(){const{current:e,override:t}=this.state,{retracements:r}=this.props,{appearance:s,type:n}=this.props,{currentPositionStroke:i,currentPositionOpacity:a,currentPositionStrokeWidth:o,currentPositionRadius:l}=this.props,{enabled:c,hoverText:h}=this.props,d=(0,O.O9)(t)?t.index:null,u={...Zs.defaultProps.hoverText,...h},p=(0,O.O9)(e)&&(0,O.O9)(e.x2)?w.createElement(Us,Qs({interactive:!1,type:n,appearance:s,hoverText:u},e)):null;return w.createElement("g",null,r.map((e,r)=>{const n=(0,O.O9)(e.appearance)?{...s,...e.appearance}:s,i=(0,O.O9)(e.hoverText)?{...u,...e.hoverText}:u;return w.createElement(Us,Qs({key:r,ref:this.saveNodeType(r),index:r,type:e.type,selected:e.selected},r===d?t:e,{hoverText:i,appearance:n,onDrag:this.handleDrag,onDragComplete:this.handleDragComplete}))}),p,w.createElement(Ls,{enabled:c,snap:!1,r:l,stroke:i,opacity:a,strokeWidth:o,onMouseDown:this.handleStart,onClick:this.handleEnd,onMouseMove:this.handleDrawRetracement}))}}Zs.propTypes={enabled:E().bool.isRequired,width:E().number,onStart:E().func,onComplete:E().func,onSelect:E().func,type:E().oneOf(["EXTEND","RAY","BOUND"]).isRequired,hoverText:E().object.isRequired,currentPositionStroke:E().string,currentPositionStrokeWidth:E().number,currentPositionOpacity:E().number,currentPositionRadius:E().number,retracements:E().array.isRequired,appearance:E().shape({stroke:E().string.isRequired,strokeWidth:E().number.isRequired,strokeOpacity:E().number.isRequired,fontFamily:E().string.isRequired,fontSize:E().number.isRequired,fontFill:E().string.isRequired,edgeStroke:E().string.isRequired,edgeFill:E().string.isRequired,nsEdgeFill:E().string.isRequired,edgeStrokeWidth:E().number.isRequired,r:E().number.isRequired}).isRequired},Zs.defaultProps={enabled:!0,type:"RAY",retracements:[],onStart:O.lQ,onComplete:O.lQ,onSelect:O.lQ,hoverText:{...Ms.defaultProps,enable:!0,bgHeight:"auto",bgWidth:"auto",text:"Click to select object",selectedText:""},currentPositionStroke:"#000000",currentPositionOpacity:1,currentPositionStrokeWidth:3,currentPositionRadius:4,appearance:{stroke:"#000000",strokeWidth:1,strokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:11,fontFill:"#000000",edgeStroke:"#000000",edgeFill:"#FFFFFF",nsEdgeFill:"#000000",edgeStrokeWidth:1,r:5}};const _s=Zs;class Ks extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}isHover(e){const{tolerance:t,onHover:r}=this.props;if((0,O.O9)(r)){const{lines:r,line1:s,line2:n}=en(this.props,e);if((0,O.O9)(s)&&(0,O.O9)(n)){const{mouseXY:s,xScale:n,chartConfig:{yScale:i}}=e,a=Ss({x1Value:r.line1.x1,y1Value:r.line1.y1,x2Value:r.line1.x2,y2Value:r.line1.y2,type:"LINE",mouseXY:s,tolerance:t,xScale:n,yScale:i}),o=Ss({x1Value:r.line2.x1,y1Value:r.line2.y1,x2Value:r.line2.x2,y2Value:r.line2.y2,type:"LINE",mouseXY:s,tolerance:t,xScale:n,yScale:i});return a||o}}return!1}drawOnCanvas(e,t){const{stroke:r,strokeWidth:s,fillOpacity:n,strokeOpacity:i,fill:a}=this.props,{line1:o,line2:l}=en(this.props,t);if((0,O.O9)(o)){const{x1:t,y1:c,x2:h,y2:d}=o;if(e.lineWidth=s,e.strokeStyle=(0,O.zX)(r,i),e.beginPath(),e.moveTo(t,c),e.lineTo(h,d),e.stroke(),(0,O.O9)(l)){const{y1:r,y2:s}=l;e.beginPath(),e.moveTo(t,r),e.lineTo(h,s),e.stroke(),e.fillStyle=(0,O.zX)(a,n),e.beginPath(),e.moveTo(t,c),e.lineTo(h,d),e.lineTo(h,s),e.lineTo(t,r),e.closePath(),e.fill()}}}renderSVG(e){const{stroke:t,strokeWidth:r,fillOpacity:s,fill:n,strokeOpacity:i}=this.props,{line1:a,line2:o}=en(this.props,e);if((0,O.O9)(a)){const{x1:e,y1:l,x2:c,y2:h}=a,d=(0,O.O9)(o)?w.createElement("line",{strokeWidth:r,stroke:t,strokeOpacity:i,x1:e,y1:o.y1,x2:c,y2:o.y2}):null,u=(0,O.O9)(o)?w.createElement("path",{fill:n,fillOpacity:s,d:Js(a,o)}):null;return w.createElement("g",null,w.createElement("line",{strokeWidth:r,stroke:t,strokeOpacity:i,x1:e,y1:l,x2:c,y2:h}),d,u)}}render(){const{selected:e,interactiveCursorClass:t}=this.props,{onDragStart:r,onDrag:s,onDragComplete:n,onHover:i,onUnHover:a}=this.props;return w.createElement(xe,{isHover:this.isHover,svgDraw:this.renderSVG,canvasToDraw:be,canvasDraw:this.drawOnCanvas,interactiveCursorClass:t,selected:e,onDragStart:r,onDrag:s,onDragComplete:n,onHover:i,onUnHover:a,drawOn:["mousemove","mouseleave","pan","drag"]})}}function Js(e,t){const r=(0,Ce.A)();return r.moveTo(e.x1,e.y1),r.lineTo(e.x2,e.y2),r.lineTo(e.x2,t.y2),r.lineTo(e.x1,t.y1),r.closePath(),r.toString()}function en(e,t){const r=function(e,t){const{startXY:r,endXY:s,dy:n,type:i}=e,{xScale:a}=t;if((0,O.pN)(r)||(0,O.pN)(s))return{};const o=Es({type:i,start:r,end:s,xScale:a});return{line1:o,line2:(0,O.O9)(n)?{...o,y1:o.y1+n,y2:o.y2+n}:void 0}}(e,t),{xScale:s,chartConfig:{yScale:n}}=t,i=s(r.line1.x1),a=n(r.line1.y1),o=s(r.line1.x2);return{lines:r,line1:{x1:i,y1:a,x2:o,y2:n(r.line1.y2)},line2:(0,O.O9)(r.line2)?{x1:i,y1:n(r.line2.y1),x2:o,y2:n(r.line2.y2)}:void 0}}Ks.propTypes={interactiveCursorClass:E().string,stroke:E().string.isRequired,strokeWidth:E().number.isRequired,fill:E().string.isRequired,fillOpacity:E().number.isRequired,strokeOpacity:E().number.isRequired,type:E().oneOf(["XLINE","RAY","LINE"]).isRequired,onDragStart:E().func.isRequired,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired,onHover:E().func,onUnHover:E().func,defaultClassName:E().string,tolerance:E().number.isRequired,selected:E().bool.isRequired},Ks.defaultProps={onDragStart:O.lQ,onDrag:O.lQ,onDragComplete:O.lQ,type:"LINE",strokeWidth:1,tolerance:4,selected:!1};const tn=Ks;function rn(){return rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},rn.apply(null,arguments)}class sn extends w.Component{constructor(e){super(e),this.handleLine1Edge1Drag=this.handleLine1Edge1Drag.bind(this),this.handleLine1Edge2Drag=this.handleLine1Edge2Drag.bind(this),this.handleDragStart=this.handleDragStart.bind(this),this.handleChannelDrag=this.handleChannelDrag.bind(this),this.handleChannelHeightChange=this.handleChannelHeightChange.bind(this),this.getEdgeCircle=this.getEdgeCircle.bind(this),this.handleHover=this.handleHover.bind(this),this.isHover=bs.bind(this),this.saveNodeType=fs.bind(this),this.nodes={},this.state={hover:!1}}handleHover(e){this.state.hover!==e.hovering&&this.setState({hover:e.hovering})}handleDragStart(){const{startXY:e,endXY:t,dy:r}=this.props;this.dragStart={startXY:e,endXY:t,dy:r}}handleChannelDrag(e){const{index:t,onDrag:r}=this.props,{startXY:s,endXY:n}=this.dragStart,{xScale:i,chartConfig:{yScale:a},xAccessor:o,fullData:l}=e,{startPos:c,mouseXY:h}=e,d=i(s[0]),u=a(s[1]),p=i(n[0]),m=a(n[1]),g=c[0]-h[0],f=c[1]-h[1];r(t,{startXY:[L(i,o,[d-g,u-f],l),a.invert(u-f)],endXY:[L(i,o,[p-g,m-f],l),a.invert(m-f)],dy:this.dragStart.dy})}handleLine1Edge1Drag(e){const{index:t,onDrag:r}=this.props,{startXY:s}=this.dragStart,{startPos:n,mouseXY:i,xAccessor:a,xScale:o,fullData:l,chartConfig:{yScale:c}}=e,h=n[0]-i[0],d=n[1]-i[1],u=o(s[0]),p=c(s[1]);r(t,{startXY:[L(o,a,[u-h,p-d],l),c.invert(p-d)],endXY:this.dragStart.endXY,dy:this.dragStart.dy})}handleLine1Edge2Drag(e){const{index:t,onDrag:r}=this.props,{endXY:s}=this.dragStart,{startPos:n,mouseXY:i,xAccessor:a,xScale:o,fullData:l,chartConfig:{yScale:c}}=e,h=n[0]-i[0],d=n[1]-i[1],u=o(s[0]),p=c(s[1]),m=L(o,a,[u-h,p-d],l),g=c.invert(p-d);r(t,{startXY:this.dragStart.startXY,endXY:[m,g],dy:this.dragStart.dy})}handleChannelHeightChange(e){const{index:t,onDrag:r}=this.props,{startXY:s,endXY:n}=this.dragStart,{chartConfig:{yScale:i}}=e,{startPos:a,mouseXY:o}=e,l=i(n[1]),c=a[1]-o[1];r(t,{startXY:s,endXY:n,dy:i.invert(l-c)-n[1]+this.dragStart.dy})}getEdgeCircle({xy:e,dragHandler:t,cursor:r,fill:s,edge:n}){const{hover:i}=this.state,{appearance:a}=this.props,{edgeStroke:o,edgeStrokeWidth:l,r:c}=a,{selected:h}=this.props,{onDragComplete:d}=this.props;return w.createElement(Fs,{ref:this.saveNodeType(n),show:h||i,cx:e[0],cy:e[1],r:c,fill:s,stroke:o,strokeWidth:l,interactiveCursorClass:r,onDragStart:this.handleDragStart,onDrag:t,onDragComplete:d})}render(){const{startXY:e,endXY:t,dy:r}=this.props,{interactive:s,hoverText:n,appearance:i}=this.props,{edgeFill:a,edgeFill2:o,stroke:l,strokeWidth:c,strokeOpacity:h,fill:d,fillOpacity:u}=i,{selected:p}=this.props,{onDragComplete:m}=this.props,{hover:g}=this.state,{enable:f,...y}=n,b=s?{onHover:this.handleHover,onUnHover:this.handleHover}:{},v=(0,O.O9)(e)&&(0,O.O9)(t)?w.createElement("g",null,this.getEdgeCircle({xy:e,dragHandler:this.handleLine1Edge1Drag,cursor:"react-stockcharts-move-cursor",fill:a,edge:"line1edge1"}),this.getEdgeCircle({xy:t,dragHandler:this.handleLine1Edge2Drag,cursor:"react-stockcharts-move-cursor",fill:a,edge:"line1edge2"})):null,k=(0,O.O9)(r)?w.createElement("g",null,this.getEdgeCircle({xy:[e[0],e[1]+r],dragHandler:this.handleChannelHeightChange,cursor:"react-stockcharts-ns-resize-cursor",fill:o,edge:"line2edge1"}),this.getEdgeCircle({xy:[t[0],t[1]+r],dragHandler:this.handleChannelHeightChange,cursor:"react-stockcharts-ns-resize-cursor",fill:o,edge:"line2edge2"})):null;return w.createElement("g",null,w.createElement(tn,rn({ref:this.saveNodeType("channel"),selected:p||g},b,{startXY:e,endXY:t,dy:r,stroke:l,strokeWidth:g||p?c+1:c,strokeOpacity:h,fill:d,fillOpacity:u,interactiveCursorClass:"react-stockcharts-move-cursor",onDragStart:this.handleDragStart,onDrag:this.handleChannelDrag,onDragComplete:m})),v,k,w.createElement(Ms,rn({show:f&&g&&!p},y)))}}sn.propTypes={startXY:E().arrayOf(E().number).isRequired,endXY:E().arrayOf(E().number).isRequired,dy:E().number,interactive:E().bool.isRequired,selected:E().bool.isRequired,hoverText:E().object.isRequired,appearance:E().shape({stroke:E().string.isRequired,fillOpacity:E().number.isRequired,strokeOpacity:E().number.isRequired,strokeWidth:E().number.isRequired,fill:E().string.isRequired,edgeStroke:E().string.isRequired,edgeFill:E().string.isRequired,edgeFill2:E().string.isRequired,edgeStrokeWidth:E().number.isRequired,r:E().number.isRequired}).isRequired,index:E().number,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired},sn.defaultProps={yDisplayFormat:e=>e.toFixed(2),interactive:!0,selected:!1,onDrag:O.lQ,onDragComplete:O.lQ,hoverText:{enable:!1}};const nn=sn;function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},an.apply(null,arguments)}class on extends w.Component{constructor(e){super(e),this.handleStart=this.handleStart.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleDrawChannel=this.handleDrawChannel.bind(this),this.handleDragChannel=this.handleDragChannel.bind(this),this.handleDragChannelComplete=this.handleDragChannelComplete.bind(this),this.terminate=gs.bind(this),this.saveNodeType=fs.bind(this),this.getSelectionState=ys("channels").bind(this),this.nodes=[],this.state={}}handleDragChannel(e,t){this.setState({override:{index:e,...t}})}handleDragChannelComplete(e){const{override:t}=this.state,{channels:r}=this.props;if((0,O.O9)(t)){const{index:s,...n}=t,i=r.map((e,t)=>t===s?{...e,...n,selected:!0}:e);this.setState({override:null},()=>{this.props.onComplete(i,e)})}}handleDrawChannel(e){const{current:t}=this.state;if((0,O.O9)(t)&&(0,O.O9)(t.startXY))if(this.mouseMoved=!0,(0,O.pN)(t.dy))this.setState({current:{startXY:t.startXY,endXY:e}});else{const r=ws(t.startXY,t.endXY),s=Ds(r,t.endXY),n=r*e[0]+s,i=e[1]-n;this.setState({current:{...t,dy:i}})}}handleStart(e){const{current:t}=this.state;((0,O.pN)(t)||(0,O.pN)(t.startXY))&&(this.mouseMoved=!1,this.setState({current:{startXY:e,endXY:null}},()=>{this.props.onStart()}))}handleEnd(e,t,r){const{current:s}=this.state,{channels:n,appearance:i}=this.props;if(this.mouseMoved&&(0,O.O9)(s)&&(0,O.O9)(s.startXY))if((0,O.pN)(s.dy))this.setState({current:{...s,dy:0}});else{const e=[...n.map(e=>({...e,selected:!1})),{...s,selected:!0,appearance:i}];this.setState({current:null},()=>{this.props.onComplete(e,t,r)})}}render(){const{appearance:e}=this.props,{enabled:t}=this.props,{currentPositionRadius:r,currentPositionStroke:s}=this.props,{currentPositionOpacity:n,currentPositionStrokeWidth:i}=this.props,{channels:a,hoverText:o}=this.props,{current:l,override:c}=this.state,h=(0,O.O9)(c)?c.index:null,d=(0,O.O9)(l)&&(0,O.O9)(l.endXY)?w.createElement(nn,an({interactive:!1},l,{appearance:e,hoverText:o})):null;return w.createElement("g",null,a.map((t,r)=>{const s=(0,O.O9)(t.appearance)?{...e,...t.appearance}:e;return w.createElement(nn,an({key:r,ref:this.saveNodeType(r),index:r,selected:t.selected,hoverText:o},r===h?c:t,{appearance:s,onDrag:this.handleDragChannel,onDragComplete:this.handleDragChannelComplete}))}),d,w.createElement(Ls,{enabled:t,snap:!1,r,stroke:s,opacity:n,strokeWidth:i,onMouseDown:this.handleStart,onClick:this.handleEnd,onMouseMove:this.handleDrawChannel}))}}function ln(){return ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ln.apply(null,arguments)}on.propTypes={enabled:E().bool.isRequired,onStart:E().func.isRequired,onComplete:E().func.isRequired,onSelect:E().func.isRequired,currentPositionStroke:E().string,currentPositionStrokeWidth:E().number,currentPositionOpacity:E().number,currentPositionRadius:E().number,hoverText:E().object.isRequired,channels:E().array.isRequired,appearance:E().shape({stroke:E().string.isRequired,strokeOpacity:E().number.isRequired,strokeWidth:E().number.isRequired,fill:E().string.isRequired,fillOpacity:E().number.isRequired,edgeStroke:E().string.isRequired,edgeFill:E().string.isRequired,edgeFill2:E().string.isRequired,edgeStrokeWidth:E().number.isRequired,r:E().number.isRequired}).isRequired},on.defaultProps={onStart:O.lQ,onComplete:O.lQ,onSelect:O.lQ,currentPositionStroke:"#000000",currentPositionOpacity:1,currentPositionStrokeWidth:3,currentPositionRadius:4,hoverText:{...Ms.defaultProps,enable:!0,bgHeight:18,bgWidth:120,text:"Click to select object"},channels:[],appearance:{stroke:"#000000",strokeOpacity:1,strokeWidth:1,fill:"#8AAFE2",fillOpacity:.7,edgeStroke:"#000000",edgeFill:"#FFFFFF",edgeFill2:"#250B98",edgeStrokeWidth:1,r:5}};class cn extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}isHover(e){const{tolerance:t,onHover:r}=this.props;if((0,O.O9)(r)){const{mouseXY:r}=e,{x1:s,y1:n,x2:i,y2:a,dy:o}=dn(this.props,e);return[-o,0,o].reduce((e,o)=>e||xs([s,n+o],[i,a+o],r,t),!1)}return!1}drawOnCanvas(e,t){const{stroke:r,strokeWidth:s,fillOpacity:n,strokeOpacity:i,fill:a}=this.props,{x1:o,y1:l,x2:c,y2:h,dy:d}=dn(this.props,t);e.lineWidth=s,e.strokeStyle=(0,O.zX)(r,i),e.fillStyle=(0,O.zX)(a,n),e.beginPath(),e.moveTo(o,l-d),e.lineTo(c,h-d),e.stroke(),e.beginPath(),e.moveTo(c,h+d),e.lineTo(o,l+d),e.stroke(),e.beginPath(),e.moveTo(o,l-d),e.lineTo(c,h-d),e.lineTo(c,h+d),e.lineTo(o,l+d),e.closePath(),e.fill(),e.beginPath(),e.moveTo(c,h),e.lineTo(o,l),e.stroke()}renderSVG(e){const{stroke:t,strokeWidth:r,fillOpacity:s,strokeOpacity:n,fill:i}=this.props,{x1:a,y1:o,x2:l,y2:c,dy:h}=dn(this.props,e),d={strokeWidth:r,stroke:t,strokeOpacity:n},u=(0,Ce.A)();return u.moveTo(a,o-h),u.lineTo(l,c-h),u.lineTo(l,c+h),u.lineTo(a,o+h),u.closePath(),w.createElement("g",null,w.createElement("line",ln({},d,{x1:a,y1:o-h,x2:l,y2:c-h})),w.createElement("line",ln({},d,{x1:a,y1:o+h,x2:l,y2:c+h})),w.createElement("path",{d:u.toString(),fill:i,fillOpacity:s}),w.createElement("line",ln({},d,{x1:a,y1:o,x2:l,y2:c})))}render(){const{selected:e,interactiveCursorClass:t}=this.props,{onHover:r,onUnHover:s}=this.props;return w.createElement(xe,{isHover:this.isHover,svgDraw:this.renderSVG,canvasToDraw:be,canvasDraw:this.drawOnCanvas,interactiveCursorClass:t,selected:e,onHover:r,onUnHover:s,drawOn:["mousemove","mouseleave","pan","drag"]})}}function hn(e){return function(t){const{x2:r,y2:s}=dn(e,t);return[r,s]}}function dn(e,t){const{x1Value:r,x2Value:s,type:n}=e,{xScale:i,chartConfig:{yScale:a},fullData:o}=t,{xAccessor:l}=t,{left:c}=(0,O.fK)(o,r,l),{right:h}=(0,O.fK)(o,s,l),d=Math.min(c,h),u=Math.max(c,h)+1,p=o.slice(d,u),m=p.map(e=>l(e).valueOf()),g=p.map(e=>e.close),f=p.length,y=(0,O.LI)().combine((e,t)=>e*t)(m,g),b=m.map(e=>Math.pow(e,2)),v=(f*(0,R.cz)(y)-(0,R.cz)(m)*(0,R.cz)(g))/(f*(0,R.cz)(b)-Math.pow((0,R.cz)(m),2)),k=((0,R.cz)(g)-v*(0,R.cz)(m))/f,x=k+v*r,S=k+v*s,C=i(r),w=a(x);return{x1:C,y1:w,x2:i(s),y2:a(S),dy:a(x-("SD"===n?(0,R.KS)(p,e=>e.close):0))-w}}cn.propTypes={x1Value:E().any.isRequired,x2Value:E().any.isRequired,type:E().oneOf(["SD","Raff"]).isRequired,interactiveCursorClass:E().string,stroke:E().string.isRequired,strokeWidth:E().number.isRequired,fill:E().string.isRequired,fillOpacity:E().number.isRequired,strokeOpacity:E().number.isRequired,onDragStart:E().func.isRequired,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired,onHover:E().func,onUnHover:E().func,defaultClassName:E().string,tolerance:E().number.isRequired,selected:E().bool.isRequired},cn.defaultProps={onDragStart:O.lQ,onDrag:O.lQ,onDragComplete:O.lQ,type:"SD",strokeWidth:1,tolerance:4,selected:!1};const un=cn;function pn(){return pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},pn.apply(null,arguments)}class mn extends w.Component{constructor(e){super(e),this.handleEdge1Drag=this.handleEdge1Drag.bind(this),this.handleEdge2Drag=this.handleEdge2Drag.bind(this),this.handleHover=this.handleHover.bind(this),this.isHover=bs.bind(this),this.saveNodeType=fs.bind(this),this.nodes={},this.state={hover:!1}}handleEdge1Drag(e){const{index:t,onDrag:r,snapTo:s}=this.props,{x2Value:n}=this.props,[i]=gn(e,s);r(t,{x1Value:i,x2Value:n})}handleEdge2Drag(e){const{index:t,onDrag:r,snapTo:s}=this.props,{x1Value:n}=this.props,[i]=gn(e,s);r(t,{x1Value:n,x2Value:i})}handleHover(e){this.state.hover!==e.hovering&&this.setState({hover:e.hovering})}render(){const{x1Value:e,x2Value:t,appearance:r,edgeInteractiveCursor:s,hoverText:n,interactive:i,selected:a,onDragComplete:o}=this.props,{stroke:l,strokeWidth:c,strokeOpacity:h,fill:d,fillOpacity:u,r:p,edgeStrokeWidth:m,edgeFill:g,edgeStroke:f}=r,{hover:y}=this.state,b=i?{onHover:this.handleHover,onUnHover:this.handleHover}:{},{enable:v,selectedText:k,text:x,...S}=n;return w.createElement("g",null,w.createElement(un,pn({ref:this.saveNodeType("area"),selected:a||y},b,{x1Value:e,x2Value:t,fill:d,stroke:l,strokeWidth:y||a?c+1:c,strokeOpacity:h,fillOpacity:u})),w.createElement(Fs,{ref:this.saveNodeType("edge1"),show:a||y,xyProvider:(C=this.props,function(e){const{x1:t,y1:r}=dn(C,e);return[t,r]}),r:p,fill:g,stroke:f,strokeWidth:m,interactiveCursorClass:s,onDrag:this.handleEdge1Drag,onDragComplete:o}),w.createElement(Fs,{ref:this.saveNodeType("edge2"),show:a||y,xyProvider:hn(this.props),r:p,fill:g,stroke:f,strokeWidth:m,interactiveCursorClass:s,onDrag:this.handleEdge2Drag,onDragComplete:o}),w.createElement(Ms,pn({show:v&&y},S,{text:a?k:x})));var C}}function gn(e,t){const{xScale:r,xAccessor:s,plotData:n,mouseXY:i}=e,a=I(r,s,i,n);return[s(a),t(a)]}mn.propTypes={defaultClassName:E().string,x1Value:E().any.isRequired,x2Value:E().any.isRequired,index:E().number,appearance:E().shape({stroke:E().string.isRequired,fillOpacity:E().number.isRequired,strokeOpacity:E().number.isRequired,strokeWidth:E().number.isRequired,fill:E().string.isRequired,edgeStrokeWidth:E().number.isRequired,edgeStroke:E().string.isRequired,edgeFill:E().string.isRequired,r:E().number.isRequired}).isRequired,edgeInteractiveCursor:E().string,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired,snapTo:E().func,interactive:E().bool.isRequired,selected:E().bool.isRequired,hoverText:E().object.isRequired},mn.defaultProps={onDrag:O.lQ,onDragComplete:O.lQ,appearance:{stroke:"#000000",fillOpacity:.7,strokeOpacity:1,strokeWidth:1,fill:"#8AAFE2",edgeStrokeWidth:2,edgeStroke:"#000000",edgeFill:"#FFFFFF",r:5},interactive:!0,selected:!1,hoverText:{...Ms.defaultProps,enable:!0,bgHeight:18,bgWidth:175,text:"Click and drag the edge circles"}};const fn=mn;class yn extends w.Component{constructor(e){super(e),this.handleStart=this.handleStart.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleDrawLine=this.handleDrawLine.bind(this),this.handleDragLine=this.handleDragLine.bind(this),this.handleDragLineComplete=this.handleDragLineComplete.bind(this),this.terminate=gs.bind(this),this.saveNodeType=fs.bind(this),this.getSelectionState=ys("channels").bind(this),this.nodes=[],this.state={}}handleDragLine(e,t){this.setState({override:{index:e,...t}})}handleDragLineComplete(e){const{override:t}=this.state,{channels:r}=this.props;if((0,O.O9)(t)){const s=r.map((e,r)=>r===t.index?{...e,start:[t.x1Value,t.y1Value],end:[t.x2Value,t.y2Value],selected:!0}:e);this.setState({override:null},()=>{this.props.onComplete(s,e)})}}handleDrawLine(e){const{current:t}=this.state;(0,O.O9)(t)&&(0,O.O9)(t.start)&&(this.mouseMoved=!0,this.setState({current:{start:t.start,end:e}}))}handleStart(e){const{current:t}=this.state;((0,O.pN)(t)||(0,O.pN)(t.start))&&(this.mouseMoved=!1,this.setState({current:{start:e,end:null}},()=>{this.props.onStart()}))}handleEnd(e,t,r){const{current:s}=this.state,{appearance:n,channels:i}=this.props;if(this.mouseMoved&&(0,O.O9)(s)&&(0,O.O9)(s.start)){const a=[...i.map(e=>({...e,selected:!1})),{start:s.start,end:e,selected:!0,appearance:n}];this.setState({current:null},()=>{this.props.onComplete(a,t,r)})}}render(){const{appearance:e}=this.props,{enabled:t,snapTo:r}=this.props,{currentPositionRadius:s,currentPositionStroke:n}=this.props,{currentPositionOpacity:i,currentPositionStrokeWidth:a}=this.props,{hoverText:o,channels:l}=this.props,{current:c,override:h}=this.state,d={...yn.defaultProps.appearance,...e},u={...yn.defaultProps.hoverText,...o},p=(0,O.O9)(c)&&(0,O.O9)(c.end)?w.createElement(fn,{interactive:!1,x1Value:c.start[0],x2Value:c.end[0],appearance:d,hoverText:u}):null;return w.createElement("g",null,l.map((e,t)=>{const s=(0,O.O9)(e.appearance)?{...d,...e.appearance}:d,n=(0,O.O9)(e.hoverText)?{...u,...e.hoverText}:u;return w.createElement(fn,{key:t,ref:this.saveNodeType(t),index:t,selected:e.selected,x1Value:ms(h,t,"x1Value",e.start[0]),x2Value:ms(h,t,"x2Value",e.end[0]),appearance:s,snapTo:r,hoverText:n,onDrag:this.handleDragLine,onDragComplete:this.handleDragLineComplete,edgeInteractiveCursor:"react-stockcharts-move-cursor"})}),p,w.createElement(Ls,{enabled:t,snap:!0,snapTo:r,r:s,stroke:n,opacity:i,strokeWidth:a,onMouseDown:this.handleStart,onClick:this.handleEnd,onMouseMove:this.handleDrawLine}))}}yn.propTypes={enabled:E().bool.isRequired,snapTo:E().func,onStart:E().func,onComplete:E().func.isRequired,onSelect:E().func,currentPositionStroke:E().string,currentPositionStrokeWidth:E().number,currentPositionOpacity:E().number,currentPositionRadius:E().number,appearance:E().shape({stroke:E().string,strokeOpacity:E().number,strokeWidth:E().number,fill:E().string,fillOpacity:E().number,edgeStrokeWidth:E().number,edgeStroke:E().string,edgeFill:E().string,r:E().number}).isRequired,hoverText:E().object,channels:E().array.isRequired},yn.defaultProps={snapTo:e=>e.close,appearance:{stroke:"#000000",fillOpacity:.2,strokeOpacity:1,strokeWidth:1,fill:"#8AAFE2",edgeStrokeWidth:2,edgeStroke:"#000000",edgeFill:"#FFFFFF",r:5},onStart:O.lQ,onComplete:O.lQ,onSelect:O.lQ,currentPositionStroke:"#000000",currentPositionOpacity:1,currentPositionStrokeWidth:3,currentPositionRadius:4,hoverText:{...Ms.defaultProps,enable:!0,bgHeight:"auto",bgWidth:"auto",text:"Click and drag the edge circles",selectedText:""},channels:[]};class bn extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}isHover(e){const{tolerance:t,onHover:r}=this.props,{mouseXY:s}=e,[n,i]=s;let a=!1;if((0,O.O9)(r)){const r=kn(this.props,e);for(let e=0;e<r.length;e++){const o=r[e],l=Math.min(o.x1,o.x2),c=Math.max(o.x1,o.x2),h=Math.min(o.y1,o.y2),d=Math.max(o.y1,o.y2);if(a=n>=l&&n<=c&&i>=h&&i<=d&&xs([o.x1,o.y1],[o.x2,o.y2],s,t),a)break}}return a}drawOnCanvas(e,t){const{stroke:r,strokeWidth:s,strokeOpacity:n,fill:i,fillOpacity:a,fontFamily:o,fontSize:l,fontFill:c}=this.props,h=kn(this.props,t);e.lineWidth=s,e.strokeStyle=(0,O.zX)(r,n),e.font=`${l}px ${o}`,e.fillStyle=c,h.forEach(t=>{const{x1:r,y1:s,x2:n,y2:i,label:a}=t;e.beginPath(),e.moveTo(r,s),e.lineTo(n,i),e.stroke(),e.beginPath(),e.fillText(a.text,a.x,a.y)}),(0,R.AS)(h).forEach(([t,r],s)=>{e.fillStyle=(0,O.zX)(i[s],a),e.beginPath(),e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineTo(r.x2,r.y2),e.closePath(),e.fill()})}renderSVG(e){const{stroke:t,strokeWidth:r,fillOpacity:s,fill:n,strokeOpacity:i}=this.props,a=kn(this.props,e),o=(0,R.AS)(a);return w.createElement("g",null,a.map((e,s)=>{const{x1:n,y1:a,x2:o,y2:l}=e;return w.createElement("line",{key:s,strokeWidth:r,stroke:t,strokeOpacity:i,x1:n,y1:a,x2:o,y2:l})}),o.map(([e,t],r)=>{const i=(0,Ce.A)();return i.moveTo(e.x1,e.y1),i.lineTo(e.x2,e.y2),i.lineTo(t.x2,t.y2),i.closePath(),w.createElement("path",{key:r,stroke:"none",fill:n[r],fillOpacity:s,d:i.toString()})}))}render(){const{selected:e,interactiveCursorClass:t}=this.props,{onDragStart:r,onDrag:s,onDragComplete:n,onHover:i,onUnHover:a}=this.props;return w.createElement(xe,{isHover:this.isHover,svgDraw:this.renderSVG,canvasToDraw:be,canvasDraw:this.drawOnCanvas,interactiveCursorClass:t,selected:e,onDragStart:r,onDrag:s,onDragComplete:n,onHover:i,onUnHover:a,drawOn:["mousemove","mouseleave","pan","drag"]})}}function vn(e,t,r,s){return{start:e,end:[t,r],text:s}}function kn(e,t){const{startXY:r,endXY:s}=e,{xScale:n,chartConfig:{yScale:i}}=t;if((0,O.pN)(r)||(0,O.pN)(s))return[];const[a,o]=r,[l,c]=s,h=l-a,d=c-o;if(0!==h&&0!==d){const e=vn(r,l,o+d/2,"2/1"),t=vn(r,l,o+d/3,"3/1"),u=vn(r,l,o+d/4,"4/1"),p=vn(r,l,o+d/8,"8/1"),m=vn(r,a+h/2,c,"1/2"),g=vn(r,a+h/3,c,"1/3"),f=vn(r,a+h/4,c,"1/4"),y=[vn(r,a+h/8,c,"1/8"),f,g,m,{start:r,end:s,text:"1/1"},e,t,u,p].map(e=>{const{x1:t,y1:r,x2:s,y2:a}=Es({type:"RAY",start:e.start,end:e.end,xScale:n,yScale:i});return{x1:n(t),y1:i(r),x2:n(s),y2:i(a),label:{x:n(e.end[0]),y:i(e.end[1]),text:e.text}}});return y}return[]}bn.propTypes={interactiveCursorClass:E().string,stroke:E().string.isRequired,strokeWidth:E().number.isRequired,fill:E().arrayOf(E().string).isRequired,strokeOpacity:E().number.isRequired,fillOpacity:E().number.isRequired,fontFamily:E().string.isRequired,fontSize:E().number.isRequired,fontFill:E().string.isRequired,onDragStart:E().func.isRequired,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired,onHover:E().func,onUnHover:E().func,defaultClassName:E().string,tolerance:E().number.isRequired,selected:E().bool.isRequired},bn.defaultProps={onDragStart:O.lQ,onDrag:O.lQ,onDragComplete:O.lQ,strokeWidth:1,tolerance:4,selected:!1};const xn=bn;function Sn(){return Sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Sn.apply(null,arguments)}class Cn extends w.Component{constructor(e){super(e),this.handleLine1Edge1Drag=this.handleLine1Edge1Drag.bind(this),this.handleLine1Edge2Drag=this.handleLine1Edge2Drag.bind(this),this.handleDragStart=this.handleDragStart.bind(this),this.handleFanDrag=this.handleFanDrag.bind(this),this.handleChannelHeightChange=this.handleChannelHeightChange.bind(this),this.handleHover=this.handleHover.bind(this),this.getEdgeCircle=this.getEdgeCircle.bind(this),this.isHover=bs.bind(this),this.saveNodeType=fs.bind(this),this.nodes={},this.state={hover:!1}}handleHover(e){this.state.hover!==e.hovering&&this.setState({hover:e.hovering})}handleDragStart(){const{startXY:e,endXY:t,dy:r}=this.props;this.dragStart={startXY:e,endXY:t,dy:r}}handleFanDrag(e){const{index:t,onDrag:r}=this.props,{startXY:s,endXY:n}=this.dragStart,{xScale:i,chartConfig:{yScale:a},xAccessor:o,fullData:l}=e,{startPos:c,mouseXY:h}=e,d=i(s[0]),u=a(s[1]),p=i(n[0]),m=a(n[1]),g=c[0]-h[0],f=c[1]-h[1];r(t,{startXY:[L(i,o,[d-g,u-f],l),a.invert(u-f)],endXY:[L(i,o,[p-g,m-f],l),a.invert(m-f)],dy:this.dragStart.dy})}handleLine1Edge1Drag(e){const{index:t,onDrag:r}=this.props,{startXY:s}=this.dragStart,{startPos:n,mouseXY:i,xAccessor:a,xScale:o,fullData:l,chartConfig:{yScale:c}}=e,h=n[0]-i[0],d=n[1]-i[1],u=o(s[0]),p=c(s[1]);r(t,{startXY:[L(o,a,[u-h,p-d],l),c.invert(p-d)],endXY:this.dragStart.endXY,dy:this.dragStart.dy})}handleLine1Edge2Drag(e){const{index:t,onDrag:r}=this.props,{endXY:s}=this.dragStart,{startPos:n,mouseXY:i,xAccessor:a,xScale:o,fullData:l,chartConfig:{yScale:c}}=e,h=n[0]-i[0],d=n[1]-i[1],u=o(s[0]),p=c(s[1]),m=L(o,a,[u-h,p-d],l),g=c.invert(p-d);r(t,{startXY:this.dragStart.startXY,endXY:[m,g],dy:this.dragStart.dy})}handleChannelHeightChange(e){const{index:t,onDrag:r}=this.props,{startXY:s,endXY:n}=this.dragStart,{chartConfig:{yScale:i}}=e,{startPos:a,mouseXY:o}=e,l=i(n[1]),c=a[1]-o[1];r(t,{startXY:s,endXY:n,dy:i.invert(l-c)-n[1]+this.dragStart.dy})}getEdgeCircle({xy:e,dragHandler:t,cursor:r,fill:s,edge:n}){const{hover:i}=this.state,{selected:a,appearance:o}=this.props,{edgeStroke:l,edgeStrokeWidth:c,r:h}=o,{onDragComplete:d}=this.props;return w.createElement(Fs,{ref:this.saveNodeType(n),show:a||i,cx:e[0],cy:e[1],r:h,fill:s,stroke:l,strokeWidth:c,interactiveCursorClass:r,onDragStart:this.handleDragStart,onDrag:t,onDragComplete:d})}render(){const{startXY:e,endXY:t}=this.props,{interactive:r,appearance:s}=this.props,{edgeFill:n,stroke:i,strokeWidth:a,strokeOpacity:o,fill:l,fillOpacity:c}=s,{fontFamily:h,fontSize:d,fontFill:u}=s,{hoverText:p,selected:m}=this.props,{onDragComplete:g}=this.props,{hover:f}=this.state,{enable:y,...b}=p,v=r?{onHover:this.handleHover,onUnHover:this.handleHover}:{},k=(0,O.O9)(e)&&(0,O.O9)(t)?w.createElement("g",null,this.getEdgeCircle({xy:e,dragHandler:this.handleLine1Edge1Drag,cursor:"react-stockcharts-move-cursor",fill:n,edge:"edge1"}),this.getEdgeCircle({xy:t,dragHandler:this.handleLine1Edge2Drag,cursor:"react-stockcharts-move-cursor",fill:n,edge:"edge2"})):null;return w.createElement("g",null,w.createElement(xn,Sn({ref:this.saveNodeType("fan"),selected:f||m},v,{startXY:e,endXY:t,stroke:i,strokeWidth:f||m?a+1:a,fill:l,strokeOpacity:o,fillOpacity:c,fontFamily:h,fontSize:d,fontFill:u,interactiveCursorClass:"react-stockcharts-move-cursor",onDragStart:this.handleDragStart,onDrag:this.handleFanDrag,onDragComplete:g})),k,w.createElement(Ms,Sn({show:y&&f&&!m},b)))}}Cn.propTypes={startXY:E().arrayOf(E().number).isRequired,endXY:E().arrayOf(E().number).isRequired,dy:E().number,interactive:E().bool.isRequired,selected:E().bool.isRequired,appearance:E().shape({stroke:E().string.isRequired,strokeOpacity:E().number.isRequired,fillOpacity:E().number.isRequired,strokeWidth:E().number.isRequired,edgeStroke:E().string.isRequired,edgeFill:E().string.isRequired,edgeStrokeWidth:E().number.isRequired,r:E().number.isRequired,fill:E().arrayOf(E().string).isRequired,fontFamily:E().string.isRequired,fontSize:E().number.isRequired,fontFill:E().string.isRequired}).isRequired,hoverText:E().object.isRequired,index:E().number,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired},Cn.defaultProps={yDisplayFormat:e=>e.toFixed(2),interactive:!0,selected:!1,appearance:{stroke:"#000000",fillOpacity:.2,strokeOpacity:1,strokeWidth:1,edgeStroke:"#000000",edgeFill:"#FFFFFF",edgeStrokeWidth:1,r:5,fill:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f"],fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:10,fontFill:"#000000"},onDrag:O.lQ,onDragComplete:O.lQ,hoverText:{...Ms.defaultProps,enable:!0,bgHeight:18,bgWidth:120,text:"Click to select object"}};const wn=Cn;function Dn(){return Dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Dn.apply(null,arguments)}class En extends w.Component{constructor(e){super(e),this.handleStart=this.handleStart.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleDrawFan=this.handleDrawFan.bind(this),this.handleDragFan=this.handleDragFan.bind(this),this.handleDragFanComplete=this.handleDragFanComplete.bind(this),this.terminate=gs.bind(this),this.saveNodeType=fs.bind(this),this.getSelectionState=ys("fans").bind(this),this.nodes=[],this.state={}}handleDragFan(e,t){this.setState({override:{index:e,...t}})}handleDragFanComplete(e){const{override:t}=this.state,{fans:r}=this.props;if((0,O.O9)(t)){const{index:s,...n}=t,i=r.map((e,t)=>t===s?{...e,...n,selected:!0}:e);this.setState({override:null},()=>{this.props.onComplete(i,e)})}}handleDrawFan(e){const{current:t}=this.state;(0,O.O9)(t)&&(0,O.O9)(t.startXY)&&(this.mouseMoved=!0,this.setState({current:{startXY:t.startXY,endXY:e}}))}handleStart(e){const{current:t}=this.state;((0,O.pN)(t)||(0,O.pN)(t.startXY))&&(this.mouseMoved=!1,this.setState({current:{startXY:e,endXY:null}},()=>{this.props.onStart()}))}handleEnd(e,t,r){const{current:s}=this.state,{fans:n,appearance:i}=this.props;if(this.mouseMoved&&(0,O.O9)(s)&&(0,O.O9)(s.startXY)){const e=[...n.map(e=>({...e,selected:!1})),{...s,selected:!0,appearance:i}];this.setState({current:null},()=>{this.props.onComplete(e,t,r)})}}render(){const{enabled:e,appearance:t}=this.props,{currentPositionRadius:r,currentPositionStroke:s}=this.props,{currentPositionOpacity:n,currentPositionStrokeWidth:i}=this.props,{hoverText:a,fans:o}=this.props,{current:l,override:c}=this.state,h=(0,O.O9)(c)?c.index:null,d=(0,O.O9)(l)&&(0,O.O9)(l.endXY)?w.createElement(wn,Dn({interactive:!1},l,{appearance:t,hoverText:a})):null;return w.createElement("g",null,o.map((e,r)=>{const s=(0,O.O9)(e.appearance)?{...t,...e.appearance}:t;return w.createElement(wn,Dn({key:r,ref:this.saveNodeType(r),index:r,selected:e.selected},r===h?c:e,{appearance:s,hoverText:a,onDrag:this.handleDragFan,onDragComplete:this.handleDragFanComplete}))}),d,w.createElement(Ls,{enabled:e,snap:!1,r,stroke:s,opacity:n,strokeWidth:i,onMouseDown:this.handleStart,onClick:this.handleEnd,onMouseMove:this.handleDrawFan}))}}En.propTypes={enabled:E().bool.isRequired,onStart:E().func.isRequired,onComplete:E().func.isRequired,onSelect:E().func,currentPositionStroke:E().string,currentPositionStrokeWidth:E().number,currentPositionOpacity:E().number,currentPositionRadius:E().number,appearance:E().shape({stroke:E().string.isRequired,strokeOpacity:E().number.isRequired,fillOpacity:E().number.isRequired,strokeWidth:E().number.isRequired,edgeStroke:E().string.isRequired,edgeFill:E().string.isRequired,edgeStrokeWidth:E().number.isRequired,r:E().number.isRequired,fill:E().arrayOf(E().string).isRequired,fontFamily:E().string.isRequired,fontSize:E().number.isRequired,fontFill:E().string.isRequired}).isRequired,hoverText:E().object.isRequired,fans:E().array.isRequired},En.defaultProps={appearance:{stroke:"#000000",fillOpacity:.2,strokeOpacity:1,strokeWidth:1,edgeStroke:"#000000",edgeFill:"#FFFFFF",edgeStrokeWidth:1,r:5,fill:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fontFill:"#000000"},onStart:O.lQ,onComplete:O.lQ,onSelect:O.lQ,currentPositionStroke:"#000000",currentPositionOpacity:1,currentPositionStrokeWidth:3,currentPositionRadius:4,hoverText:{...Ms.defaultProps,enable:!0,bgHeight:18,bgWidth:120,text:"Click to select object"},fans:[]};class Rn extends w.Component{render(){const{onMouseDown:e,onClick:t,onDoubleClick:r,onContextMenu:s,onMouseMove:n,onPan:i,onPanEnd:a}=this.props;return w.createElement(xe,{onMouseDown:e,onClick:t,onDoubleClick:r,onContextMenu:s,onMouseMove:n,onPan:i,onPanEnd:a,svgDraw:O.lQ,canvasDraw:O.lQ,canvasToDraw:be,drawOn:["mousemove","pan"]})}}Rn.propTypes={disablePan:E().bool.isRequired,onMouseDown:E().func,onClick:E().func,onDoubleClick:E().func,onContextMenu:E().func,onMouseMove:E().func,onPan:E().func,onPanEnd:E().func},Rn.defaultProps={disablePan:!1};class On extends w.Component{constructor(e,t){super(e,t),this.handleZoomStart=this.handleZoomStart.bind(this),this.handleDrawSquare=this.handleDrawSquare.bind(this),this.handleZoomComplete=this.handleZoomComplete.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.renderSVG=this.renderSVG.bind(this),this.saveNode=this.saveNode.bind(this),this.terminate=this.terminate.bind(this),this.state={rect:null}}terminate(){this.zoomHappening=!1,this.setState({x1y1:null,start:null,end:null,rect:null})}saveNode(e){this.node=e}drawOnCanvas(e){const{rect:t}=this.state;if((0,O.O9)(t)){const{x:r,y:s,height:n,width:i}=t,{stroke:a,fill:o,strokeDashArray:l}=this.props,{strokeOpacity:c,fillOpacity:h}=this.props,d=(0,O.KA)(l).split(",").map(e=>+e);e.strokeStyle=(0,O.zX)(a,c),e.fillStyle=(0,O.zX)(o,h),e.setLineDash(d),e.beginPath(),e.fillRect(r,s,i,n),e.strokeRect(r,s,i,n)}}renderSVG(){const{rect:e}=this.state;if((0,O.O9)(e)){const{x:t,y:r,height:s,width:n}=e,{stroke:i,strokeDashArray:a}=this.props,{strokeOpacity:o,fillOpacity:l}=this.props,c=(0,O.KA)(a).split(",").map(e=>+e);return w.createElement("rect",{strokeDasharray:c,stroke:i,fill:"none",strokeOpacity:o,fillOpacity:l,x:t,y:r,width:n,height:s})}}handleZoomStart(e){this.zoomHappening=!1;const{mouseXY:[,t],currentItem:r,chartConfig:{yScale:s},xAccessor:n,xScale:i}=e,a=[i(n(r)),t];this.setState({selected:!0,x1y1:a,start:{item:r,xValue:n(r),yValue:s.invert(t)}})}handleDrawSquare(e){if(null==this.state.x1y1)return;this.zoomHappening=!0;const{mouseXY:[,t],currentItem:r,chartConfig:{yScale:s},xAccessor:n,xScale:i}=e,[a,o]=[i(n(r)),t],{x1y1:[l,c]}=this.state,h=Math.min(l,a),d=Math.min(c,o),u=Math.abs(o-c),p=Math.abs(a-l);this.setState({selected:!0,end:{item:r,xValue:n(r),yValue:s.invert(t)},rect:{x:h,y:d,height:u,width:p}})}handleZoomComplete(e){if(this.zoomHappening){const{onBrush:t}=this.props,{start:r,end:s}=this.state;t({start:r,end:s},e)}this.setState({selected:!1,rect:null})}render(){const{enabled:e}=this.props;return e?w.createElement(xe,{ref:this.saveNode,disablePan:e,svgDraw:this.renderSVG,canvasToDraw:be,canvasDraw:this.drawOnCanvas,onMouseDown:this.handleZoomStart,onMouseMove:this.handleDrawSquare,onClick:this.handleZoomComplete,drawOn:["mousemove","pan","drag"]}):null}}On.propTypes={enabled:E().bool.isRequired,onStart:E().func.isRequired,onBrush:E().func.isRequired,type:E().oneOf(["1D","2D"]),stroke:E().string,fill:E().string,strokeOpacity:E().number,fillOpacity:E().number,interactiveState:E().object,strokeDashArray:E().string},On.defaultProps={type:"2D",stroke:"#000000",fillOpacity:.3,strokeOpacity:1,fill:"#3h3h3h",onBrush:O.lQ,onStart:O.lQ,strokeDashArray:"ShortDash"};class Tn extends w.Component{constructor(e){super(e),this.calculateTextWidth=!0,this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}isHover(e){const{onHover:t}=this.props;if((0,O.O9)(t)&&(0,O.O9)(this.textWidth)&&!this.calculateTextWidth){const{rect:t}=Fn(this.props,e,this.textWidth),{mouseXY:[r,s]}=e;if(r>=t.x&&s>=t.y&&r<=t.x+t.width&&s<=t.y+t.height)return!0}return!1}componentWillReceiveProps(e){this.calculateTextWidth=e.text!==this.props.text||e.fontStyle!==this.props.fontStyle||e.fontWeight!==this.props.fontWeight||e.fontSize!==this.props.fontSize||e.fontFamily!==this.props.fontFamily}drawOnCanvas(e,t){const{bgFill:r,bgOpacity:s,bgStrokeWidth:n,bgStroke:i,textFill:a,fontFamily:o,fontSize:l,fontStyle:c,fontWeight:h,text:d}=this.props;if(this.calculateTextWidth){e.font=`${c} ${h} ${l}px ${o}`;const{width:t}=e.measureText(d);this.textWidth=t,this.calculateTextWidth=!1}const{selected:u}=this.props,{x:p,y:m,rect:g}=Fn(this.props,t,this.textWidth);e.fillStyle=(0,O.zX)(r,s),e.beginPath(),e.fillRect(g.x,g.y,g.width,g.height),u&&(e.strokeStyle=i,e.lineWidth=n,e.strokeRect(g.x,g.y,g.width,g.height)),e.fillStyle=a,e.textBaseline="middle",e.textAlign="center",e.font=`${c} ${h} ${l}px ${o}`,e.beginPath(),e.fillText(d,p,m)}renderSVG(){throw new Error("svg not implemented")}render(){const{selected:e,interactiveCursorClass:t}=this.props,{onHover:r,onUnHover:s}=this.props,{onDragStart:n,onDrag:i,onDragComplete:a}=this.props;return w.createElement(xe,{isHover:this.isHover,svgDraw:this.renderSVG,canvasToDraw:be,canvasDraw:this.drawOnCanvas,interactiveCursorClass:t,selected:e,onDragStart:n,onDrag:i,onDragComplete:a,onHover:r,onUnHover:s,drawOn:["mousemove","mouseleave","pan","drag"]})}}function Fn(e,t,r){const{position:s,fontSize:n}=e,{xScale:i,chartConfig:{yScale:a}}=t,[o,l]=s,c=i(o),h=a(l);return{x:c,y:h,rect:{x:c-r/2-n,y:h-n,width:r+2*n,height:2*n}}}Tn.propTypes={bgFill:E().string.isRequired,bgOpacity:E().number.isRequired,bgStrokeWidth:E().number.isRequired,bgStroke:E().string.isRequired,textFill:E().string.isRequired,fontFamily:E().string.isRequired,fontSize:E().number.isRequired,fontWeight:E().oneOfType([E().number,E().string]).isRequired,fontStyle:E().string.isRequired,text:E().string.isRequired,onDragStart:E().func.isRequired,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired,onHover:E().func,onUnHover:E().func,defaultClassName:E().string,interactiveCursorClass:E().string,tolerance:E().number.isRequired,selected:E().bool.isRequired},Tn.defaultProps={onDragStart:O.lQ,onDrag:O.lQ,onDragComplete:O.lQ,type:"SD",fontWeight:"normal",tolerance:4,selected:!1};const Pn=Tn;function qn(){return qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},qn.apply(null,arguments)}class An extends w.Component{constructor(e){super(e),this.handleHover=this.handleHover.bind(this),this.handleDragStart=this.handleDragStart.bind(this),this.handleDrag=this.handleDrag.bind(this),this.isHover=bs.bind(this),this.saveNodeType=fs.bind(this),this.nodes={},this.state={hover:!1}}handleDragStart(e){const{position:t}=this.props,{mouseXY:r}=e,{chartConfig:{yScale:s},xScale:n}=e,[i,a]=r,[o,l]=t,c=i-n(o),h=a-s(l);this.dragStartPosition={position:t,dx:c,dy:h}}handleDrag(e){const{index:t,onDrag:r}=this.props,{mouseXY:[,s],chartConfig:{yScale:n},xAccessor:i,mouseXY:a,plotData:o,xScale:l}=e,{dx:c,dy:h}=this.dragStartPosition;r(t,[l.invert(l(L(l,i,a,o))-c),n.invert(s-h)])}handleHover(e){this.state.hover!==e.hovering&&this.setState({hover:e.hovering})}render(){const{position:e,bgFill:t,bgOpacity:r,bgStroke:s,bgStrokeWidth:n,textFill:i,fontFamily:a,fontSize:o,fontWeight:l,fontStyle:c,text:h,hoverText:d,selected:u,onDragComplete:p}=this.props,{hover:m}=this.state,g={onHover:this.handleHover,onUnHover:this.handleHover},{enable:f,selectedText:y,text:b,...v}=d;return w.createElement("g",null,w.createElement(Pn,qn({ref:this.saveNodeType("text"),selected:u||m,interactiveCursorClass:"react-stockcharts-move-cursor"},g,{onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:p,position:e,bgFill:t,bgOpacity:r,bgStroke:s||i,bgStrokeWidth:n,textFill:i,fontFamily:a,fontStyle:c,fontWeight:l,fontSize:o,text:h})),w.createElement(Ms,qn({show:f&&m},v,{text:u?y:b})))}}An.propTypes={index:E().number,position:E().array.isRequired,bgFill:E().string.isRequired,bgOpacity:E().number.isRequired,bgStrokeWidth:E().number.isRequired,bgStroke:E().string,textFill:E().string.isRequired,fontWeight:E().string.isRequired,fontFamily:E().string.isRequired,fontStyle:E().string.isRequired,fontSize:E().number.isRequired,text:E().string.isRequired,selected:E().bool.isRequired,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired,hoverText:E().object.isRequired},An.defaultProps={onDrag:O.lQ,onDragComplete:O.lQ,bgOpacity:1,bgStrokeWidth:1,selected:!1,fill:"#8AAFE2",hoverText:{...Ms.defaultProps,enable:!0,bgHeight:"auto",bgWidth:"auto",text:"Click to select object"}};const Nn=An;function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Mn.apply(null,arguments)}class Wn extends w.Component{constructor(e){super(e),this.handleDraw=this.handleDraw.bind(this),this.handleDrag=this.handleDrag.bind(this),this.handleDragComplete=this.handleDragComplete.bind(this),this.terminate=gs.bind(this),this.saveNodeType=fs.bind(this),this.getSelectionState=ys("textList").bind(this),this.nodes=[],this.state={}}handleDrag(e,t){this.setState({override:{index:e,position:t}})}handleDragComplete(e){const{override:t}=this.state;if((0,O.O9)(t)){const{textList:r}=this.props,s=r.map((e,r)=>{const s=r===t.index;return s?{...e,position:t.position,selected:s}:{...e,selected:s}});this.setState({override:null},()=>{this.props.onDragComplete(s,e)})}}handleDrawLine(e){const{current:t}=this.state;(0,O.O9)(t)&&(0,O.O9)(t.start)&&this.setState({current:{start:t.start,end:e}})}handleDraw(e,t){const{enabled:r}=this.props;if(r){const{mouseXY:[,r],chartConfig:{yScale:s},xAccessor:n,currentItem:i}=e,a=[n(i),s.invert(r)],{defaultText:o,onChoosePosition:l}=this.props;l({...o,position:a},e,t)}}render(){const{textList:e,defaultText:t,hoverText:r}=this.props,{override:s}=this.state;return w.createElement("g",null,e.map((e,n)=>{const i=Wn.defaultProps.hoverText,a={...t,...e,hoverText:{...i,...r,...e.hoverText||{}}};return w.createElement(Nn,Mn({key:n,ref:this.saveNodeType(n),index:n},a,{selected:e.selected,position:ms(s,n,"position",e.position),onDrag:this.handleDrag,onDragComplete:this.handleDragComplete,edgeInteractiveCursor:"react-stockcharts-move-cursor"}))}),w.createElement(xe,{onClick:this.handleDraw,svgDraw:O.lQ,canvasDraw:O.lQ,canvasToDraw:be,drawOn:["mousemove","pan"]}),";")}}Wn.propTypes={onChoosePosition:E().func.isRequired,onDragComplete:E().func.isRequired,onSelect:E().func,defaultText:E().shape({bgFill:E().string.isRequired,bgOpacity:E().number.isRequired,bgStrokeWidth:E().number,bgStroke:E().string,textFill:E().string.isRequired,fontFamily:E().string.isRequired,fontWeight:E().string.isRequired,fontStyle:E().string.isRequired,fontSize:E().number.isRequired,text:E().string.isRequired}).isRequired,hoverText:E().object.isRequired,textList:E().array.isRequired,enabled:E().bool.isRequired},Wn.defaultProps={onChoosePosition:O.lQ,onDragComplete:O.lQ,onSelect:O.lQ,defaultText:{bgFill:"#D3D3D3",bgOpacity:1,bgStrokeWidth:1,textFill:"#F10040",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal",text:"Lorem ipsum..."},hoverText:{...Ms.defaultProps,enable:!0,bgHeight:"auto",bgWidth:"auto",text:"Click to select object",selectedText:""},textList:[]},Wn.contextTypes={subscribe:E().func.isRequired,unsubscribe:E().func.isRequired,generateSubscriptionId:E().func.isRequired,chartId:E().oneOfType([E().number,E().string]).isRequired};class Vn extends w.Component{constructor(e){super(e),this.saveNode=this.saveNode.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}saveNode(e){this.node=e}isHover(e){const{mouseXY:t}=e;if(this.closeIcon){const{textBox:e}=this.props,{x:r,y:s}=this.closeIcon,n=e.closeIcon.width/2,i=[r-n,s+n],a=[r+n,s-n];if(xs([r-n,s-n],[r+n,s+n],t,3)||xs(i,a,t,3))return!0}return!1}drawOnCanvas(e,t){const{stroke:r,strokeWidth:s,strokeOpacity:n,hovering:i,textBox:a}=this.props,[o,l]=function(e,t,r){const{yValue:s,text:n,textBox:i}=e,{fontFamily:a,fontStyle:o,fontWeight:l,fontSize:c}=e;r.font=`${o} ${l} ${c}px ${a}`;const{chartConfig:{yScale:h}}=t;return[i.left+i.padding.left+r.measureText(n).width+i.padding.right+i.closeIcon.padding.left+i.closeIcon.width/2,h(s)]}(this.props,t,e);this.closeIcon={x:o,y:l},e.beginPath(),e.lineWidth=i?s+1:s,e.strokeStyle=(0,O.zX)(r,n);const c=a.closeIcon.width/2;e.moveTo(o-c,l-c),e.lineTo(o+c,l+c),e.moveTo(o-c,l+c),e.lineTo(o+c,l-c),e.stroke()}renderSVG(){throw new Error("svg not implemented")}render(){const{interactiveCursorClass:e}=this.props,{show:t}=this.props,{onHover:r,onUnHover:s,onClick:n}=this.props;return t?w.createElement(xe,{ref:this.saveNode,interactiveCursorClass:e,isHover:this.isHover,onClickWhenHover:n,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,canvasToDraw:be,onHover:r,onUnHover:s,drawOn:["pan","mousemove","drag"]}):null}}Vn.propTypes={stroke:E().string.isRequired,strokeOpacity:E().number.isRequired,strokeWidth:E().number.isRequired,textBox:E().object.isRequired,hovering:E().bool,interactiveCursorClass:E().string,show:E().bool,onHover:E().func,onUnHover:E().func,onClick:E().func},Vn.defaultProps={show:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:1};const Hn=Vn;class zn extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this),this.isHover=this.isHover.bind(this)}isHover(e){const{onHover:t}=this.props;if((0,O.O9)(t)){const t=In(this.props,e);if(null==t)return!1;const{x1:r,x2:s,y:n,rect:i}=t,{mouseXY:[a,o]}=e;if(a>=i.x&&a<=i.x+this.width&&o>=i.y&&o<=i.y+i.height)return!0;if(r<=a&&s>=a&&Math.abs(o-n)<4)return!0}return!1}drawOnCanvas(e,t){const{bgFill:r,bgOpacity:s,textFill:n,fontFamily:i,fontSize:a,fontStyle:o,fontWeight:l,stroke:c,strokeWidth:h,strokeOpacity:d,strokeDasharray:u,text:p,textBox:m,edge:g}=this.props,{selected:f,hovering:y}=this.props,b=In(this.props,t);if(null==b)return;const{x1:v,x2:k,y:x,rect:S}=b;e.strokeStyle=(0,O.zX)(c,d),e.beginPath(),e.lineWidth=f||y?h+.25:h,e.textBaseline="middle",e.textAlign="start",e.font=`${o} ${l} ${m.fontSize}px ${i}`,this.width=m.padding.left+e.measureText(p).width+m.padding.right+(m.closeIcon.show?m.closeIcon.padding.left:0)+(m.closeIcon.show?m.closeIcon.width:0)+(m.closeIcon.show?m.closeIcon.padding.right:0),e.setLineDash((0,O.yI)(u)),e.moveTo(v,x),e.lineTo(S.x,x),e.moveTo(S.x,x),e.lineTo(k,x),e.stroke(),e.setLineDash([]),e.fillStyle=(0,O.zX)(r,s),m.show&&(m.Radius?(function(e,t,r,s,n,i){e.beginPath(),e.moveTo(t+i,r),e.lineTo(t+s-i,r),e.quadraticCurveTo(t+s,r,t+s,r+i),e.lineTo(t+s,r+n-i),e.quadraticCurveTo(t+s,r+n,t+s-i,r+n),e.lineTo(t+i,r+n),e.quadraticCurveTo(t,r+n,t,r+n-i),e.lineTo(t,r+i),e.quadraticCurveTo(t,r,t+i,r),e.closePath()}(e,S.x,S.y,this.width,S.height,m.Radius),e.fill()):(e.fillRect(S.x,S.y,this.width,S.height),e.strokeRect(S.x,S.y,this.width,S.height))),e.fillStyle=n,e.beginPath(),m.show&&e.fillText(p,S.x+m.padding.right,x);const C={...g,textFill:n,fontFamily:i,fontSize:a,opacity:s};g.show&&Xr(e,ss(x,g.displayFormat(this.props.yValue),C,t))}renderSVG(){throw new Error("svg not implemented")}render(){const{interactiveCursorClass:e}=this.props,{onHover:t,onUnHover:r}=this.props,{onDragStart:s,onDrag:n,onDragComplete:i}=this.props;return w.createElement(xe,{clip:!1,xxxyyy:!0,isHover:this.isHover,svgDraw:this.renderSVG,canvasToDraw:be,canvasDraw:this.drawOnCanvas,interactiveCursorClass:e,enableDragOnHover:!0,onDragStart:s,onDrag:n,onDragComplete:i,onHover:t,onUnHover:r,drawOn:["mousemove","mouseleave","pan","drag"]})}}function In(e,t){const{yValue:r,textBox:s}=e,{chartConfig:{width:n,yScale:i,height:a}}=t,o=Math.round(i(r));if(o>=0&&o<=a)return{x1:0,x2:n,y:o,rect:{x:s.left,y:o-s.height/2,height:s.height}}}zn.propTypes={bgFill:E().string.isRequired,bgOpacity:E().number.isRequired,stroke:E().string.isRequired,strokeWidth:E().number.isRequired,strokeOpacity:E().number.isRequired,strokeDasharray:E().string.isRequired,textFill:E().string.isRequired,fontFamily:E().string.isRequired,fontSize:E().number.isRequired,fontWeight:E().oneOfType([E().number,E().string]).isRequired,fontStyle:E().string.isRequired,text:E().string.isRequired,edge:E().object.isRequired,textBox:E().object.isRequired,yValue:E().number.isRequired,onDragStart:E().func.isRequired,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired,onHover:E().func,onUnHover:E().func,defaultClassName:E().string,interactiveCursorClass:E().string,tolerance:E().number.isRequired,selected:E().bool.isRequired,hovering:E().bool.isRequired},zn.defaultProps={onDragStart:O.lQ,onDrag:O.lQ,onDragComplete:O.lQ,fontWeight:"normal",strokeWidth:1,tolerance:4,selected:!1,hovering:!1};const Ln=zn;function Xn(){return Xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Xn.apply(null,arguments)}class Bn extends w.Component{constructor(e){super(e),this.handleHover=this.handleHover.bind(this),this.handleCloseIconHover=this.handleCloseIconHover.bind(this),this.handleDragStart=this.handleDragStart.bind(this),this.handleDrag=this.handleDrag.bind(this),this.handleDelete=this.handleDelete.bind(this),this.isHover=bs.bind(this),this.saveNodeType=fs.bind(this),this.nodes={},this.state={hover:!1,closeIconHover:!1}}handleDragStart(e){const{yValue:t}=this.props,{mouseXY:r}=e,{chartConfig:{yScale:s}}=e,[,n]=r,i=n-s(t);this.dragStartPosition={yValue:t,dy:i}}handleDrag(e){const{index:t,onDrag:r}=this.props,{mouseXY:[,s],chartConfig:{yScale:n}}=e,{dy:i}=this.dragStartPosition;r(t,n.invert(s-i))}handleDelete(e){const{index:t,onDelete:r}=this.props;r(t,e)}handleHover(e){this.state.hover!==e.hovering&&this.setState({hover:e.hovering,closeIconHover:!!e.hovering&&this.state.closeIconHover})}handleCloseIconHover(e){this.state.closeIconHover!==e.hovering&&this.setState({closeIconHover:e.hovering})}render(){const{yValue:e,bgFill:t,bgOpacity:r,textFill:s,fontFamily:n,fontSize:i,fontWeight:a,fontStyle:o,text:l,hoverText:c,selected:h,onDragComplete:d,stroke:u,strokeOpacity:p,strokeDasharray:m,strokeWidth:g,edge:f,textBox:y,draggable:b}=this.props,{hover:v,closeIconHover:k}=this.state,{enable:x,selectedText:S,text:C,...D}=c,E={onHover:this.handleHover,onUnHover:this.handleHover},R=b?{onDragStart:this.handleDragStart,onDrag:this.handleDrag,onDragComplete:d}:{};return w.createElement("g",null,w.createElement(Ln,Xn({ref:this.saveNodeType("priceCoordinate"),selected:h&&!k,hovering:v||k,interactiveCursorClass:"react-stockcharts-move-cursor"},E,R,{yValue:e,bgFill:t,bgOpacity:r,textFill:s,fontFamily:n,fontStyle:o,fontWeight:a,fontSize:i,stroke:u,strokeOpacity:p,strokeDasharray:m,strokeWidth:g,text:l,textBox:y,edge:f})),w.createElement(Hn,{show:!0,hovering:k,text:l,yValue:e,fontFamily:n,fontStyle:o,fontWeight:a,fontSize:i,textBox:y,stroke:u,strokeOpacity:p,onHover:this.handleCloseIconHover,onUnHover:this.handleCloseIconHover,onClick:this.handleDelete}),w.createElement(Ms,Xn({show:x&&v},D,{text:h?S:C})))}}Bn.propTypes={index:E().number,draggable:E().bool.isRequired,yValue:E().number.isRequired,bgFill:E().string.isRequired,bgOpacity:E().number.isRequired,stroke:E().string.isRequired,strokeWidth:E().number.isRequired,strokeOpacity:E().number.isRequired,strokeDasharray:E().string.isRequired,textFill:E().string.isRequired,fontWeight:E().string.isRequired,fontFamily:E().string.isRequired,fontStyle:E().string.isRequired,fontSize:E().number.isRequired,text:E().string.isRequired,selected:E().bool.isRequired,edge:E().object.isRequired,textBox:E().object.isRequired,onDrag:E().func.isRequired,onDragComplete:E().func.isRequired,onDelete:E().func.isRequired,hoverText:E().object},Bn.defaultProps={onDrag:O.lQ,onDragComplete:O.lQ,strokeWidth:1,opacity:1,selected:!1,fill:"#FFFFFF",draggable:!1};const Yn=Bn;function Gn(){return Gn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Gn.apply(null,arguments)}class $n extends w.Component{constructor(e){super(e),this.handleDrag=this.handleDrag.bind(this),this.handleDragComplete=this.handleDragComplete.bind(this),this.handleDelete=this.handleDelete.bind(this),this.terminate=gs.bind(this),this.saveNodeType=fs.bind(this),this.getSelectionState=ys("yCoordinateList").bind(this),this.nodes=[],this.state={}}handleDrag(e,t){this.setState({override:{index:e,yValue:t}})}handleDragComplete(e){const{override:t}=this.state;if((0,O.O9)(t)){const{yCoordinateList:r}=this.props,s=r.map((e,r)=>{const s=r===t.index;return s?{...e,yValue:t.yValue,selected:s}:{...e,selected:s}}),n=s[t.index];this.setState({override:null},()=>{this.props.onDragComplete(s,e,n)})}}handleDrawLine(e){const{current:t}=this.state;(0,O.O9)(t)&&(0,O.O9)(t.start)&&this.setState({current:{start:t.start,end:e}})}handleDelete(e,t){const{onDelete:r,yCoordinateList:s}=this.props;r(s[e],t)}render(){const{yCoordinateList:e}=this.props,{override:t}=this.state;return w.createElement("g",null,e.map((e,r)=>{const s=e;return w.createElement(Yn,Gn({key:e.id,ref:this.saveNodeType(r),index:r},s,{selected:e.selected,yValue:ms(t,r,"yValue",e.yValue),onDelete:this.handleDelete,onDrag:this.handleDrag,onDragComplete:this.handleDragComplete,edgeInteractiveCursor:"react-stockcharts-move-cursor"}))}))}}$n.propTypes={onChoosePosition:E().func.isRequired,onDragComplete:E().func.isRequired,onSelect:E().func,onDelete:E().func,defaultPriceCoordinate:E().shape({bgFill:E().string.isRequired,bgOpacity:E().number.isRequired,stroke:E().string.isRequired,strokeDasharray:E().oneOf(O.uF).isRequired,strokeOpacity:E().number.isRequired,strokeWidth:E().number.isRequired,textFill:E().string.isRequired,fontFamily:E().string.isRequired,fontWeight:E().string.isRequired,fontStyle:E().string.isRequired,fontSize:E().number.isRequired,text:E().string.isRequired,textBox:E().shape({height:E().number.isRequired,left:E().number.isRequired,show:E().bool,padding:E().shape({left:E().number.isRequired,right:E().number.isRequired}),closeIcon:E().shape({padding:E().shape({left:E().number.isRequired,right:E().number.isRequired}),width:E().number.isRequired})}).isRequired,edge:E().shape({stroke:E().string.isRequired,strokeOpacity:E().number.isRequired,strokeWidth:E().number.isRequired,fill:E().string.isRequired,fillOpacity:E().number.isRequired})}).isRequired,hoverText:E().object.isRequired,yCoordinateList:E().array.isRequired,enabled:E().bool.isRequired},$n.defaultProps={onChoosePosition:O.lQ,onDragComplete:O.lQ,onSelect:O.lQ,onDelete:O.lQ,defaultPriceCoordinate:{bgFill:"#FFFFFF",bgOpacity:1,stroke:"#6574CD",strokeOpacity:1,strokeDasharray:"ShortDash2",strokeWidth:1,textFill:"#6574CD",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal",text:"Alert",textBox:{height:24,left:20,show:!0,fontSize:12,padding:{left:10,right:5},closeIcon:{padding:{left:5,right:8},width:8}},edge:{stroke:"#6574CD",strokeOpacity:1,strokeWidth:1,fill:"#FFFFFF",fillOpacity:1,orient:"right",at:"right",arrowWidth:10,dx:0,rectWidth:50,rectHeight:20,rectRadius:0,displayFormat:(0,S.GP)(".2f")}},hoverText:{...Ms.defaultProps,enable:!0,bgHeight:18,bgWidth:175,text:"Click and drag the edge circles"},yCoordinateList:[]},$n.contextTypes={subscribe:E().func.isRequired,unsubscribe:E().func.isRequired,generateSubscriptionId:E().func.isRequired,chartId:E().oneOfType([E().number,E().string]).isRequired};const jn=$n;class Un extends w.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.handleDoubleClick=this.handleDoubleClick.bind(this),this.getInteraction=this.getInteraction.bind(this)}handleDoubleClick(e,t){t.preventDefault();const{onDoubleClick:r}=this.props,{enabled:s}=this.props;if(!s)return;const n=this.getInteraction(e).map(e=>{const t=e.objects.filter(e=>e.selected);return{...e,objects:t}}).filter(e=>e.objects.length>0);if(n.length>0){const t=(0,O.d5)(n);r({type:t.type,chartId:t.chartId,object:(0,O.d5)(t.objects)},vs(e,t.chartId))}}handleClick(e,t){t.preventDefault();const{onSelect:r}=this.props,{enabled:s}=this.props;s&&r(this.getInteraction(e),e)}getInteraction(e){const{getInteractiveNodes:t,drawingObjectMap:r}=this.props,s=t();return(0,O.s8)(s,t=>{if(null===t.node)return{type:t.type,chartId:t.chartId,objects:[]};const s=r[t.type],n=(0,O.O9)(s)?t.node.props[s]:void 0;if((0,O.O9)(n)&&Array.isArray(n)&&n.length>0){const r=vs(e,t.chartId);if(!1===r)return{type:t.type,chartId:t.chartId,objects:[]};const s=t.node.getSelectionState(r);return{type:t.type,chartId:t.chartId,objects:s}}return{type:t.type,chartId:t.chartId,objects:[]}})}render(){return w.createElement(fe,{svgDraw:O.lQ,canvasToDraw:be,canvasDraw:O.lQ,onMouseDown:this.handleClick,onDoubleClick:this.handleDoubleClick,drawOn:["mousemove","pan","drag"]})}}Un.propTypes={getInteractiveNodes:E().func.isRequired,onSelect:E().func.isRequired,onDoubleClick:E().func.isRequired,drawingObjectMap:E().object.isRequired,enabled:E().bool.isRequired},Un.defaultProps={enabled:!0,onDoubleClick:O.lQ};const Qn=Un;class Zn extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}getZonesBoundaries(e,t){const r={};return e.forEach(e=>{const s=t.filter((r,s)=>{const n=(0,O.UW)(new Date(+e.startTimeStamp),"UTC"),i=(0,O.UW)(new Date(+e.endTimeStamp),"UTC");return r.date>=n&&r.date<i&&t[s+1]&&(!t[s-1]||t[s-1].date<n)}),n=t.filter((r,s)=>{const n=(0,O.UW)(new Date(+e.startTimeStamp),"UTC"),i=(0,O.UW)(new Date(+e.endTimeStamp),"UTC");return r.date<=i&&r.date>n&&t[s-1]&&(!t[s+1]||t[s+1].date>i)});r[e.id]=s.map((e,t)=>({start:e,end:n[t]}))}),r}drawOnCanvas(e,t){const{xScale:r,xAccessor:s,plotData:n,height:i,chartConfig:{yScale:a}}=t,{zones:o}=this.props,l=o.reduce((e,t)=>(e[t.id]=t,e),{}),c=this.getZonesBoundaries(o,n);for(const[n,a]of Object.entries(c))a.forEach(a=>{const o=Math.round(r(s(a.start))),c=Math.round(r(s(a.end)))-o;if("gradientFill"in l[n]){const r=(0,O.s6)(l[n].gradientFill);e.fillStyle=r(t,e)}else e.fillStyle=(0,O.zX)(l[n].fill,l[n].opacity);e.fillRect(o,0,c,i)})}drawCanvasLine(e,t,r){e.beginPath(),e.strokeStyle=(0,O.zX)(r.stroke,r.strokeOpacity),e.lineWidth=r.strokeWidth,e.setLineDash((0,O.KA)(r.strokeDasharray).split(",")),e.moveTo(t.x,0),e.lineTo(t.x,t.height),e.stroke()}renderSVG(e){const t={stroke:"#000000",fill:"#ffcc00",x:0,y:0,width:100,opacity:.5,heigh:2.5};return w.createElement("rect",{className:t.className,stroke:t.stroke,fill:t.fill,x:t.x,y:t.y,width:t.width,fillOpacity:t.opacity,height:t.height})}render(){const{clip:e}=this.props;return w.createElement(xe,{clip:e,svgDraw:this.renderSVG,canvasToDraw:ye,canvasDraw:this.drawOnCanvas,drawOn:["pan"]})}}Zn.propTypes={zones:E().arrayOf(E().shape({id:E().string.isRequired,startTimeStamp:E().string.isRequired,endTimeStamp:E().string.isRequired,start:E().shape({hours:E().number.isRequired,minutes:E().number.isRequired,seconds:E().number.isRequired}),end:E().shape({hours:E().number.isRequired,minutes:E().number.isRequired,seconds:E().number.isRequired}),fill:E().string.isRequired,opacity:E().number.isRequired,gradientFill:E().array,stroke:E().string,strokeWidth:E().number,strokeOpacity:E().number,strokeDasharray:E().oneOf(O.uF),startLine:E().shape({stroke:E().string.isRequired,strokeWidth:E().number.isRequired,strokeOpacity:E().number.isRequired,strokeDasharray:E().oneOf(O.uF)}),endLine:E().shape({stroke:E().string.isRequired,strokeWidth:E().number.isRequired,strokeOpacity:E().number.isRequired,strokeDasharray:E().oneOf(O.uF)})}))};var _n=r(59154);function Kn(){return Kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Kn.apply(null,arguments)}class Jn extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this)}render(){return w.createElement(xe,{svgDraw:this.renderSVG,drawOn:["pan"]})}renderSVG(e){const{xAccessor:t}=e,{xScale:r,chartConfig:{yScale:s},plotData:n}=e,{className:i,usingProps:a,with:o}=this.props,l=function({when:e},t){return t.filter(e)}(this.props,n);return w.createElement("g",{className:`react-stockcharts-enable-interaction ${i}`},l.map((e,i)=>w.createElement(o,Kn({key:i},a,{xScale:r,yScale:s,xAccessor:t,plotData:n,datum:e}))))}}Jn.propTypes={className:E().string,with:E().func,when:E().func,usingProps:E().object},Jn.defaultProps={className:"react-stockcharts-annotate react-stockcharts-default-cursor"};const ei=Jn;class ti extends w.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(e){const{onClick:t}=this.props;if(t){const{xScale:r,yScale:s,datum:n}=this.props;t({xScale:r,yScale:s,datum:n},e)}}render(){const{className:e,textAnchor:t,fontFamily:r,fontSize:s,opacity:n,rotate:i}=this.props,{xAccessor:a,xScale:o,yScale:l}=this.props,{xPos:c,yPos:h,fill:d,text:u,tooltip:p}=ri(this.props,a,o,l);return w.createElement("g",{className:e},w.createElement("title",null,p),w.createElement("text",{x:c,y:h,fontFamily:r,fontSize:s,fill:d,opacity:n,transform:`rotate(${i}, ${c}, ${h})`,onClick:this.handleClick,textAnchor:t},u))}}function ri(e,t,r,s){const{x:n,y:i,datum:a,fill:o,text:l,tooltip:c,plotData:h}=e,d=(0,O.ER)(n),u=(0,O.ER)(i),[p,m]=[d({xScale:r,xAccessor:t,datum:a,plotData:h}),u({yScale:s,datum:a,plotData:h})];return{xPos:p,yPos:m,text:(0,O.ER)(l)(a),fill:(0,O.ER)(o)(a),tooltip:(0,O.ER)(c)(a)}}ti.propTypes={className:E().string,text:E().oneOfType([E().string,E().func]),textAnchor:E().string,fontFamily:E().string,fontSize:E().number,opacity:E().number,rotate:E().number,onClick:E().func,xAccessor:E().func,xScale:E().func,yScale:E().func,datum:E().object,x:E().oneOfType([E().number,E().func]),y:E().oneOfType([E().number,E().func])};const si={textAnchor:"middle",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:12,fill:"#000000",opacity:1,rotate:0,x:({xScale:e,xAccessor:t,datum:r})=>e(t(r))};ti.defaultProps={...si,className:"react-stockcharts-labelannotation"};const ni=ti;class ii extends w.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(e){const{onClick:t}=this.props;if(t){const{xScale:r,yScale:s,datum:n}=this.props;t({xScale:r,yScale:s,datum:n},e)}}render(){const{className:e,stroke:t,opacity:r}=this.props,{xAccessor:s,xScale:n,yScale:i,path:a}=this.props,{x:o,y:l,fill:c,tooltip:h}=function(e,t,r,s){const{x:n,y:i,datum:a,fill:o,tooltip:l,plotData:c}=e,h=(0,O.ER)(n),d=(0,O.ER)(i),[u,p]=[h({xScale:r,xAccessor:t,datum:a,plotData:c}),d({yScale:s,datum:a,plotData:c})];return{x:u,y:p,fill:(0,O.ER)(o)(a),tooltip:(0,O.ER)(l)(a)}}(this.props,s,n,i);return w.createElement("g",{className:e,onClick:this.handleClick},w.createElement("title",null,h),w.createElement("path",{d:a({x:o,y:l}),stroke:t,fill:c,opacity:r}))}}function ai(){return ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ai.apply(null,arguments)}ii.propTypes={className:E().string,path:E().func.isRequired,onClick:E().func,xAccessor:E().func,xScale:E().func,yScale:E().func,datum:E().object,stroke:E().string,fill:E().string,opacity:E().number},ii.defaultProps={className:"react-stockcharts-svgpathannotation",opacity:1,x:({xScale:e,xAccessor:t,datum:r})=>e(t(r))};class oi extends w.Component{constructor(e){super(e),this.renderSVG=this.renderSVG.bind(this),this.drawOnCanvas=this.drawOnCanvas.bind(this)}drawOnCanvas(e,t){!function(e,t,r,s){e.save();const{canvasOriginX:n,canvasOriginY:i,margin:a,ratio:o}=r;e.setTransform(1,0,0,1,0,0),e.scale(o,o),(0,O.O9)(n)?e.translate(n,i):e.translate(a.left+.5*o,a.top+.5*o),function(e,t,r){const{textAnchor:s,fontFamily:n,fontSize:i,opacity:a,rotate:o}=t,{xScale:l,chartConfig:c,xAccessor:h}=r,{xPos:d,yPos:u,fill:p,text:m}=ri(t,h,l,li(c)),g=o/180*Math.PI;e.save(),e.translate(d,u),e.rotate(g),e.font=`${i}px ${n}`,e.fillStyle=(0,O.zX)(p,a),e.textAlign="middle"===s?"center":s,e.beginPath(),e.fillText(m,0,0),e.restore()}(e,t,s),e.restore()}(e,this.props,this.context,t)}render(){return w.createElement(fe,{canvasToDraw:this.props.selectCanvas,svgDraw:this.renderSVG,canvasDraw:this.drawOnCanvas,drawOn:[]})}renderSVG(e){const{chartConfig:t}=e;return w.createElement(ni,ai({yScale:li(t)},this.props,{text:(r=this.props,(0,O.ER)(r.text)(r))}));var r}}function li(e){return Array.isArray(e)?void 0:e.yScale}oi.propTypes={className:E().string,selectCanvas:E().func,text:E().oneOfType([E().string,E().func]).isRequired,textAnchor:E().string,fontFamily:E().string,fontSize:E().number,opacity:E().number,rotate:E().number,onClick:E().func,xAccessor:E().func,xScale:E().func,yScale:E().func,datum:E().object,x:E().oneOfType([E().number,E().func]),y:E().oneOfType([E().number,E().func])},oi.contextTypes={canvasOriginX:E().number,canvasOriginY:E().number,margin:E().object.isRequired,ratio:E().number.isRequired},oi.defaultProps={...si,selectCanvas:e=>e.bg},r(42111),r(17665),r(26618);var ci=r(89339);function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},hi.apply(null,arguments)}const di=(e,t,r,s)=>{const n=new Date(new Date(+e).toLocaleString("en-US",{timeZone:"America/New_York"}));if(n.getHours()>=16&&s)return!1;if(5e5==+t.L)return!1;if(0==+t.O&&0==+t.C)return!1;0==+t.O&&(t.O=+t.C),0==+t.C&&(t.C=+t.O);const i=1==r?9==n.getHours()&&30==n.getMinutes():9==n.getHours()&&45==n.getMinutes();return{date:n,timestamp:n.getTime(),epoch:+e,open:+t.O,high:+t.H,low:+t.L,close:+t.C,volume:+t.V,upTick:+t.U,downTick:+t.D,darkUpTick:+t.DU,darkDownTick:+t.DD,startOfDay:i,bids:t.bids,asks:t.asks}};let ui,pi=(0,s.forwardRef)((e,t)=>{const{type:r,width:n,height:i,symbol:a,ratio:o,settings:l,chartKey:c,chartUid:u,chartEvent:m,charts:f,chartState:b,darkMode:k,whiteColor:x,primaryDarkColor:S,primaryLightColor:C,primaryLightBackground:w,xEventsState:D,screenShotSrc:E,showScreenShotModal:R,updateTheCharts:T,selectedChart:F,selectedChartEvent:P,fullScreenMode:q,updateProperty:A,SetChartSettings:N}=e,M=(0,s.useRef)(null),W=(0,s.useRef)(2),V=(0,s.useRef)(-150),H=(0,s.useRef)(!1),z=(0,s.useRef)(0),I=(0,s.useRef)(0),L=(0,s.useRef)(!1),X=(0,s.useRef)(!1),B=(0,s.useRef)(0),Y=(0,s.useRef)(!1),G=(0,s.useRef)([]),$=(0,s.useRef)([]),j=(0,s.useRef)({}),U=(0,s.useRef)(!1),Q=(0,s.useRef)(!1),[Z,_]=(0,s.useState)(null),[K,J]=(0,s.useReducer)(e=>e+1,0),[ee,te]=(0,s.useState)(!1),[re,se]=(0,s.useState)(!1),ne=(0,s.useRef)(null),[ie,ae]=(0,s.useState)(null),[oe,le]=(0,s.useState)(1),ce=(0,s.useRef)([]),he=((0,s.useRef)(null),(0,s.useRef)(!1));let de=(0,s.useRef)({}),ue=(0,s.useRef)(null),pe=(0,s.useRef)(null),me=(0,s.useRef)(null),ge=(0,s.useRef)(null),fe=(0,s.useRef)(null),ye=(0,s.useRef)(null),be=(0,s.useRef)(null),ve=(0,s.useRef)(null),ke=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(null==pe.current){let e=(e=>{let t=e.toLowerCase().charCodeAt(0);return t>=97&&t<102?"ae":t>=102&&t<=108?"fl":t>=109&&t<=115?"ms":t>=116&&t<=122?"tz":void 0})(c),t=new Date,r=g()(t).tz("America/New_York"),n=([0,6].includes(r.day())?r.subtract(0==r.day()?2:1,"days"):r.hour()<9?r.subtract(1,"days"):r).format("YYYY-MM-DD");pe.current=s.firebase.firebase.database(s.firebase["live"+e]).ref(`${c}`),me.current=s.firebase.firebase.database(s.firebase["poly"+e]).ref(`1m/${c}`).orderByKey().limitToLast(2),ge.current=s.firebase.firebase.database(s.firebase["poly"+e]).ref(`15m/${c}`).orderByKey().limitToLast(30),fe.current=s.firebase.firebase.database(s.firebase.blocks).ref(`symbols/${c}`).orderByKey(),ue.current=s.firebase.firebase.database(s.firebase.tracking).ref(`${n}/one/latest`),ke.current=s.firebase.firebase.database(s.firebase.livefutures).ref(`symbols/${c}`),ye.current=s.firebase.firebase.database(s.firebase.futures).ref(`1m/${c}`).orderByKey().limitToLast(2),be.current=s.firebase.firebase.database(s.firebase.futures).ref(`15m/${c}`).orderByKey().limitToLast(30),ve.current=s.firebase.firebase.database(s.firebase.blocksfutures).ref(`symbols/${c}`).orderByKey()}},[]),(0,s.useEffect)(()=>{null!=m&&m.chart==u&&m.uid!=ne.current&&(ne.current=m.uid,Oe(m.code))},[m]),(0,s.useEffect)(()=>{L.current=l.replayMarket,B.current>0&&parseInt(B.current)!=parseInt(l.replayMarketSettings.speed)&&(X.current=!0),B.current=parseInt(l.replayMarketSettings.speed),Ee()},[l.replayMarket]),(0,s.useEffect)(()=>{U.current=l.takeScreenShot,De()},[l.takeScreenShot]),(0,s.useEffect)(()=>{Q.current=l.showGrid},[l.showGrid]),(0,s.useEffect)(()=>{var e,t;ae((e=l.priceBarsColor,(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null))},[l.priceBarsColor]),(0,s.useEffect)(()=>{Qe()},[l.periodicity]),(0,s.useEffect)(()=>{Ge()},[l.blocktradesDates]),(0,s.useEffect)(()=>{ee&&je()},[ee]),(0,s.useEffect)(()=>()=>{pe.current.off("value"),me.current.off("value"),ge.current.off("value"),ue.current.off("value"),fe.current.off("value"),ye.current.off("value"),be.current.off("value"),ve.current.off("value"),ke.current.off("value")},[]);const xe=e=>{pe.current.once("value",t=>{const r=new Date((new Date).toLocaleString("en-US",{timeZone:"America/New_York"}));if(r.getHours()>=16||r.getHours()<9||9==r.getHours()&&r.getMinutes()<30||9==r.getHours()&&r.getMinutes()<45&&15==e||0==r.getDay()||6==r.getDay())return;const s=t.val(),n=ce.current[ce.current.length-1],i=new Date(+n.timestamp+6e4*e);15==n.date.getHours()&&59==n.date.getMinutes()||ce.current.push({date:i,open:+n.close,high:+n.close,low:+s.C,close:+s.C,volume:+s.V,upTick:+s.U,downTick:+s.D,darkUpTick:+s.DU,darkDownTick:+s.DD})})},Se=e=>{ke.current.once("value",t=>{const r=new Date((new Date).toLocaleString("en-US",{timeZone:"America/New_York"}));if(0==r.getDay()||6==r.getDay())return;const s=t.val(),n=ce.current[ce.current.length-1],i=new Date(+n.timestamp+6e4*e);ce.current.push({date:i,open:+n.close,high:+n.close,low:+s.C,close:+s.C,volume:+s.V,upTick:+s.U,downTick:+s.D,darkUpTick:+s.DU,darkDownTick:+s.DD})})},Ce=e=>{const t=ce.current[ce.current.length-1],r=new Date((new Date).toLocaleString("en-US",{timeZone:"America/New_York"}));void 0!==t&&((9==r.getHours()&&30==r.getMinutes()&&"1m"==l.periodicity||9==r.getHours()&&r.getMinutes()<45&&"15m"==l.periodicity)&&!he.current?(he.current=!0,ce.current.push({date:r,open:+t.close,high:+t.close,low:+t.close,close:+t.close,volume:0,upTick:0,downTick:0,darkUpTick:0,darkDownTick:0})):ce.current[ce.current.length-1]={...t,close:e.val().C,high:e.val().C>t.high?e.val().C:t.high,low:e.val().C<t.low?e.val().C:t.low,volume:e.val().V,upTick:e.val().U,downTick:e.val().D,darkUpTick:e.val().DU,darkDownTick:e.val().DD},J())},we=e=>{const t=ce.current[ce.current.length-1],r=new Date((new Date).toLocaleString("en-US",{timeZone:"America/New_York"}));0!=r.getDay()&&6!=r.getDay()&&void 0!==t&&((23==r.getHours()&&59==r.getMinutes()&&"1m"==l.periodicity||23==r.getHours()&&r.getMinutes()<45&&"15m"==l.periodicity)&&!he.current?(he.current=!0,ce.current.push({date:r,open:+t.close,high:+t.close,low:+t.close,close:+t.close,volume:0,upTick:0,downTick:0,darkUpTick:0,darkDownTick:0})):ce.current[ce.current.length-1]={...t,close:e.val().C,high:e.val().C>t.high&&e.val().C>0?e.val().C:t.high,low:e.val().C<t.low&&e.val().C>0?e.val().C:t.low,volume:e.val().V,upTick:e.val().U,downTick:e.val().D,darkUpTick:e.val().DU,darkDownTick:e.val().DD},J())},De=()=>{if(U.current){U.current=!1,Be({takeScreenShot:!1});const e=v.findDOMNode(M.current);Tr.save(document,e,"#24252f",a+"|"+l.periodicity,q?180:90,function(e){A({showScreenShotModal:!0,screenShotSrc:e})})}},Ee=()=>{L.current&&!H.current?(H.current=!0,ui=window.setInterval(function(){Re()},B.current)):!L.current&&Y.current&&(Be({replayMarket:!1,replayMarketSettings:{speed:250}}),W.current=2,V.current=-150,_([z.current,I.current]),Y.current=!1)},Re=()=>{_([W.current,V.current]),W.current=W.current+1,V.current=V.current+1,(W.current>ce.current.length||!L.current||"pause"==L.current||X.current)&&(clearInterval(ui),H.current=!1,W.current>ce.current.length&&(L.current=!1),L.current?X.current?(X.current=!1,Ee()):"pause"==L.current&&(Y.current=!0):(Be({replayMarket:!1,replayMarketSettings:{speed:250}}),W.current=2,V.current=-150,_([z.current,I.current]),Y.current=!1))},Oe=e=>{switch(console.log("keypress:"+e),e){case 46:{let e=[],t=[];const r=Ye("trends");void 0!==r&&(e=r.filter(e=>!e.selected));const s=Ye("retracements");void 0!==s&&(t=s.filter(e=>!e.selected)),null!=M.current&&M.current.cancelDrag(),Be({trends:e,retracements:t}),N({trends:e,retracements:t},u,!1,!0,!0);break}case 9:{let e=f.findIndex(e=>e.chartUid==u),t=void 0!==f[e+1]?e+1:0;A({selectedChartEvent:null,selectedChart:f[t].chartUid});break}case 32:A({selectedChartEvent:null,selectedChart:null});break;case 27:null!=M.current&&M.current.cancelDrag(),Be({trendLine:!1,fibonacciRetracements:!1});break;case 70:Be({drawingMode:!0,fibonacciRetracements:!0,fibonacciTrendLineColor:l.fibonacciRetracementsColor||"#2ec2ff"});break;case 76:Be({drawingMode:!0,trendLine:!0,trendLineType:"LINE",trendLineColor:l.trendLineLineColor||"#2ec2ff"});break;case 82:Be({drawingMode:!0,trendLine:!0,trendLineType:"RAY",trendLineColor:l.trendLineRayColor||"#2ec2ff"});break;case 88:Be({drawingMode:!0,trendLine:!0,trendLineType:"XLINE",trendLineColor:l.trendLineXlineColor||"#2ec2ff"});break;default:null!=M.current&&M.current.cancelDrag()}},Te=e=>{localStorage.setItem(u,JSON.stringify([0,e])),localStorage.setItem("scale_"+u,JSON.stringify({length:e,end:0})),localStorage.removeItem("yScale_"+u),le(oe+1)},Fe=function(){const e=ps().type("FT").accessor(e=>e.wma),t=function(){let e=ds;function t(t){const{flowType:r}=e,s=(e,t)=>"normal"===r?!(parseInt(e)>1e7||parseInt(t)>1e7):"dark-pool"!==r||0!==parseInt(e)||0!==parseInt(t);let n=[];return t.map(function(e,t){let i;return"normal"===r?i=s(e.upTick,e.downTick)?e.upTick-e.downTick+(t-1 in n?n[t-1]:0):0:"dark-pool"===r?i=s(e.darkUpTick,e.darkDownTick)?e.darkUpTick-e.darkDownTick+(t-1 in n?n[t-1]:0):0:"both"===r&&(i=e.upTick+e.darkUpTick-(e.darkDownTick+e.downTick)+(t-1 in n?n[t-1]:0)),n[t]=i,(3*n[t]+2*(n[t-1]||0)+(n[t-2]||0))/6})}return t.undefinedLength=function(){const{windowSize:t}=e;return t-1},t.options=function(r){return arguments.length?(e={...ds,...r},t):e},t}(),r=(0,O.h1)().algorithm(t).merge((e,t)=>{e.wma=t}),s=function(s,n={merge:!0}){if(n.merge){if(!e.accessor())throw new Error("Set an accessor to FT before calculating");return r(s)}return t(s)};return(0,O.fy)(s,e,"id","accessor","stroke","fill","echo","type"),(0,O.fy)(s,t,"undefinedLength"),(0,O.fy)(s,t,"options"),(0,O.fy)(s,r,"merge","skipUndefined"),s}().id(0).options({flowType:l.flowIndex,strokeWidth:Number(l.flowIndexWidth)}).merge((e,t)=>{e.flowindex=t}).accessor(e=>e.flowindex).stroke("normal"===l.flowIndex?l.flowIndexColor:"dark-pool"===l.flowIndex?l.flowDarkIndexColor:l.flowBothIndexColor),Pe=function(){const e=ps().type("FT").accessor(e=>e.wma),t=function(){let e=ds;function t(t){const{windowSize:r}=e,s=[];return t.map(function(e,t){return s[t]=(s[t-1]||0)+2/(r+1)*(e.flowindex-(s[t-1]||0)),s[t]})}return t.undefinedLength=function(){const{windowSize:t}=e;return t-1},t.options=function(r){return arguments.length?(e={...ds,...r},t):e},t}(),r=(0,O.h1)().algorithm(t).merge((e,t)=>{e.wma=t}),s=function(s,n={merge:!0}){if(n.merge){if(!e.accessor())throw new Error("Set an accessor to FT before calculating");return r(s)}return t(s)};return(0,O.fy)(s,e,"id","accessor","stroke","fill","echo","type"),(0,O.fy)(s,t,"undefinedLength"),(0,O.fy)(s,t,"options"),(0,O.fy)(s,r,"merge","skipUndefined"),s}().options({windowSize:10,strokeWidth:Number(l.flowIndexWidth)}).merge((e,t)=>{e.flowindexavg=t}).accessor(e=>e.flowindexavg).stroke(l.flowIndexAvgColor);console.log(Fe.accessor(),"flowindex");const qe=(e=>{let t=e;const r=ci.A.scale(["08233e","98c4f0"]);return Object.keys(j.current).length&&e.length&&e.map((e,s)=>{if(void 0!==j.current[e.epoch]){let n=j.current[e.epoch];const i=(e=>{if("buys"in e&&"sells"in e){let t=Object.keys(e.buys).map(t=>+e.buys[t]),r=Object.keys(e.sells).map(t=>+e.sells[t]);return t.concat(r)}return[]})(n).sort((e,t)=>e-t);let a;a=i.length>0?i[i.length-1]:1;let o=[],l=[];Object.keys(n.buys).sort().map((e,t)=>{const s=Number.parseFloat(e).toFixed(2);n.buys[e],o.push({type:"bid",fill:(0,O.zX)(r(1).hex(),1),hit:s})}),Object.keys(n.sells).sort().map((e,t)=>{const s=Number.parseFloat(e).toFixed(2);let i=n.sells[e]/a;l.push({type:"ask",fill:(0,O.zX)(r(i).hex(),1),hit:s})}),t[s]={...t[s],maxBidAsk:a,heatCells:o.concat(l)}}else t[s]={...t[s],maxBidAsk:1,heatCells:[].concat([])}}),t})((e=>{let t=e;return G.current&&e.length&&e.map((e,r)=>{let s=("0"+(e.date.getMonth()+1)).slice(-2)+"-"+("0"+e.date.getDate()).slice(-2)+" "+("0"+e.date.getHours()).slice(-2)+":"+("0"+e.date.getMinutes()).slice(-2);const n=G.current.filter(e=>e.timeCondition==s);n.length>0&&(t[r]={...t[r],blockTrade:!0,blockTradeValue:n[0].yValue})}),t})((e=>{let t=e;return $.current.length&&e.length&&$.current.map(r=>{e.map((e,s)=>{let n=g()(+r.startTimeStamp).tz("America/New_York"),i=g()(+r.endTimeStamp).tz("America/New_York"),a=g()(+e.epoch).tz("America/New_York");a>=n&&a<=i&&(t[s]={...t[s],divergenceDetected:!0,divergenceTrend:r.trend})})}),t})(Pe(Fe(ce.current))))),Ae=zr.inputDateAccessor(e=>e.date),{data:Ne,xScale:Me,xAccessor:We,displayXAccessor:Ve}=Ae(qe),He=We((0,O.HV)(Ne)),ze=We(Ne[0]);let Ie,Le=localStorage.getItem("scale_"+u),Xe=localStorage.getItem("yScale_"+u);if(null!==Le){let e=JSON.parse(Le),t=ce.current.length+e.end;Ie=[t-e.length,t]}else Ie=[He,ze];L.current||(z.current=Ie[0],I.current=Ie[1]),null!==Z&&(Ie=Z);const Be=e=>{const t=f.filter(e=>e.chartUid===u);void 0!==t[0]&&(t[0].chartSettings={...t[0].chartSettings,...e},A({currentChartSettings:t[0].chartSettings,updateTheCharts:!T}))},Ye=e=>f.filter(e=>e.chartUid===u)[0].chartSettings[e],Ge=e=>{fe.current.off("value"),ve.current.off("value"),"stocks"==l.securityType?fe.current.limitToLast(Number(l.blocktradesDates)).on("value",$e):ve.current.limitToLast(Number(l.blocktradesDates)).on("value",$e)},$e=e=>{let t=[];e.forEach(function(e){e.forEach(function(e){const r=e.val(),s=+r.t,n=p()(s).tz("America/New_York").format("MM-DD HH:mm");t.push({...jn.defaultProps.defaultPriceCoordinate,fontSize:9,bgFill:r.D?l.blockTradesDarkPoolColor:l.blockTradesRegularPoolColor,stroke:r.D?l.blockTradesDarkPoolColor:l.blockTradesRegularPoolColor,textFill:"#ffffff",timeCondition:n,text:Number(r.P).toFixed(2),textBox:{...jn.defaultProps.defaultPriceCoordinate.textBox,Radius:8,show:!0,fontSize:9,height:15,left:0,padding:{left:3,right:3},closeIcon:{padding:{left:0,right:0},width:0}},edge:{...jn.defaultProps.defaultPriceCoordinate.edge,fill:r.D?l.blockTradesDarkPoolColor:l.blockTradesRegularPoolColor,strokeWidth:0,strokeOpacity:0,arrowWidth:0,rectWidth:25,rectHeight:15,rectRadius:7},yValue:r.P,id:y().generate(),draggable:!1,hoverText:{...Ms.defaultProps,bgFill:r.D?l.blockTradesDarkPoolColor:l.blockTradesRegularPoolColor,fill:"#ffffff",bgOpacity:1,enable:!0,bgHeight:18,bgWidth:120,text:n+" | "+r.P.toFixed(2)}})})}),G.current=t,J()},je=e=>{ue.current.on("value",Ue)},Ue=async e=>{let t=[];e.forEach(function(e){if(["priceDown","priceUp"].find(t=>t==e.key)){let r="priceDown"==e.key?"#0ccf02":"#d0021b";e.forEach(function(s){let n=+s.key;s.forEach(function(s){const i=s.val();i.s==c&&(t.some(e=>e.endTimeStamp==i.t&&e.fill==r)||t.push({id:s.key,startTimeStamp:String(+i.t-6e4*n),endTimeStamp:+i.t,fill:r,canvasGradient:(0,O.s6)([{stop:0,color:(0,O.zX)(r,.025)},{stop:.5,color:(0,O.zX)(r,.15)},{stop:1,color:(0,O.zX)(r,.5)}]),trend:e.key,opacity:.1,startLine:{stroke:r,strokeWidth:1,strokeOpacity:.7,strokeDasharray:"ShortDash"}}))})})}});const r=new Promise(e=>{let r=[];t.map((e,s)=>{if(0==s)r.push(e);else{let n=t[s-1];+n.endTimeStamp>+e.startTimeStamp&&n.fill==e.fill?(r.push({...e,startTimeStamp:n.startTimeStamp}),r=r.filter(e=>e.id!==n.id)):r.push(e)}}),e(r)}),s=await r;$.current=s,J()},Qe=()=>{te(!1),ce.current=[],"15m"==l.periodicity?"stocks"==l.securityType?(me.current.off("value"),ge.current.on("value",_e)):(ye.current.off("value"),be.current.on("value",_e)):"stocks"==l.securityType?(ge.current.off("value"),me.current.on("value",Ze)):(be.current.off("value"),ye.current.on("value",Ze)),"stocks"==l.securityType?(pe.current.off("value"),pe.current.on("value",Ce)):(ke.current.off("value"),ke.current.on("value",we))},Ze=e=>{let t=[];e.forEach(function(e){e.forEach(function(e){const r=di(e.key,e.val(),1,"stocks"==l.securityType);!1!==r&&t.push(r)})}),0==t.length?(se(!0),te(!0)):(ce.current=t,"stocks"==l.securityType?xe(1):Se(1),te(!0)),J(),de.current=l},_e=e=>{let t=[];e.forEach(function(e){e.forEach(function(e){const r=di(e.key,e.val(),15,"stocks"==l.securityType);!1!==r&&t.push(r)})}),0==t.length?(se(!0),te(!0)):(ce.current=t,"stocks"==l.securityType?xe(15):Se(15),te(!0)),J(),de.current=l};return re?s.createElement("div",{style:{height:i,position:"relative"}},s.createElement("div",{className:"absolute-text d-flex flex-column align-items-center justify-content-center"},s.createElement(d.Ay,{name:"cis-sad",height:35}),s.createElement("span",{className:"h3 mt-2"},"Unavailable"))):ee?s.createElement(mi,hi({},e,{suffixState:oe,data:Ne,xScale:Me,xAccessor:We,displayXAccessor:Ve,xExtents:Ie,yExtents:e=>{if(null!==Xe){let t=JSON.parse(Xe);return[Math.max(e.high,t[1]),Math.min(e.low,t[0])]}return[e.high,e.low]},rgbaColor:ie,onDrawCompleteChart:e=>{Be({trendLine:!1,trends:e}),N({trends:e},u,!1,!0,!0)},onDrawCompleteRetracement:e=>{Be({fibonacciRetracements:!1,retracements:e}),N({retracements:e},u,!1,!0,!0)},handleSelection:e=>{e.map(e=>{e.chartId==u&&("Trendline"==e.type?(Be({trends:e.objects}),N({trends:e.objects},u,!1,!0,!0)):"FibonacciRetracement"==e.type&&(Be({retracements:e.objects}),N({retracements:e.objects},u,!1,!0,!0)))})},handleReset:Te,handleFirst:e=>{let t=localStorage.getItem("scale_"+u);if(null!==t){let e=JSON.parse(t);localStorage.setItem("scale_"+u,JSON.stringify({length:e.length,end:0})),le(oe+1)}else Te(e)},flowindex:Fe,flowindexavg:Pe,chartBlocksValuesRef:G,chartCanvasRef:M,showGridRef:Q})):s.createElement("div",{style:{height:i,position:"relative"}},s.createElement(h.JT,{className:"absolute-spinner"}))}),mi=(0,s.forwardRef)((e,t)=>{const{type:r,width:n,height:i,symbol:a,ratio:o,settings:l,chartKey:c,chartUid:h,chartEvent:d,suffixState:u,data:p,xScale:m,xAccessor:g,displayXAccessor:f,xExtents:y,yExtents:b,rgbaColor:v,onDrawCompleteChart:k,onDrawCompleteRetracement:x,handleSelection:w,handleReset:D,handleFirst:E,flowindex:R,flowindexavg:T,chartBlocksValuesRef:F,chartCanvasRef:P,showGridRef:q,charts:A,chartState:M,darkMode:W,whiteColor:V,primaryDarkColor:H,primaryLightColor:z,primaryLightBackground:I,xEventsState:L,screenShotSrc:X,showScreenShotModal:B,updateTheCharts:Y,selectedChart:G,selectedChartEvent:$,updateProperty:j,SetChartSettings:U}=e;var Q={left:0,right:50,top:20,bottom:30},Z=i-Q.top-Q.bottom,_=n-Q.left-Q.right,K=q.current?{innerTickSize:-1*_,tickStrokeDasharray:"Solid",tickStrokeOpacity:.1,tickStrokeWidth:1}:{},J=q.current?{innerTickSize:-1*Z,tickStrokeDasharray:"Solid",tickStrokeOpacity:.1,tickStrokeWidth:1}:{};return s.createElement(pe,{height:i,ref:P,ratio:o,width:n,chartUid:h,margin:Q,padding:15,type:r,seriesName:"MSFT_"+u,data:p,xScale:m,xAccessor:g,displayXAccessor:f,xExtents:y},s.createElement(N,{id:h,yExtents:b,padding:{top:10,bottom:10}},s.createElement(kr,hi({axisAt:"bottom",orient:"bottom",stroke:"white",strokeWidth:.15,opacity:.1,tickStroke:W?V:I,ticks:10,customLevels:[11,12]},J)),s.createElement(wr,hi({axisAt:"right",orient:"right",stroke:"white",strokeWidth:.15,opacity:.1,tickStroke:W?V:I,ticks:8},K)),s.createElement(Oe,null),s.createElement(_r,{at:"bottom",orient:"bottom",fontSize:10,rectWidth:25,rectHeight:15,rectRadius:7,displayFormat:(0,C.DC)("%b %d, %H:%M"),fill:W?H:z}),s.createElement(ns,{at:"right",orient:"right",displayFormat:(0,S.GP)(".2f"),arrowWidth:0,fontSize:10,rectWidth:25,rectHeight:15,rectRadius:7,fill:W?H:z}),"ohlc"==l.chartType&&s.createElement(et,{stroke:l.priceBarsColor}),"candles"==l.chartType&&s.createElement(_e,{wickStroke:l.priceBarsColor,fill:function(e){return v?e.close>e.open?"rgba("+v.r+", "+v.g+", "+v.b+", 0.8)":"rgba("+v.r+", "+v.g+", "+v.b+", 0.1)":e.close>e.open?"rgba(196, 205, 211, 0.8)":"rgba(22, 22, 22, 0.8)"},stroke:l.priceBarsColor,candleStrokeWidth:1,widthRatio:.8,opacity:1}),s.createElement(Gr,{itemType:"last",orient:"right",edgeAt:"right",lineStroke:"#ffffff",lineOpacity:.5,arrowWidth:0,fontSize:10,rectWidth:25,rectHeight:15,rectRadius:10,yAccessor:e=>e.close,fill:e=>e.close>e.open?"#6BA583":"#FF0000"}),s.createElement(Qt,{origin:[0,-10],labelFill:W?H:z,textFill:W?V:I}),l.blocksLine&&s.createElement(jn,{enabled:!1,yCoordinateList:F.current}),s.createElement(Bs,{ref:(0,_n.vz)("Trendline",h),enabled:l.trendLine,type:l.trendLineType,snap:!1,snapTo:e=>[e.high,e.low],onComplete:k,trends:l.trends,appearance:{stroke:l.trendLineColor||H,strokeOpacity:1,strokeWidth:1,strokeDasharray:"Solid",edgeStrokeWidth:1,edgeFill:"#FFFFFF",edgeStroke:"#000000",r:6}}),s.createElement(_s,{ref:(0,_n.vz)("FibonacciRetracement",h),enabled:l.fibonacciRetracements,type:"EXTEND",retracements:l.retracements,onComplete:x,appearance:{stroke:l.fibonacciTrendLineColor||H,strokeWidth:1,strokeOpacity:1,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:11,fontFill:W?"#FFFFFF":"#000000",edgeStroke:"#000000",edgeFill:"#FFFFFF",nsEdgeFill:l.fibonacciTrendLineColor||H,edgeStrokeWidth:1,r:5}}),l.blocksLine&&s.createElement(ei,{with:ni,when:e=>e.blockTrade,usingProps:{fontFamily:"coreui-icons-solid",fontSize:8,fill:"white",opacity:1,className:"blocktrades-marker",text:"",y:({yScale:e,datum:t})=>e(t.blockTradeValue),tooltip:e=>(0,C.DC)("%b %d, %H:%M")(e.date)}}),l.showDivergence&&s.createElement(s.Fragment,null,s.createElement(Ve,{key:`${h}priceDown`,yAccessor:e=>{if(e.divergenceDetected&&"priceDown"==e.divergenceTrend)return e.close},strokeWidth:0,strokeOpacity:0,upperArea:!0,canvasGradient:(0,O.s6)([{stop:0,color:(0,O.zX)("#0ccf02",.85)},{stop:.5,color:(0,O.zX)("#0ccf02",.35)},{stop:1,color:(0,O.zX)("#0ccf02",0)}])}),s.createElement(Ve,{key:`${h}priceUp`,yAccessor:e=>{if(e.divergenceDetected&&"priceUp"==e.divergenceTrend)return e.close},strokeWidth:0,strokeOpacity:0,canvasGradient:(0,O.s6)([{stop:0,color:(0,O.zX)("#d0021b",0)},{stop:.5,color:(0,O.zX)("#d0021b",.35)},{stop:1,color:(0,O.zX)("#d0021b",.85)}])})),s.createElement(Ee,{onReset:()=>{D(p.length)},onFirst:()=>{E(p.length)},dataLength:p.length})),s.createElement(N,{id:`${h}2`,yExtents:R.accessor(),padding:{top:10,bottom:20}},s.createElement(qe,{yAccessor:R.accessor(),stroke:R.stroke(),strokeWidth:R.options().strokeWidth}),s.createElement(Ur,{yAccessor:R.accessor(),fill:R.stroke()})),l.showAverage&&s.createElement(N,{id:`${h}3`,yExtents:T.accessor(),padding:{top:10,bottom:20}},s.createElement(qe,{yAccessor:T.accessor(),stroke:T.stroke(),strokeWidth:T.options().strokeWidth}),s.createElement(Ur,{yAccessor:T.accessor(),fill:T.stroke()})),s.createElement(ls,{stroke:W?V:I,strokeDasharray:"Solid",opacity:.2}),s.createElement(Qn,{enabled:!l.trendLine&&!l.fibonacciRetracements,getInteractiveNodes:_n.I8,drawingObjectMap:{Trendline:"trends",FibonacciRetracement:"retracements"},onSelect:w}))});mi=function(e,t=!0,r=100){class s extends w.Component{constructor(e){super(e),this.handleWindowResize=this.handleWindowResize.bind(this),this.getWrappedInstance=this.getWrappedInstance.bind(this),this.saveNode=this.saveNode.bind(this),this.setTestCanvas=this.setTestCanvas.bind(this),this.state={}}saveNode(e){this.node=e}setTestCanvas(e){this.testCanvas=e}getRatio(){if((0,O.O9)(this.testCanvas)){const e=this.testCanvas.getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}return 1}componentDidMount(){window.addEventListener("resize",this.handleWindowResize),this.handleWindowResize(),this.setState({ratio:this.getRatio()})}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize)}handleWindowResize(){this.setState({width:0},()=>{const e=this.node,{width:t,paddingLeft:s,paddingRight:n}=window.getComputedStyle(e.parentNode),i=parseFloat(t)-(parseFloat(s)+parseFloat(n));this.setState({width:Math.round(Math.max(i,r))})})}getWrappedInstance(){return this.node}render(){const r=t?{ref:this.saveNode}:{};return this.state.width?w.createElement(e,Fr({width:this.state.width,ratio:this.state.ratio},this.props,r)):w.createElement("div",r,w.createElement("canvas",{ref:this.setTestCanvas}))}}var n;return s.displayName=`fitWidth(${n=e,n.displayName||n.name||"Series"})`,s}(mi);const gi=(0,k.Zz)((0,n.Ng)(e=>({charts:e.charts.charts,chartState:e.charts.chartState,darkMode:e.charts.darkMode,whiteColor:e.charts.whiteColor,primaryDarkColor:e.charts.primaryDarkColor,primaryLightColor:e.charts.primaryLightColor,primaryLightBackground:e.charts.primaryLightBackground,xEventsState:e.charts.xEventsState,screenShotSrc:e.charts.screenShotSrc,showScreenShotModal:e.charts.showScreenShotModal,updateTheCharts:e.charts.updateTheCharts,selectedChart:e.charts.selectedChart,selectedChartEvent:e.charts.selectedChartEvent,fullScreenMode:e.charts.fullScreenMode}),e=>({updateProperty:t=>e((0,i.$)(t)),SetChartSettings:(t,r,s,n,i)=>e((0,a.SU)(t,r,s,n,i))})))(pi),fi=((0,n.Ng)((e,t)=>({charts:e.charts.charts,fullScreenMode:e.charts.fullScreenMode,updateTheCharts:e.charts.updateTheCharts,chartState:e.charts.chartState,newChartLoaded:e.charts.newChartLoaded,currentSymbol:t.currentSymbol,mainHeight:t.mainHeight}),e=>({updateProperty:t=>e((0,i.$)(t))}))(e=>{const{currentSymbol:t,currentUid:r,currentEvent:n,mainHeight:i,charts:a,fullScreenMode:o,newChartLoaded:l,updateTheCharts:c,chartState:d,updateProperty:u}=e;if(0==i)return null;const[p,m]=(0,s.useState)(!1),[g,f]=(0,s.useReducer)(e=>e+1,0),y=(0,s.useRef)(null);(0,s.useEffect)(()=>{l&&(u({newChartLoaded:!1}),m(!1)),v(t,r,n),m(!0)},[e,a]);const v=(e,t,r)=>{const s=a.filter(e=>e.chartUid===t);if(null==y.current)return void(y.current=s[0]);if(void 0===s[0])return;const n=y.current;let i=!1;n.chartSettings.periodicity!==s[0].chartSettings.periodicity&&(localStorage.removeItem(t),localStorage.removeItem("scale_"+t),i=!0),y.current={...s[0],chartData:i?[]:n.chartData||[],chartSettings:{...s[0].chartSettings,blocks:i?null:n.chartSettings.blocks||null,zonesDivergence:i?null:n.chartSettings.zonesDivergence||null}},null!=r&&r.chart==t&&(y.current={...y.current,chartEvent:r}),f()};return p?s.createElement(b.ErrorBoundary,{FallbackComponent:({error:e,resetErrorBoundary:t})=>null,onReset:()=>{}},s.createElement(gi,{type:"hybrid",height:i,chartProps:y.current,symbol:y.current.chartSymbol,settings:y.current.chartSettings,chartKey:y.current.chartSymbol,chartUid:y.current.chartUid,chartEvent:y.current.chartEvent})):s.createElement("div",{style:{height:i,position:"relative"}},s.createElement(h.JT,{className:"absolute-spinner"}))}),(0,n.Ng)((e,t)=>{let r=[];return r="stocks"==t.selectedSecurity?"polySymbols"in e.firebase.data&&null!=e.firebase.data.polySymbols?e.firebase.data.polySymbols:[]:"futuresSymbols"in e.firebase.data&&null!=e.firebase.data.futuresSymbols?e.firebase.data.futuresSymbols:[],{brands:r}},e=>({updateProperty:t=>e((0,i.$)(t)),EditMarket:(t,r,s,n)=>e((0,a.$h)(t,r,s,n))}))(e=>{const{brands:t,searchQuery:r,selectedSecurity:n,EditMarket:i,updateProperty:a}=e,o=(0,s.useRef)(!1),l=(0,s.useRef)(null),c=(0,s.useRef)("stocks"),u=(0,s.useRef)([]);(0,s.useEffect)(()=>{o.current||(o.current=!0,window.addEventListener("keyup",p)),c.current=n,l.current=r},[r,n]),(0,s.useEffect)(()=>{u.current=t},[t]),(0,s.useEffect)(()=>()=>{a({disableEvent:!1}),window.removeEventListener("keyup",p),o.current=!1},[]);const p=async e=>{if(13==e.which&&null!==l.current){let e=l.current.toUpperCase();e in u.current&&i(e,0,!1,{securityType:c.current})}};return s.createElement(s.Fragment,null,Object.keys(t).map((e,r)=>s.createElement(h.UF,{key:r,xs:"12",sm:"12",md:"12",className:"p-0 mb-1"},s.createElement(h.E$,{className:"m-0"},s.createElement(h.W6,{className:"d-flex align-items-center p-0 justify-content-between"},s.createElement("div",{className:"d-flex align-items-center p-3"},s.createElement("div",null,s.createElement("div",{className:"text-value text-info"},e),s.createElement("div",{className:"text-muted text-uppercase font-italic small"},t[e]))),s.createElement("div",{className:"mr-3 text-info"},s.createElement(h.KV,{onClick:()=>i(e,0,!1,{securityType:c.current})},s.createElement(d.Ay,{name:"cil-plus-circle",size:"2xl"}))))))))})),yi=(0,n.Ng)(e=>({brandsModelShow:e.charts.brandsModelShow,existingCharts:e.charts.existingCharts}),null)(e=>{const{brandsModelShow:t,existingCharts:r}=e,n=(0,s.useRef)(null),i=(0,s.useRef)(null),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(""),[d,u]=(0,s.useState)("stocks");return(0,s.useEffect)(()=>{null!=n.current&&t&&setTimeout(function(){document.querySelector("#searchSymbols").focus()},500),t||(n.current.value="")},[t]),s.createElement(s.Fragment,null,a&&s.createElement("div",{className:"c-custom_loader"},s.createElement("div",{className:"lds-ripple"},s.createElement("div",null),s.createElement("div",null))),s.createElement(h.UF,{key:"searchBrandList",xs:"12",sm:"12",md:"12",className:"p-0 mb-1"},s.createElement(h.E$,{className:"m-0"},s.createElement(h.W6,{innerRef:i,className:"d-flex align-items-center p-0 justify-content-between"},s.createElement(h.ev,{innerRef:n,type:"text",id:"searchSymbols",name:"search-symbols",placeholder:"Search Symbol",onChange:e=>{c(e.target.value)}})))),s.createElement(h.UF,{key:"securityType",xs:"12",sm:"12",md:"12",className:"p-0 mb-1"},s.createElement(h.E$,{className:"m-0"},s.createElement(h.W6,{className:"d-flex align-items-center pr-0 pl-0 pb-1 pt-1 justify-content-between"},s.createElement(h.by,{component:"nav",variant:"pills",className:"flex-column flex-sm-row"},s.createElement(h.HQ,{className:"security-type_navlink font-weight-bold",href:"#",active:"stocks"===d,onClick:()=>{n.current.value="",c(""),u("stocks"),document.querySelector("#searchSymbols").focus()}},"Equities"),s.createElement(h.HQ,{className:"security-type_navlink font-weight-bold",href:"#",active:"futures"===d,onClick:()=>{n.current.value="",c(""),u("futures"),document.querySelector("#searchSymbols").focus()}},"Futures"))))),s.createElement(fi,{searchQuery:l,selectedSecurity:d}))});var bi=r(46770),vi=(r(86190),r(86387)),ki=r.n(vi),xi=(r(15631),r(80333));const Si=(0,n.Ng)((e,t)=>({auth:e.firebase.auth,charts:e.charts.charts,fullScreenMode:e.charts.fullScreenMode,fullScreenBrand:e.charts.fullScreenBrand,mainHeight:e.charts.mainHeight,headerHeight:e.charts.headerHeight,settingsModelShow:e.charts.settingsModelShow,showScreenShotModal:e.charts.showScreenShotModal,currentChartSettings:e.charts.currentChartSettings,updateTheCharts:e.charts.updateTheCharts,selectedChart:e.charts.selectedChart,selectedChartEvent:e.charts.selectedChartEvent,brandsModelShow:e.charts.brandsModelShow,disableEvent:e.charts.disableEvent,myWatchList:"mySymbols"in e.firebase.data&&null!==e.firebase.data.mySymbols[e.firebase.auth.uid]?e.firebase.data.mySymbols[e.firebase.auth.uid]:{}}),e=>({updateProperty:t=>e((0,i.$)(t)),SetChartSettings:(t,r,s,n)=>e((0,a.SU)(t,r,s,n)),EditMarket:(t,r,s,n)=>e((0,a.$h)(t,r,s,n)),EditWatchList:(t,r)=>e((0,a.WA)(t,r))}))(e=>{const{auth:t,charts:r,fullScreenMode:n,fullScreenBrand:i,mainHeight:a,headerHeight:o,settingsModelShow:l,showScreenShotModal:c,currentChartSettings:u,myWatchList:p,disableEvent:m,updateTheCharts:g,updateProperty:f,SetChartSettings:y,EditMarket:v,EditWatchList:k,selectedChart:x,selectedChartEvent:S,brandsModelShow:C}=e,[w,D]=(0,s.useState)(null),[E,R]=(0,s.useState)([]),O=(0,s.useRef)(null),T=(0,s.useRef)(null),F=(0,s.useRef)(!1),P=(0,s.useRef)(!1),q=(0,s.useRef)(null),A=(0,s.useRef)(""),N=(0,s.useRef)(!0),M=(0,s.useRef)(!1),W=(0,s.useRef)(!1),V=(0,s.useRef)(!1),[H,z]=(0,s.useState)(!1),[I,L]=(0,s.useState)(!1),X=((0,s.useRef)(!1),(0,s.useCallback)(e=>{null!==e&&e.getBoundingClientRect().height>0&&f({headerHeight:e.getBoundingClientRect().height})},[]));(0,s.useEffect)(()=>{q.current=x,P.current=m,W.current=n,F.current||(F.current=!0,window.addEventListener("keydown",B),window.addEventListener("wheel",Y,{passive:!1}))},[x,n,m]),(0,s.useEffect)(()=>()=>{window.removeEventListener("keydown",B),window.removeEventListener("wheel",Y,{passive:!1}),F.current=!1},[]);const B=e=>{if(null!=q.current&&!P.current){if(e.altKey)return e.preventDefault(),void(e.keyCode>=65&&e.keyCode<=90&&(83==e.keyCode?W.current?f({fullScreenMode:!1}):f({fullScreenBrand:q.current,fullScreenMode:!0}):f({selectedChartEvent:{chart:q.current,code:e.keyCode,uid:ki()()}})));if(13==e.keyCode){if(V.current){let e=A.current.toUpperCase().replace("/","");const t=M.current?"futures":"stocks";z(!1),M.current=!1,V.current=!1,v(e,q.current,!1,{securityType:t}),A.current=""}}else 27==e.keyCode&&V.current?(z(!1),M.current=!1,V.current=!1,A.current=""):e.keyCode>=65&&e.keyCode<=90||191==e.keyCode||111==e.keyCode?V.current||(191!=e.keyCode&&111!=e.keyCode||(M.current=!0),z(q.current),V.current=q.current,T.current.focus()):(9==e.which&&e.preventDefault(),f({selectedChartEvent:{chart:q.current,code:e.which,uid:ki()()}}))}},Y=e=>{e.ctrlKey&&(e.stopPropagation(),e.preventDefault())};return 0==r.length?s.createElement(h.sK,null):s.createElement(h.sK,{className:"parent_charts-list mr-0 ml-0"},s.createElement(s.Fragment,null,r.map((e,t)=>{let r="stocks"==e.chartSettings.securityType?e.chartSymbol:e.chartSymbol+"*0";return s.createElement(h.UF,{innerRef:x==e.chartUid?O:null,onClick:()=>{f({selectedChartEvent:null,selectedChart:e.chartUid})},key:e.chartUid,style:{height:n?a:a/2},className:"chartlist-container "+(n&&i!=e.chartUid?"d-none":""),xs:"12",sm:n?"12":"6",md:n?"12":"6"},x==e.chartUid&&s.createElement("div",{className:"chartlist-container_shadow"}),s.createElement(h.E$,{className:"m-0"+(x==e.chartUid&&" z-index-2")},s.createElement(h.V0,{innerRef:X,className:"card-header-actions mr-0 d-flex align-items-center justify-content-between c-header"},s.createElement("div",{style:{zIndex:10},className:"d-flex w-50"},H==e.chartUid&&s.createElement(bi.A,{placeholderProps:"Symbols filter",isMultiProps:!1,refProps:T,futuresAsync:M.current,onChangeProps:e=>{if(N.current){const t=e.value;z(!1),V.current=!1,v(t,q.current,!1,{securityType:M.current?"futures":"stocks"})}N.current=!0},onInputChangeProps:e=>{""!=e&&(A.current=e)},onKeyDownProps:e=>{13==e.keyCode&&(N.current=!1)},defaultMenuIsOpen:!0})||s.createElement("span",{onClick:()=>f({brandsModelShow:!0}),className:"h5 ml-2 mb-0 chart-symbol_container"},e.chartSymbol)),s.createElement("div",{className:"card-header-actions d-flex align-items-center"},s.createElement(h.jl,{content:"Time Frame"},s.createElement(h.$X,{shape:"pill",style:{outline:"1.5px solid "+e.chartSettings.priceBarsColor,cursor:"pointer",height:20},className:"ml-1 mr-1 d-flex align-items-center justify-content-center",onClick:()=>{localStorage.removeItem(e.chartUid),localStorage.removeItem("scale_"+e.chartUid),localStorage.removeItem("yScale_"+e.chartUid),y({periodicity:"1m"==e.chartSettings.periodicity?"15m":"1m"},e.chartUid,!1,!0)}},e.chartSettings.periodicity)),"futures"!==e.chartSettings.securityType&&s.createElement(h.jl,{content:"Flow Index"},s.createElement(h.$X,{shape:"pill",style:{outline:"1.5px solid "+("normal"===e.chartSettings.flowIndex?e.chartSettings.flowIndexColor:"dark-pool"===e.chartSettings.flowIndex?e.chartSettings.flowDarkIndexColor:e.chartSettings.flowBothIndexColor),cursor:"pointer",height:20},className:"ml-1 mr-1 d-flex align-items-center justify-content-center",onClick:()=>{let t;switch(e.chartSettings.flowIndex){case"normal":t="dark-pool";break;case"dark-pool":t="both";break;case"both":t="normal"}y({flowIndex:t},e.chartUid,!1,!0)}},["normal","dark-pool","both"].map(t=>{if(e.chartSettings.flowIndex==t)switch(e.chartSettings.flowIndex){case"normal":return"Flow Index";case"dark-pool":return"DarkPool Index";case"both":return"Combo"}}))),xi.Fr&&s.createElement(h.KV,{className:"d-flex card-header-action pl-1 pr-1",onClick:()=>{L(!I)}},s.createElement(d.Ay,{name:"cis-grip-dots-vertical",className:I?"text-danger":"",height:20})),s.createElement("div",{className:xi.Fr?I?"d-flex flex-column align-items-center custom-mobile_flex":"d-none":"d-flex align-items-center"},e.chartSettings.replayMarket&&s.createElement(s.Fragment,null,!("pause"==e.chartSettings.replayMarket)&&s.createElement(h.jl,{content:"Pause Market"},s.createElement(h.KV,{className:(xi.Fr,"pt-1 pb-0"),onClick:()=>{y({replayMarket:"pause"},e.chartUid,!1,!1)}},s.createElement(d.Ay,{name:"cis-media-pause-circle",height:20}))),"pause"==e.chartSettings.replayMarket&&s.createElement(h.jl,{content:"Play Market"},s.createElement(h.KV,{className:(xi.Fr,"pt-1 pb-0"),onClick:()=>{y({replayMarket:"play"},e.chartUid,!1,!1)}},s.createElement(d.Ay,{name:"cis-media-play-circle",height:20}))),s.createElement(h.jl,{content:"Stop Market"},s.createElement(h.KV,{className:"card-header-action p-07",onClick:()=>{y({replayMarket:!1},e.chartUid,!1,!1)}},s.createElement(d.Ay,{name:"cis-media-stop-circle",height:20}))),s.createElement(h.jl,{content:"Speed"},s.createElement("div",{className:"card-header-action p-07"},s.createElement(h.mt,{custom:!0,size:"xs",name:"selectSm",id:"SelectLm",value:e.chartSettings.replayMarketSettings.speed,onChange:t=>{y({replayMarketSettings:{speed:t.target.value}},e.chartUid,!1,!1)}},s.createElement("option",{value:"500"},"Slow"),s.createElement("option",{value:"250"},"Normal"),s.createElement("option",{value:"100"},"Fast"))))),!e.chartSettings.replayMarket&&s.createElement(s.Fragment,null,s.createElement(h.jl,{content:"Watch List"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{k(r,!(r in p))}},r in p&&s.createElement(d.Ay,{height:20,className:"text-danger d-flex",name:"cis-queue-remove"})||s.createElement(d.Ay,{className:"d-flex",name:"cil-queue-add",height:20}))),s.createElement("div",{onClick:t=>{if(t.target.parentNode.classList.contains("chartTypes-option")||t.target.parentNode.classList.contains("chartTypes-list")){let r=t.target.parentNode.classList.contains("chartTypes-option")?t.target.parentNode.getAttribute("data-chartype"):t.target.getAttribute("data-chartype");y({chartType:r},e.chartUid,!1,!0)}}},s.createElement(h.p3,{content:s.createElement("ul",{className:"chartTypes-list"},s.createElement("div",{className:"chartTypes-option"+("ohlc"==e.chartSettings.chartType?" chartTypes-option-selected":""),"data-chartype":"ohlc"},s.createElement("img",{src:s.icons.Tools.ohlc},null),s.createElement("span",{},"OHLC")),s.createElement("div",{className:"chartTypes-option"+("candles"==e.chartSettings.chartType?" chartTypes-option-selected":""),"data-chartype":"candles"},s.createElement("img",{src:s.icons.Tools.candles},null),s.createElement("span",{},"Candles"))),placement:"bottom",interactive:!0,trigger:"click"},s.createElement(h.Jm,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1")+" chartType-container",src:s.icons.Tools[e.chartSettings.chartType]}))),!e.chartSettings.drawingMode&&s.createElement(h.jl,{content:"Drawing Tools"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{y({drawingMode:!0},e.chartUid,!1,!0)}},s.createElement(d.Ay,{className:"d-flex",name:"cil-color-border",height:20}))),e.chartSettings.drawingMode&&s.createElement("div",{className:xi.Fr?"d-flex flex-column-reverse align-items-center":"d-flex align-items-center",style:{backgroundColor:"rgba(0, 0, 21, 0.75)",borderRadius:5,padding:"5px 2px 5px 2px",boxShadow:"0 2px 2px 0 rgba(var(--elevation-base-color), .14), 0 3px 1px -2px rgba(var(--elevation-base-color), .12), 0 1px 5px 0 rgba(var(--elevation-base-color), .20)"}},s.createElement(h.jl,{content:"Fibonacci Retracements ( ALT+F )"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-0 pr-0"),onClick:()=>{y({fibonacciRetracements:!e.chartSettings.fibonacciRetracements,fibonacciTrendLineColor:e.chartSettings.fibonacciRetracementsColor},e.chartUid,!1,!1)}},e.chartSettings.fibonacciRetracements&&s.createElement(h.Jm,{className:"d-flex card-header-action chartType-container",height:20,src:s.icons.Tools.fibonacciHeaderSelected})||s.createElement(h.Jm,{className:"d-flex card-header-action chartType-container",height:20,src:s.icons.Tools.fibonacciHeader}))),s.createElement(h.jl,{content:"Finite Line ( ALT+L )"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-0 pr-0"),onClick:()=>{y({trendLine:!e.chartSettings.trendLine,trendLineType:"LINE",trendLineColor:e.chartSettings.trendLineLineColor},e.chartUid,!1,!1)}},e.chartSettings.trendLine&&"LINE"==e.chartSettings.trendLineType&&s.createElement(h.Jm,{className:"d-flex card-header-action chartType-container",src:s.icons.Tools.sLineHeaderSelected})||s.createElement(h.Jm,{className:"d-flex card-header-action chartType-container",src:s.icons.Tools.sLineHeader}))),s.createElement(h.jl,{content:"Semi-Infinite Line ( ALT+R )"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-0 pb-0":"pl-0 pr-0"),onClick:()=>{y({trendLine:!e.chartSettings.trendLine,trendLineType:"RAY",trendLineColor:e.chartSettings.trendLineRayColor},e.chartUid,!1,!1)}},e.chartSettings.trendLine&&"RAY"==e.chartSettings.trendLineType&&s.createElement(h.Jm,{className:"d-flex card-header-action chartType-container",height:20,src:s.icons.Tools.siLineHeaderSelected})||s.createElement(h.Jm,{className:"d-flex card-header-action chartType-container",height:20,src:s.icons.Tools.siLineHeader}))),s.createElement(h.jl,{content:"Infinite Line ( ALT+X )"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-0 pr-0"),onClick:()=>{y({trendLine:!e.chartSettings.trendLine,trendLineType:"XLINE",trendLineColor:e.chartSettings.trendLineXlineColor},e.chartUid,!1,!1)}},e.chartSettings.trendLine&&"XLINE"==e.chartSettings.trendLineType&&s.createElement(h.Jm,{className:"d-flex card-header-action chartType-container",height:20,src:s.icons.Tools.iLineHeaderSelected})||s.createElement(h.Jm,{className:"d-flex card-header-action chartType-container",height:20,src:s.icons.Tools.iLineHeader}))),s.createElement(h.jl,{content:"Drawing Tools"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{y({drawingMode:!1},e.chartUid,!1,!0)}},s.createElement(d.Ay,{className:"d-flex text-danger",name:"cis-color-border",height:20})))),s.createElement(h.jl,{content:"ScreenShot"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{y({takeScreenShot:!0},e.chartUid,!1,!1),f({showScreenShotModal:!c})}},s.createElement(d.Ay,{className:"d-flex",name:"cis-images",height:20}))),!e.chartSettings.blocksLine&&s.createElement(h.jl,{content:"Show BlockTrades"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{y({blocksLine:!e.chartSettings.blocksLine},e.chartUid,!1,!0)}},s.createElement(d.Ay,{className:"d-flex",name:"cil-image-broken",height:20}))),e.chartSettings.blocksLine&&s.createElement("div",{className:xi.Fr?"d-flex flex-column-reverse align-items-center":"d-flex align-items-center",style:{backgroundColor:"rgba(0, 0, 21, 0.75)",borderRadius:5,padding:"5px 2px 5px 2px",boxShadow:"0 2px 2px 0 rgba(var(--elevation-base-color), .14), 0 3px 1px -2px rgba(var(--elevation-base-color), .12), 0 1px 5px 0 rgba(var(--elevation-base-color), .20)"}},s.createElement(h.ev,{style:{width:"60px"},size:"xs",type:"number",value:e.chartSettings.blocktradesDates,onChange:t=>{let r=t.target.value;r<=30&&r>0&&y({blocktradesDates:r},e.chartUid,!1,!0)}}),s.createElement(h.jl,{content:"Hide BlockTrades"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{y({blocksLine:!e.chartSettings.blocksLine},e.chartUid,!1,!0)}},s.createElement(d.Ay,{className:"d-flex text-danger",name:"cis-image-broken",height:20})))),s.createElement(h.jl,{content:"Show Divergence"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{y({showDivergence:!e.chartSettings.showDivergence},e.chartUid,!1,!0)}},!e.chartSettings.showDivergence&&s.createElement(d.Ay,{className:"d-flex",name:"cil-call-split",height:20}),e.chartSettings.showDivergence&&s.createElement(d.Ay,{className:"d-flex text-danger",name:"cis-call-split",height:20}))),s.createElement(h.jl,{content:"Replay Market"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{y({replayMarket:!0},e.chartUid,!1,!1)}},s.createElement(d.Ay,{className:"d-flex",name:"cis-media-play-circle",height:20}))),s.createElement(h.jl,{content:"Chart Settings"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{y({chartSymbol:e.chartSymbol},e.chartUid,!1),f({settingsModelShow:!l})}},s.createElement(d.Ay,{className:"d-flex",name:"cis-settings",height:20}))),n&&!xi.Fr&&s.createElement(h.jl,{content:"Restore Screen ( ALT + S )"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{y({fullScreenMode:!1},e.chartUid,!0,!1),f({fullScreenMode:!n})}},s.createElement(d.Ay,{className:"d-flex",name:"cis-window-restore",height:20}))),!n&&s.createElement(h.jl,{content:"Full Screen ( ALT + S )"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{let t=e.chartUid;y({fullScreenMode:!0},e.chartUid,!0,!1),f({fullScreenBrand:t,fullScreenMode:!n})}},s.createElement(d.Ay,{className:"d-flex",name:"cis-window-maximize",height:20}))),!n&&s.createElement(h.jl,{content:"Remove Chart"},s.createElement(h.KV,{className:"d-flex card-header-action "+(xi.Fr?"pt-1 pb-1":"pl-1 pr-1"),onClick:()=>{v(e.chartSymbol,e.chartUid,!0),localStorage.removeItem(e.chartUid),localStorage.removeItem("scale_"+e.chartUid),localStorage.removeItem("yScale_"+e.chartUid)}},s.createElement(d.Ay,{className:"d-flex",name:"cis-x-circle",height:20}))))))),s.createElement(h.W6,{className:"p-0 d-flex justify-content-center",style:{backgroundColor:e.chartSettings.backgroundColor}},s.createElement("div",{className:"chart-watermark"},s.createElement(d.Ay,{content:s.icons.flowtradeDarkLogo,height:"95",alt:"Flowtrade"})),s.createElement(b.ErrorBoundary,{FallbackComponent:({error:e,resetErrorBoundary:t})=>null,onReset:()=>{}},s.createElement(gi,{type:"hybrid",height:n?a-o:a/2-o,symbol:e.chartSymbol,settings:e.chartSettings,chartKey:e.chartSymbol,chartUid:e.chartUid,chartEvent:x==e.chartUid?S:null})))))})))});var Ci=r(18970);const wi=(0,n.Ng)(e=>({currentChartSettings:e.charts.currentChartSettings,settingsModelShow:e.charts.settingsModelShow,charts:e.charts.charts,updateTheCharts:e.charts.updateTheCharts,applyToAllChart:e.charts.applyToAllChart}),e=>({updateProperty:t=>e((0,i.$)(t)),SetChartSettings:(t,r,s,n,i,o)=>e((0,a.SU)(t,r,s,n,i,o))}))(e=>{const{settingType:t,settingTitle:r,settingId:n,settingAttribute:i,settingApplyToAll:a,currentChartSettings:o,settingsModelShow:l,charts:c,updateTheCharts:u,applyToAllChart:p,updateProperty:m,SetChartSettings:g}=e,[f,y]=(0,s.useState)([]),[b,v]=(0,s.useReducer)(e=>e+1,0);(0,s.useEffect)(()=>{let e=[];i.map((t,r)=>{t.colors&&(e[r]=!1)}),y(e)},[]);const k=(e,t,r,s=!0)=>{let n=[];const i=p?c.length:1;p?c.map(e=>{n.push(e)}):n=c.filter(e=>e.chartSymbol===o.chartSymbol);for(var a=0;a<i;a++){let t=p?n[a].chartUid:o.chartUid;"object"==typeof e.id?g({...e.id,chartSymbol:t},t,!1,s,!1,p):g({[r]:e.id,chartSymbol:t},t,!1,s,!1,p)}t&&m({settingsModelShow:!l})};return s.createElement(s.Fragment,null,r&&s.createElement(h.y5,{className:"h5 mb-0 d-flex flex-direction-row align-items-center justify-content-between"},s.createElement("div",null,r)),"multiple"==t&&i.map((e,t)=>s.createElement(h.y5,{key:t,action:!0,active:o[n]==e.id,className:"pl-5 custom-active mb-0",onClick:()=>k(e,!1,n)},e.name," ",s.createElement("i",{className:"cis-check-alt"}))),"simple"==t&&i.map((e,t)=>s.createElement(h.y5,{key:t,action:!0,className:"h5 mb-0 d-flex flex-direction-row align-items-center justify-content-between"},s.createElement("div",{onClick:()=>{e.onClick&&k(e,!0,n,!1)},style:{cursor:e.onClick?"pointer":"default"}},e.icon&&s.createElement(d.Ay,{className:"pr-2",src:s.icons.Tools[e.icon],height:25}),e.name,e.shortCode&&s.createElement("small",{className:"font-italic text-muted"}," ( "+e.shortCode+" )")),e.options&&s.createElement("div",null,s.createElement(h.ji,{className:"btn-group card-header-action pl-1 pr-1"},s.createElement(h.VH,{color:"primary",size:"sm",className:"font-weight-bold"},e.showValue||e.value),s.createElement(h.QR,{placement:"right"},e.options.map((t,r)=>s.createElement(h.kd,{key:r,onClick:()=>k(t,!1,e.id),active:t.id==e.value},t.name))))),e.switch&&s.createElement("div",{className:"card-header-action pl-1 pr-1"},s.createElement(h.Cd,{className:"",color:"info",checked:e.value||!1,shape:"pill",variant:"3d",onChange:()=>{k({id:!e.value},!1,e.id)}})),e.colors&&s.createElement("div",null,s.createElement("div",{style:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},onClick:()=>{let e=f;e[t]=!f[t],y(e),v()}},s.createElement("div",{style:{width:"36px",height:"14px",borderRadius:"2px",background:e.value}})),f[t]&&s.createElement("div",{style:{position:"absolute",zIndex:"2"}},s.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:()=>{let e=f;e[t]=!f[t],y(e),v()}}),s.createElement(Ci.Xq,{color:e.value,onChange:t=>k({id:t.hex},!1,"colorId"in e?e.colorId:e.id)}))),e.input&&s.createElement("div",null,s.createElement(h.ev,{style:{width:"60px"},size:"xs",type:"number",value:e.value||1,onChange:t=>{let r=t.target.value;if(e.maxValue||e.minValue){if(e.maxValue&&r>e.maxValue)return;if(e.minValue&&r<e.minValue)return}k({id:r},!1,e.id)}})))))}),Di=(0,n.Ng)(e=>({currentChartSettings:e.charts.currentChartSettings}))(e=>{const{currentChartSettings:t}=e,[r,n]=(0,s.useState)(0),[i,a]=(0,s.useState)(0);return s.createElement(h.sK,null,s.createElement(h.UF,{className:"pr-0",xs:"5"},s.createElement(h.XR,{id:"list-tab",role:"tablist"},s.createElement(h.y5,{className:"h5 mb-0",onClick:()=>n(0),action:!0,active:0===r},"General"),s.createElement(h.y5,{className:"h5 mb-0",onClick:()=>n(1),action:!0,active:1===r},"Style"),s.createElement(h.y5,{className:"h5 mb-0",onClick:()=>n(2),action:!0,active:2===r},"Tools"))),s.createElement(h.UF,{className:"pl-0",xs:"7"},s.createElement(h.eL,null,s.createElement(h.x1,{active:0===r},s.createElement(wi,{settingType:"simple",settingTitle:"General Settings",settingAttribute:[{name:"Flow Index",id:"flowIndex",value:t.flowIndex,showValue:["normal","dark-pool","both"].map(e=>{if(t.flowIndex==e)switch(t.flowIndex){case"normal":return"Flow Index";case"dark-pool":return"DarkPool Index";case"both":return"Combo"}}),options:[{name:"Flow Index",id:"normal"},{name:"DarkPool Index",id:"dark-pool"},{name:"Combo",id:"both"}],onClick:!1},{name:"Time Frame",id:"periodicity",value:t.periodicity,showValue:["1m","15m"].map(e=>{if(t.periodicity==e)switch(t.periodicity){case"1m":return"1 Minute";case"15m":return"15 Minutes"}}),options:[{name:"1 Minute",id:"1m"},{name:"15 Minutes",id:"15m"}],onClick:!1},{name:"Chart Type",id:"chartType",value:t.chartType,showValue:["ohlc","candles"].map(e=>{if(t.chartType==e)switch(t.chartType){case"ohlc":return"OHLC";case"candles":return"Candles"}}),options:[{name:"OHLC",id:"ohlc"},{name:"Candles",id:"candles"}],onClick:!1},{name:"Show Average",id:"showAverage",value:t.showAverage,switch:!0,onClick:!1},{name:"Show Grid",id:"showGrid",value:t.showGrid,switch:!0,onClick:!1},{name:"Show BlockTrades",id:"blocksLine",value:t.blocksLine,switch:!0,onClick:!1}],settingApplyToAll:!0})),s.createElement(h.x1,{active:1===r},s.createElement(h.E$,{className:"mb-0"},s.createElement(h.V0,{style:{backgroundColor:0===i?"#1992e3":"transparent"}},s.createElement(h.KV,{className:"d-flex align-items-center text-left text-white text-decoration-none m-0 p-0",onClick:()=>a(0===i?null:0)},s.createElement("h5",{className:"m-0 p-0 mr-auto"},"Color Styles"),s.createElement(d.Ay,{name:0===i?"cis-arrow-thick-top":"cis-arrow-thick-bottom"}))),s.createElement(h.x8,{show:0===i},s.createElement(h.W6,{className:"p-0"},s.createElement(wi,{settingType:"simple",settingAttribute:[{name:"Background Color",id:"backgroundColor",value:t.backgroundColor,colors:!0,onClick:!1},{name:"Price Bars Color",id:"priceBarsColor",value:t.priceBarsColor,colors:!0,onClick:!1},{name:"Normal Flow Index",id:"flowIndexColor",value:t.flowIndexColor,colors:!0,onClick:!1},{name:"Average Flow Index",id:"flowIndexAvgColor",value:t.flowIndexAvgColor,colors:!0,onClick:!1},{name:"Dark Flow Index",id:"flowDarkIndexColor",value:t.flowDarkIndexColor,colors:!0,onClick:!1},{name:"Combo Flow Index",id:"flowBothIndexColor",value:t.flowBothIndexColor,colors:!0,onClick:!1},{name:"Dark Pool BlockTrade",id:"blockTradesDarkPoolColor",value:t.blockTradesDarkPoolColor,colors:!0,onClick:!1},{name:"Regular Pool BlockTrade",id:"blockTradesRegularPoolColor",value:t.blockTradesRegularPoolColor,colors:!0,onClick:!1}],settingApplyToAll:!0})))),s.createElement(h.E$,{className:"mb-0"},s.createElement(h.V0,{style:{backgroundColor:1===i?"#1992e3":"transparent"}},s.createElement(h.KV,{className:"d-flex align-items-center text-left text-white text-decoration-none m-0 p-0",onClick:()=>a(1===i?null:1)},s.createElement("h5",{className:"m-0 p-0 mr-auto"},"Line Styles"),s.createElement(d.Ay,{name:1===i?"cis-arrow-thick-top":"cis-arrow-thick-bottom"}))),s.createElement(h.x8,{show:1===i},s.createElement(h.W6,{className:"p-0"},s.createElement(wi,{settingType:"simple",settingAttribute:[{name:"Flow Index Thickness",id:"flowIndexWidth",value:t.flowIndexWidth,input:!0,maxValue:10,minValue:1,onClick:!1}],settingApplyToAll:!0}))))),s.createElement(h.x1,{active:2===r},s.createElement(wi,{settingType:"simple",settingTitle:"Chart Tools",settingAttribute:[{name:"Fibonacci Retracements",id:{drawingMode:!0,fibonacciRetracements:!0,fibonacciTrendLineColor:t.fibonacciRetracementsColor},icon:"fibonacci",shortCode:"ALT+F",colorId:"fibonacciRetracementsColor",colors:!0,value:t.fibonacciRetracementsColor},{name:"Finite Line",id:{drawingMode:!0,trendLine:!0,trendLineType:"LINE",trendLineColor:t.trendLineLineColor},icon:"sLine",shortCode:"ALT+L",colorId:"trendLineLineColor",colors:!0,value:t.trendLineLineColor},{name:"Semi-Infinite Line",id:{drawingMode:!0,trendLine:!0,trendLineType:"RAY",trendLineColor:t.trendLineRayColor},icon:"siLine",shortCode:"ALT+R",colorId:"trendLineRayColor",colors:!0,value:t.trendLineRayColor},{name:"Infinite Line",id:{drawingMode:!0,trendLine:!0,trendLineType:"XLINE",trendLineColor:t.trendLineXlineColor},icon:"iLine",shortCode:"ALT+X",colorId:"trendLineXlineColor",colors:!0,value:t.trendLineXlineColor}]})))))});let Ei;r(84715);const Ri=(0,n.Ng)(e=>({charts:e.charts.charts,updateTheCharts:e.charts.updateTheCharts,brands:e.charts.brands,mainHeight:e.charts.mainHeight,fullScreenMode:e.charts.fullScreenMode,brandsModelShow:e.charts.brandsModelShow,settingsModelShow:e.charts.settingsModelShow,currentChartSettings:e.charts.currentChartSettings,screenShotSrc:e.charts.screenShotSrc,showScreenShotModal:e.charts.showScreenShotModal,selectedChart:e.charts.selectedChart,showTourSteps:e.charts.showTourSteps,showTour:e.firebase.profile.showTour,watchList:e.charts.watchList,watchListChanged:e.charts.watchListChanged,disableEvent:e.charts.disableEvent,updateProfileError:e.user.updateProfileError,updateInProgress:e.user.updateInProgress,discordInfo:e.user.discordInfo}),e=>({updateProperty:t=>e((0,i.$)(t)),EditProfile:(t,r)=>e((0,o._t)(t,r)),ShareDiscord:t=>e((0,o.wl)(t)),signOut:()=>e((0,l.CI)()),SetChartSettings:(t,r,s,n)=>e((0,a.SU)(t,r,s,n)),ResetChartSettings:()=>e((0,a.TZ)()),EditWatchList:t=>e((0,a.WA)(t))}))(e=>{const{charts:t,updateTheCharts:r,brands:n,mainHeight:i,fullScreenMode:a,brandsModelShow:o,settingsModelShow:l,currentChartSettings:u,screenShotSrc:p,showScreenShotModal:m,selectedChart:g,showTourSteps:f,showTour:y,watchList:b,watchListChanged:v,disableEvent:k,updateProfileError:x,updateInProgress:S,discordInfo:C,updateProperty:w,EditProfile:D,ShareDiscord:E,SetChartSettings:R,EditWatchList:O,signOut:T,ResetChartSettings:F}=e,[P,q]=(0,s.useState)([]),[A,N]=(0,s.useState)("top-center"),[M,W]=(0,s.useState)(!0),[V,H]=(0,s.useState)(5e3),[z,I]=(0,s.useState)(!0),[L,X]=(0,s.useState)(!0),[B,Y]=(0,s.useState)("bg-danger"),[G,$]=(0,s.useState)(!1);(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useEffect)(async()=>{null!==x&&(Y("bg-danger"),j("Updating Failed",x)),(void 0===y||y)&&w({showTourSteps:!0}),Ei&&Ei.update()},[n,y,x,v]);const j=(e,t)=>{q([...P,{position:A,autohide:M&&V,closeButton:z,fade:L,type:B,title:e,body:t}])},U=P.reduce((e,t)=>(e[t.position]=e[t.position]||[],e[t.position].push(t),e),{});return s.createElement(s.Fragment,null,t.length<4&&!a&&s.createElement(h.Q_,{onClick:()=>w({selectedChart:null,brandsModelShow:!0}),className:"add-new-market_button first-step",shape:"pill",color:"primary"},s.createElement(d.Ay,{size:"xl",name:"cis-plus",className:"mr-2"}),"Add New Symbol"),s.createElement(Si,null),s.createElement(h.sK,null,s.createElement(h.UF,{sm:"12",lg:"12"},Object.keys(U).map(e=>s.createElement(h.Yq,{position:e,key:"toaster"+e},U[e].map((e,t)=>s.createElement(h.JY,{className:e.type,key:"toast"+t,show:!0,autohide:e.autohide,fade:e.fade},s.createElement(h.AH,{className:"bg-danger",closeButton:e.closeButton},e.title),s.createElement(h.Bw,null,e.body))))))),o&&s.createElement(h.zS,{show:o,onClose:()=>{w({disableEvent:!1,brandsModelShow:!1})},onClosed:()=>w({disableEvent:!1}),onOpened:()=>{w({disableEvent:!0}),Ei=new c.A(".symbols-modal-body")},closeOnBackdrop:!1},s.createElement(h.E4,{className:"font-weight-bold",closeButton:!0},"Add New Symbol"),s.createElement(h.Tc,{style:{paddingRight:10},className:"pl-0 pb-0 pt-0 symbols-modal-body h-50"},s.createElement(yi,null))),l&&s.createElement(h.zS,{show:l,onOpened:()=>w({disableEvent:!0}),onClose:()=>{w({disableEvent:!1,currentChartSettings:{},settingsModelShow:!l})},onClosed:()=>w({disableEvent:!1}),closeOnBackdrop:!1,size:"lg"},s.createElement(h.E4,{className:"h5 mb-0",closeButton:!0},s.createElement("div",{className:"d-flex align-items-center"},"Chart Settings",s.createElement(h.Q_,{size:"sm",className:"font-weight-bold ml-3",shape:"pill",color:"primary",onClick:F},"Factory Reset"))),s.createElement(h.Tc,{className:"p-0"},s.createElement(Di,null))),m&&s.createElement(h.zS,{show:m,onOpened:()=>w({disableEvent:!0}),onClose:()=>{w({disableEvent:!1,screenShotSrc:null,showScreenShotModal:!m})},onClosed:()=>w({disableEvent:!1}),closeOnBackdrop:!1,size:"lg"},s.createElement(h.E4,{className:"h5 mb-0",closeButton:!0},"ScreenShot Share"),s.createElement(h.Tc,{className:""},null==p&&s.createElement("div",{style:{height:i,position:"relative"}},s.createElement(h.JT,{className:"absolute-spinner"})),null!==p&&s.createElement("img",{width:"100%",style:{borderRadius:10},src:p}),C&&s.createElement(h.Q_,{onClick:()=>{E(p),w({showScreenShotModal:!1})},className:"mt-3 font-weight-bold text-white",shape:"pill",style:{backgroundColor:"#5865F2"}},s.createElement("div",{className:"d-flex align-items-center"},s.createElement("div",{className:"d-flex align-items-center"},s.createElement(d.Ay,{size:"lg",name:"cib-discord",className:"mr-1"})," Share on Discord"))))),s.createElement(h.zS,{show:G,onOpened:()=>w({disableEvent:!0}),onClose:()=>{w({disableEvent:!1}),$(!1)},onClosed:()=>w({disableEvent:!1}),closeOnBackdrop:!1,className:"compact-modal",centered:!0},s.createElement(h.E4,{className:"h5 mb-0",closeButton:!0},"Cancel confirmation"),s.createElement(h.Tc,{className:""},s.createElement("div",null,"Are you sure you want to cancel your subscription ?")),s.createElement(h.If,{className:"justify-content-start"},s.createElement(h.Q_,{onClick:()=>{D({cancelv2:!0},T()),$(!1)},className:"btn-pill font-weight-bold",color:"danger",disabled:S},S?"Cancelling ...":"Yes, cancel my account")," ",s.createElement(h.Q_,{className:"btn-pill font-weight-bold",color:"secondary",onClick:()=>$(!1)},"No"))))})}}]);